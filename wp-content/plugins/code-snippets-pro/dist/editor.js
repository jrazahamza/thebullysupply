(()=>{var t,e={6687:(t,e,i)=>{"use strict";var n=i(3204),s=i(3324),r=i(7343);function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(0,r.Z)(n.key),n)}}var h=i(3638),a=i.n(h);function l(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){h=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(h)throw r}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.code=e,this.annotations=[],this.function_names=new Set,this.class_names=new Set}var e,i;return e=t,i=[{key:"lint",value:function(){var t=new(a())({parser:{suppressErrors:!0,version:800},ast:{withPositions:!0}});try{var e=t.parseEval(this.code);if(e.errors&&0<e.errors.length){var i,n=l(e.errors);try{for(n.s();!(i=n.n()).done;){var s=i.value;this.annotate(s.message,s.loc)}}catch(t){n.e(t)}finally{n.f()}}this.visit(e)}catch(s){console.error(s)}}},{key:"visit",value:function(t){if(t.kind&&this.validate(t),"children"in t){var e,i=l(t.children);try{for(i.s();!(e=i.n()).done;){var n=e.value;this.visit(n)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"checkDuplicateIdentifier",value:function(t,e,i){e.has(t.name)?this.annotate("Cannot redeclare ".concat(i," ").concat(t.name,"()"),t.loc):e.add(t.name)}},{key:"validate",value:function(t){var e=t,i=e.name;"name"in e&&"name"in i&&"identifier"===i.kind&&("function"===t.kind?this.checkDuplicateIdentifier(i,this.function_names,"function"):"class"===t.kind&&this.checkDuplicateIdentifier(i,this.class_names,"class"))}},{key:"annotate",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error";if(e.start&&e.end){var r=e.end.offset<e.start.offset?[e.end,e.start]:[e.start,e.end],o=(0,s.Z)(r,2),h=o[0],a=o[1];this.annotations.push({message:t,severity:i,from:n.Pos(h.line-1,h.column),to:n.Pos(a.line-1,a.column)})}}}],i&&o(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();n.registerHelper("lint","php",(function(t){var e=new u(t);return e.lint(),e.annotations})),i(9354),(0,n.defineMode)("php-snippet",(function(t){return(0,n.getMode)(t,{name:"application/x-httpd-php",startOpen:!0})}))},9354:function(t,e,i){t.exports=function(){"use strict";function t(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(0, 0, 0, 0)";return Array.isArray(t)&&(t={r:t[0],g:t[1],b:t[2],a:t[3]}),"hex"==i?e(t):"rgb"==i?n(t,r):"hsl"==i?s(t):t}function e(t){Array.isArray(t)&&(t={r:t[0],g:t[1],b:t[2],a:t[3]});var e=t.r.toString(16);t.r<16&&(e="0"+e);var i=t.g.toString(16);t.g<16&&(i="0"+i);var n=t.b.toString(16);t.b<16&&(n="0"+n);var s="";if(t.a<1){var r=Math.floor(255*t.a);s=r.toString(16),r<16&&(s="0"+s)}return"#"+e+i+n+s}function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(0, 0, 0, 0)";if(Array.isArray(t)&&(t={r:t[0],g:t[1],b:t[2],a:t[3]}),void 0!==t)return 1==t.a||void 0===t.a?isNaN(t.r)?e:"rgb("+t.r+","+t.g+","+t.b+")":"rgba("+t.r+","+t.g+","+t.b+","+t.a+")"}function s(t){return Array.isArray(t)&&(t={r:t[0],g:t[1],b:t[2],a:t[3]}),1==t.a||void 0===t.a?"hsl("+t.h+","+t.s+"%,"+t.l+"%)":"hsla("+t.h+","+t.s+"%,"+t.l+"%,"+t.a+")"}var r={format:t,rgb:n,hsl:s,hex:e};function o(t,e){return e=void 0===e?1:e,Math.round(t*e)/e}function h(t){return t*Math.PI/180}function a(t){var e=180*t/Math.PI;return e<0&&(e=360+e),e}function l(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)+e*Math.cos(h(t))}function c(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)+e*Math.sin(h(t))}function u(t,e){return a(Math.atan2(e,t))}var f={round:o,radianToDegree:a,degreeToRadian:h,getXInCircle:l,getYInCircle:c,caculateAngle:u},p={aliceblue:"rgb(240, 248, 255)",antiquewhite:"rgb(250, 235, 215)",aqua:"rgb(0, 255, 255)",aquamarine:"rgb(127, 255, 212)",azure:"rgb(240, 255, 255)",beige:"rgb(245, 245, 220)",bisque:"rgb(255, 228, 196)",black:"rgb(0, 0, 0)",blanchedalmond:"rgb(255, 235, 205)",blue:"rgb(0, 0, 255)",blueviolet:"rgb(138, 43, 226)",brown:"rgb(165, 42, 42)",burlywood:"rgb(222, 184, 135)",cadetblue:"rgb(95, 158, 160)",chartreuse:"rgb(127, 255, 0)",chocolate:"rgb(210, 105, 30)",coral:"rgb(255, 127, 80)",cornflowerblue:"rgb(100, 149, 237)",cornsilk:"rgb(255, 248, 220)",crimson:"rgb(237, 20, 61)",cyan:"rgb(0, 255, 255)",darkblue:"rgb(0, 0, 139)",darkcyan:"rgb(0, 139, 139)",darkgoldenrod:"rgb(184, 134, 11)",darkgray:"rgb(169, 169, 169)",darkgrey:"rgb(169, 169, 169)",darkgreen:"rgb(0, 100, 0)",darkkhaki:"rgb(189, 183, 107)",darkmagenta:"rgb(139, 0, 139)",darkolivegreen:"rgb(85, 107, 47)",darkorange:"rgb(255, 140, 0)",darkorchid:"rgb(153, 50, 204)",darkred:"rgb(139, 0, 0)",darksalmon:"rgb(233, 150, 122)",darkseagreen:"rgb(143, 188, 143)",darkslateblue:"rgb(72, 61, 139)",darkslategray:"rgb(47, 79, 79)",darkslategrey:"rgb(47, 79, 79)",darkturquoise:"rgb(0, 206, 209)",darkviolet:"rgb(148, 0, 211)",deeppink:"rgb(255, 20, 147)",deepskyblue:"rgb(0, 191, 255)",dimgray:"rgb(105, 105, 105)",dimgrey:"rgb(105, 105, 105)",dodgerblue:"rgb(30, 144, 255)",firebrick:"rgb(178, 34, 34)",floralwhite:"rgb(255, 250, 240)",forestgreen:"rgb(34, 139, 34)",fuchsia:"rgb(255, 0, 255)",gainsboro:"rgb(220, 220, 220)",ghostwhite:"rgb(248, 248, 255)",gold:"rgb(255, 215, 0)",goldenrod:"rgb(218, 165, 32)",gray:"rgb(128, 128, 128)",grey:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",greenyellow:"rgb(173, 255, 47)",honeydew:"rgb(240, 255, 240)",hotpink:"rgb(255, 105, 180)",indianred:"rgb(205, 92, 92)",indigo:"rgb(75, 0, 130)",ivory:"rgb(255, 255, 240)",khaki:"rgb(240, 230, 140)",lavender:"rgb(230, 230, 250)",lavenderblush:"rgb(255, 240, 245)",lawngreen:"rgb(124, 252, 0)",lemonchiffon:"rgb(255, 250, 205)",lightblue:"rgb(173, 216, 230)",lightcoral:"rgb(240, 128, 128)",lightcyan:"rgb(224, 255, 255)",lightgoldenrodyellow:"rgb(250, 250, 210)",lightgreen:"rgb(144, 238, 144)",lightgray:"rgb(211, 211, 211)",lightgrey:"rgb(211, 211, 211)",lightpink:"rgb(255, 182, 193)",lightsalmon:"rgb(255, 160, 122)",lightseagreen:"rgb(32, 178, 170)",lightskyblue:"rgb(135, 206, 250)",lightslategray:"rgb(119, 136, 153)",lightslategrey:"rgb(119, 136, 153)",lightsteelblue:"rgb(176, 196, 222)",lightyellow:"rgb(255, 255, 224)",lime:"rgb(0, 255, 0)",limegreen:"rgb(50, 205, 50)",linen:"rgb(250, 240, 230)",magenta:"rgb(255, 0, 255)",maroon:"rgb(128, 0, 0)",mediumaquamarine:"rgb(102, 205, 170)",mediumblue:"rgb(0, 0, 205)",mediumorchid:"rgb(186, 85, 211)",mediumpurple:"rgb(147, 112, 219)",mediumseagreen:"rgb(60, 179, 113)",mediumslateblue:"rgb(123, 104, 238)",mediumspringgreen:"rgb(0, 250, 154)",mediumturquoise:"rgb(72, 209, 204)",mediumvioletred:"rgb(199, 21, 133)",midnightblue:"rgb(25, 25, 112)",mintcream:"rgb(245, 255, 250)",mistyrose:"rgb(255, 228, 225)",moccasin:"rgb(255, 228, 181)",navajowhite:"rgb(255, 222, 173)",navy:"rgb(0, 0, 128)",oldlace:"rgb(253, 245, 230)",olive:"rgb(128, 128, 0)",olivedrab:"rgb(107, 142, 35)",orange:"rgb(255, 165, 0)",orangered:"rgb(255, 69, 0)",orchid:"rgb(218, 112, 214)",palegoldenrod:"rgb(238, 232, 170)",palegreen:"rgb(152, 251, 152)",paleturquoise:"rgb(175, 238, 238)",palevioletred:"rgb(219, 112, 147)",papayawhip:"rgb(255, 239, 213)",peachpuff:"rgb(255, 218, 185)",peru:"rgb(205, 133, 63)",pink:"rgb(255, 192, 203)",plum:"rgb(221, 160, 221)",powderblue:"rgb(176, 224, 230)",purple:"rgb(128, 0, 128)",rebeccapurple:"rgb(102, 51, 153)",red:"rgb(255, 0, 0)",rosybrown:"rgb(188, 143, 143)",royalblue:"rgb(65, 105, 225)",saddlebrown:"rgb(139, 69, 19)",salmon:"rgb(250, 128, 114)",sandybrown:"rgb(244, 164, 96)",seagreen:"rgb(46, 139, 87)",seashell:"rgb(255, 245, 238)",sienna:"rgb(160, 82, 45)",silver:"rgb(192, 192, 192)",skyblue:"rgb(135, 206, 235)",slateblue:"rgb(106, 90, 205)",slategray:"rgb(112, 128, 144)",slategrey:"rgb(112, 128, 144)",snow:"rgb(255, 250, 250)",springgreen:"rgb(0, 255, 127)",steelblue:"rgb(70, 130, 180)",tan:"rgb(210, 180, 140)",teal:"rgb(0, 128, 128)",thistle:"rgb(216, 191, 216)",tomato:"rgb(255, 99, 71)",turquoise:"rgb(64, 224, 208)",violet:"rgb(238, 130, 238)",wheat:"rgb(245, 222, 179)",white:"rgb(255, 255, 255)",whitesmoke:"rgb(245, 245, 245)",yellow:"rgb(255, 255, 0)",yellowgreen:"rgb(154, 205, 50)",transparent:"rgba(0, 0, 0, 0)"};var _={isColorName:function(t){return!!p[t]},getColorByName:function(t){return p[t]}};function d(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function v(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.h,e=n.s,i=n.l}var s,r,h;if(t/=360,i/=100,0==(e/=100))s=r=h=i;else{var a=i<.5?i*(1+e):i+e-i*e,l=2*i-a;s=d(l,a,t+1/3),r=d(l,a,t),h=d(l,a,t-1/3)}return{r:o(255*s),g:o(255*r),b:o(255*h)}}var k={HUEtoRGB:d,HSLtoHSV:function(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.h,e=n.s,i=n.l}var s=v(t,e,i);return P(s.r,s.g,s.b)},HSLtoRGB:v},g=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},x=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),T=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},m=function t(e,i,n){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},E=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},C=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},b=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,s=!1,r=void 0;try{for(var o,h=t[Symbol.iterator]();!(n=(o=h.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){s=!0,r=t}finally{try{!n&&h.return&&h.return()}finally{if(s)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},A=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)},S=/(#(?:[\da-f]{8})|#(?:[\da-f]{3}){1,2}|rgb\((?:\s*\d{1,3},\s*){2}\d{1,3}\s*\)|rgba\((?:\s*\d{1,3},\s*){3}\d*\.?\d+\s*\)|hsl\(\s*\d{1,3}(?:,\s*\d{1,3}%){2}\s*\)|hsla\(\s*\d{1,3}(?:,\s*\d{1,3}%){2},\s*\d*\.?\d+\s*\)|([\w_\-]+))/gi;function $(t){var e=t.match(S),i=[];if(!e)return i;for(var n=0,s=e.length;n<s;n++)if(e[n].indexOf("#")>-1||e[n].indexOf("rgb")>-1||e[n].indexOf("hsl")>-1)i.push({color:e[n]});else{var r=_.getColorByName(e[n]);r&&i.push({color:e[n],nameColor:r})}var o={next:0};return i.forEach((function(e){var i=t.indexOf(e.color,o.next);e.startIndex=i,e.endIndex=i+e.color.length,o.next=e.endIndex})),i}function O(t){var e=$(t);return e.forEach((function(e,i){t=t.replace(e.color,"@"+i)})),{str:t,matches:e}}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",i=O(t);return i.str.split(e).map((function(t,e){return t=L(t),i.matches[e]&&(t=t.replace("@"+e,i.matches[e].color)),t}))}function N(t,e){return e.forEach((function(e,i){t=t.replace("@"+i,e.color)})),t}function L(t){return t.replace(/^\s+|\s+$/g,"")}function R(t){if("string"==typeof t){if(_.isColorName(t)&&(t=_.getColorByName(t)),t.indexOf("rgb(")>-1){for(var e=0,i=(s=t.replace("rgb(","").replace(")","").split(",")).length;e<i;e++)s[e]=parseInt(L(s[e]),10);var n={type:"rgb",r:s[0],g:s[1],b:s[2],a:1};return Object.assign(n,U(n))}if(t.indexOf("rgba(")>-1){for(e=0,i=(s=t.replace("rgba(","").replace(")","").split(",")).length;e<i;e++)s[e]=i-1==e?parseFloat(L(s[e])):parseInt(L(s[e]),10);return n={type:"rgb",r:s[0],g:s[1],b:s[2],a:s[3]},Object.assign(n,U(n))}if(t.indexOf("hsl(")>-1){for(e=0,i=(s=t.replace("hsl(","").replace(")","").split(",")).length;e<i;e++)s[e]=parseFloat(L(s[e]));return n={type:"hsl",h:s[0],s:s[1],l:s[2],a:1},Object.assign(n,v(n))}if(t.indexOf("hsla(")>-1){for(e=0,i=(s=t.replace("hsla(","").replace(")","").split(",")).length;e<i;e++)s[e]=i-1==e?parseFloat(L(s[e])):parseInt(L(s[e]),10);return n={type:"hsl",h:s[0],s:s[1],l:s[2],a:s[3]},Object.assign(n,v(n))}if(0==t.indexOf("#")){var s=[],r=1;if(3==(t=t.replace("#","")).length)for(e=0,i=t.length;e<i;e++){var o=t.substr(e,1);s.push(parseInt(o+o,16))}else if(8===t.length){for(e=0,i=t.length;e<i;e+=2)s.push(parseInt(t.substr(e,2),16));r=s.pop()/255}else for(e=0,i=t.length;e<i;e+=2)s.push(parseInt(t.substr(e,2),16));return n={type:"hex",r:s[0],g:s[1],b:s[2],a:r},Object.assign(n,U(n))}}else if("number"==typeof t){if(0<=t&&t<=16777215)return n={type:"hex",r:(16711680&t)>>16,g:(65280&t)>>8,b:(255&t)>>0,a:1},Object.assign(n,U(n));if(0<=t&&t<=4294967295)return n={type:"hex",r:(4278190080&t)>>24,g:(16711680&t)>>16,b:(65280&t)>>8,a:(255&t)/255},Object.assign(n,U(n))}return t}function w(t){"string"==typeof t&&(t=I(t));var e=(t=t.map((function(t){if("string"==typeof t){var e=O(t),i=L(e.str).split(" ");return i[1]?i[1].includes("%")?i[1]=parseFloat(i[1].replace(/%/,""))/100:i[1]=parseFloat(i[1]):i[1]="*",i[0]=N(i[0],e.matches),i}if(Array.isArray(t))return t[1]?"string"==typeof t[1]&&(t[1].includes("%")?t[1]=parseFloat(t[1].replace(/%/,""))/100:t[1]=+t[1]):t[1]="*",[].concat(A(t))}))).filter((function(t){return"*"===t[1]})).length;if(e>0){var i=(1-t.filter((function(t){return"*"!=t[1]&&1!=t[1]})).map((function(t){return t[1]})).reduce((function(t,e){return t+e}),0))/e;t.forEach((function(e,n){"*"==e[1]&&n>0&&(t.length-1==n||(e[1]=i))}))}return t}var D={matches:$,convertMatches:O,convertMatchesArray:I,reverseMatches:N,parse:R,parseGradient:w,trim:L,color_regexp:S,color_split:","};function P(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.r,e=n.g,i=n.b}var s=t/255,r=e/255,o=i/255,h=Math.max(s,r,o),a=h-Math.min(s,r,o),l=0;return 0==a?l=0:h==s?l=(r-o)/a%6*60:h==r?l=60*((o-s)/a+2):h==o&&(l=60*((s-r)/a+4)),l<0&&(l=360+l),{h:l,s:0==h?0:a/h,v:h}}function U(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.r,e=n.g,i=n.b}t/=255,e/=255,i/=255;var s,r,h=Math.max(t,e,i),a=Math.min(t,e,i),l=(h+a)/2;if(h==a)s=r=0;else{var c=h-a;switch(r=l>.5?c/(2-h-a):c/(h+a),h){case t:s=(e-i)/c+(e<i?6:0);break;case e:s=(i-t)/c+2;break;case i:s=(t-e)/c+4}s/=6}return{h:o(360*s),s:o(100*r),l:o(100*l)}}function M(t){return{r:t,g:t,b:t}}function B(t,e,i){return Math.ceil(.2126*t+.7152*e+.0722*i)}function F(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.r,e=n.g,i=n.b}var s=B(t,e,i);return{y:s,cr:.713*(t-s),cb:.564*(i-s)}}function H(t){return 100*(t>(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.04045)?Math.pow((t+.055)/1.055,2.4):t/12.92)}function G(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.r,e=n.g,i=n.b}var s=t/255,r=e/255,o=i/255;return{x:.4124*(s=H(s))+.3576*(r=H(r))+.1805*(o=H(o)),y:.2126*s+.7152*r+.0722*o,z:.0193*s+.1192*r+.9505*o}}var V={RGBtoCMYK:function(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.r,e=n.g,i=n.b}var s=t/255,r=e/255,o=i/255,h=1-Math.max(s,r,o);return{c:(1-s-h)/(1-h),m:(1-r-h)/(1-h),y:(1-o-h)/(1-h),k:h}},RGBtoGray:function(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.r,e=n.g,i=n.b}return M(F(t,e,i).y)},RGBtoHSL:U,RGBtoHSV:P,RGBtoLAB:function(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.r,e=n.g,i=n.b}return XYZtoLAB(G(t,e,i))},RGBtoSimpleGray:function(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.r,e=n.g,i=n.b}return M(Math.ceil((t+e+i)/3))},RGBtoXYZ:G,RGBtoYCrCb:F,c:function(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.r,e=n.g,i=n.b}return M((t+e+i)/3>90?0:255)},brightness:B,gray:M};var j={CMYKtoRGB:function(t,e,i,n){if(1==arguments.length){var s=arguments[0];t=s.c,e=s.m,i=s.y,n=s.k}return{r:255*(1-t)*(1-n),g:255*(1-e)*(1-n),b:255*(1-i)*(1-n)}}};function W(t){return Math.pow(t,3)>.008856?Math.pow(t,3):(t-16/116)/7.787}function Y(t){return t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t}function Q(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.x,e=n.y,i=n.z}var s=t/100,r=e/100,h=i/100,a=3.2406*s+-1.5372*r+-.4986*h,l=-.9689*s+1.8758*r+.0415*h,c=.0557*s+-.204*r+1.057*h;return a=Y(a),l=Y(l),c=Y(c),{r:o(255*a),g:o(255*l),b:o(255*c)}}function z(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.l,e=n.a,i=n.b}var s=(t+16)/116,r=e/500+s,o=s-i/200;return s=W(s),{x:95.047*(r=W(r)),y:100*s,z:108.883*(o=W(o))}}var X={XYZtoRGB:Q,LABtoRGB:function(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.l,e=n.a,i=n.b}return Q(z(t,e,i))},LABtoXYZ:z};function K(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.h,e=n.s,i=n.v}var s=t,r=i;s>=360&&(s=0);var h=e*r,a=h*(1-Math.abs(s/60%2-1)),l=r-h,c=[];return 0<=s&&s<60?c=[h,a,0]:60<=s&&s<120?c=[a,h,0]:120<=s&&s<180?c=[0,h,a]:180<=s&&s<240?c=[0,a,h]:240<=s&&s<300?c=[a,0,h]:300<=s&&s<360&&(c=[h,0,a]),{r:o(255*(c[0]+l)),g:o(255*(c[1]+l)),b:o(255*(c[2]+l))}}var q={HSVtoHSL:function(t,e,i){if(1==arguments.length){var n=arguments[0];t=n.h,e=n.s,i=n.v}var s=K(t,e,i);return U(s.r,s.g,s.b)},HSVtoRGB:K};var Z={YCrCbtoRGB:function(t,e,i,n){if(1==arguments.length){var s=arguments[0];t=s.y,e=s.cr,i=s.cb,n=(n=s.bit)||0}var r=t+1.402*(e-n),o=t-.344*(i-n)-.714*(e-n),h=t+1.772*(i-n);return{r:Math.ceil(r),g:Math.ceil(o),b:Math.ceil(h)}}};function J(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hex",r={r:o(e.r+(i.r-e.r)*n),g:o(e.g+(i.g-e.g)*n),b:o(e.b+(i.b-e.b)*n),a:o(e.a+(i.a-e.a)*n,100)};return t(r,r.a<1?"rgb":s)}function tt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(!t)return[];"string"==typeof t&&(t=I(t));for(var i=(t=t||[]).length,n=[],s=0;s<i-1;s++)for(var r=0;r<e;r++)n.push(et(t[s],t[s+1],r/e));return n}function et(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hex";return J(R(t),R(e),i,n)}function it(t){return t=R(t),(Math.round(299*t.r)+Math.round(587*t.g)+Math.round(114*t.b))/1e3}function nt(e){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,a=P(R(e)),l=(o-r)*h/n,c=[],u=1;u<=n;u++)a[i]=Math.abs((h-l*u)/h),c.push(t(K(a),s));return c}tt.parula=function(t){return tt(["#352a87","#0f5cdd","#00b5a6","#ffc337","#fdff00"],t)},tt.jet=function(t){return tt(["#00008f","#0020ff","#00ffff","#51ff77","#fdff00","#ff0000","#800000"],t)},tt.hsv=function(t){return tt(["#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#ff0000"],t)},tt.hot=function(t){return tt(["#0b0000","#ff0000","#ffff00","#ffffff"],t)},tt.pink=function(t){return tt(["#1e0000","#bd7b7b","#e7e5b2","#ffffff"],t)},tt.bone=function(t){return tt(["#000000","#4a4a68","#a6c6c6","#ffffff"],t)},tt.copper=function(t){return tt(["#000000","#3d2618","#9d623e","#ffa167","#ffc77f"],t)};var st={interpolateRGB:J,blend:et,mix:function(t,e){return et(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hex")},scale:tt,contrast:it,contrastColor:function(t){return it(t)>=128?"black":"white"},gradient:function(t){for(var e=[],i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:10)-((t=w(t)).length-1),n=i,s=1,r=t.length;s<r;s++){var o=t[s-1][0],h=t[s][0],a=1==s?t[s][1]:t[s][1]-t[s-1][1],l=s==t.length-1?n:Math.floor(a*i);e=e.concat(tt([o,h],l),[h]),n-=l}return e},scaleHSV:nt,scaleH:function(t){return nt(t,"h",arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:360,1)},scaleS:function(t){return nt(t,"s",arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,100)},scaleV:function(t){return nt(t,"v",arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,100)}};function rt(t,e){if(t.length!==e.length)return!1;for(var i=0,n=t.length;i<n;++i)if(t[i]!==e[i])return!1;return!0}var ot={euclidean:function(t,e){for(var i=0,n=0,s=t.length;n<s;n++)i+=Math.pow(e[n]-t[n],2);return Math.sqrt(i)},manhattan:function(t,e){for(var i=0,n=0,s=t.length;n<s;n++)i+=Math.abs(e[n]-t[n]);return i},max:function(t,e){for(var i=0,n=0,s=t.length;n<s;n++)i=Math.max(i,Math.abs(e[n]-t[n]));return i}},ht={linear:function(t,e){var i=[],n=Math.round(Math.random()*t),s=Math.floor(t/e);do{i.push(n),n=(n+s)%t}while(i.length<e);return i},shuffle:function(t,e){for(var i=[];i.length<e;){var n=Math.round(Math.random()*t);-1==i.indexOf(n)&&i.push(n)}return i}};function at(t,e,i){var n=1/0,s=0;return e.forEach((function(e,r){var o=i(t,e);o<n&&(n=o,s=r)})),s}function lt(t){if(!t.length)return[];for(var e=new Array(t[0].length),i=0,n=e.length;i<n;i++)e[i]=0;var s=0;for(n=t.length;s<n;s++)for(var r=t[s],o=s+1,h=0,a=r.length;h<a;h++)e[h]+=(r[h]-e[h])/o;return e=e.map((function(t){return Math.floor(t)})),e}function ct(t,e,i,n){for(var s=new Array(t),r=0;r<t;r++)s[r]=[];for(var o=0,h=e.length;o<h;o++){var a=e[o];s[at(a,i,n)].push(a)}return s}function ut(t,e,i,n,s,r){for(var o=0;o<t;o++){var h=i[o],a=n[o],l=new Array(a.length);s=!rt(l=h.length>0?lt(h):e[Math.floor(r()*e.length)],a),n[o]=l}return s}function ft(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"linear";e=e||Math.max(2,Math.ceil(Math.sqrt(t.length/2)));var r=i||"euclidean";"string"==typeof r&&(r=ot[r]);for(var o=0,h=function(){return(o=(9301*o+49297)%233280)/233280},a=function(t,e){return ht[arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear"](t.length,e).map((function(e){return t[e]}))}(t,e,s),l=!0,c=0;l&&(l=ut(e,t,ct(e,t,a,r),a,!1,h),++c%n!=0););return a}var pt={create:function(t,e){var i=document.createElement("canvas");return i.width=t||0,i.height=e||0,i},drawPixels:function(t){var e=this.create(t.width,t.height),i=e.getContext("2d"),n=i.getImageData(0,0,e.width,e.height);return n.data.set(t.pixels),i.putImageData(n,0,0),e},createHistogram:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{black:!0,red:!1,green:!1,blue:!1},r=this.create(t,e),o=r.getContext("2d");o.clearRect(0,0,t,e),o.fillStyle="white",o.fillRect(0,0,t,e),o.globalAlpha=.7;var h={black:!1};s.black?h.black=!1:h.black=!0,s.red?h.red=!1:h.red=!0,s.green?h.green=!1:h.green=!0,s.blue?h.blue=!1:h.blue=!0,Object.keys(i).forEach((function(n){if(!h[n]){var s=i[n],r=Math.max.apply(Math,s),a=t/s.length;o.fillStyle=n,s.forEach((function(t,i){var n=e*(t/r),s=i*a;o.fillRect(s,e-n,a,n)}))}})),"function"==typeof n&&n(r)},getHistogram:function(t){for(var e=new Array(256),i=new Array(256),n=new Array(256),s=new Array(256),r=0;r<256;r++)e[r]=0,i[r]=0,n[r]=0,s[r]=0;return function(t,e){!function(t,e){for(var i=0;i<t;i+=4)e(i)}(t.pixels.length,(function(i){e(t.pixels,i)}))}(t,(function(t,r){var o=Math.round(Ve.brightness(t[r],t[r+1],t[r+2]));e[o]++,i[t[r]]++,n[t[r+1]]++,s[t[r+2]]++})),{black:e,red:i,green:n,blue:s}},getBitmap:function(t,e){var i=this.drawPixels(t);return{pixels:i.getContext("2d").getImageData(e.x||0,e.y||0,e.width||i.width,e.height||i.height).data,width:e.width,height:e.height}},putBitmap:function(t,e,i){var n=this.drawPixels(t),s=this.drawPixels(e),r=n.getContext("2d");return r.drawImage(s,i.x,i.y),t.pixels=r.getImageData(0,0,t.width,t.height).data,t}},_t=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(this,t),this.isLoaded=!1,this.imageUrl=e,this.opt=i,this.initialize()}return x(t,[{key:"initialize",value:function(){this.canvas=this.createCanvas(),this.context=this.canvas.getContext("2d")}},{key:"createCanvas",value:function(){return document.createElement("canvas")}},{key:"load",value:function(t){this.loadImage(t)}},{key:"loadImage",value:function(t){var e=this,i=this.context;this.newImage=new Image;var n=this.newImage;n.onload=function(){var s=n.height/n.width;e.opt.canvasWidth&&e.opt.canvasHeight?(e.canvas.width=e.opt.canvasWidth,e.canvas.height=e.opt.canvasHeight):(e.canvas.width=e.opt.maxWidth?e.opt.maxWidth:n.width,e.canvas.height=e.canvas.width*s),i.drawImage(n,0,0,n.width,n.height,0,0,e.canvas.width,e.canvas.height),e.isLoaded=!0,t&&t()},this.getImageUrl((function(t){n.src=t}))}},{key:"load",value:function(t){var e=this;this.newImage=new Image;var i=this.newImage;i.onload=function(){e.isLoaded=!0,t&&t()},this.getImageUrl((function(t){i.src=t}))}},{key:"getImageUrl",value:function(t){if("string"==typeof this.imageUrl)return t(this.imageUrl);if(this.imageUrl instanceof Blob){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.readAsDataURL(this.imageUrl)}}},{key:"getRGBA",value:function(t,e,i,n){return[t,e,i,n]}},{key:"toArray",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),s=n.width,r=n.height;t||(t=function(t,e){e(t)}),t({pixels:new Uint8ClampedArray(n.data),width:s,height:r},(function(t){var n=pt.drawPixels(t);"canvas"==i.returnTo?e(n):e(n.toDataURL(i.outputFormat||"image/png"))}),i)}},{key:"toHistogram",value:function(t){var e=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),i=e.width,n=e.height,s={pixels:new Uint8ClampedArray(e.data),width:i,height:n};return pt.getHistogram(s)}},{key:"toRGB",value:function(){for(var t=this.context.getImageData(0,0,this.canvas.width,this.canvas.height).data,e=[],i=0,n=t.length;i<n;i+=4)e[e.length]=[t[i+0],t[i+1],t[i+2],t[i+3]];return e}}]),t}(),dt={identity:function(){return[1,0,0,0,1,0,0,0,1]},stretching:function(t){return[t,0,0,0,1,0,0,0,1]},squeezing:function(t){return[t,0,0,0,1/t,0,0,0,1]},scale:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[t=t||0===t?t:1,0,0,0,e=e||0===e?e:1,0,0,0,1]},scaleX:function(t){return this.scale(t)},scaleY:function(t){return this.scale(1,t)},translate:function(t,e){return[1,0,t,0,1,e,0,0,1]},rotate:function(t){var e=this.radian(t);return[Math.cos(e),-Math.sin(e),0,Math.sin(e),Math.cos(e),0,0,0,1]},rotate90:function(){return[0,-1,0,1,0,0,0,0,1]},rotate180:function(){return[-1,0,0,0,-1,0,0,0,1]},rotate270:function(){return[0,1,0,-1,0,0,0,0,1]},radian:function(t){return t*Math.PI/180},skew:function(t,e){var i=this.radian(t),n=this.radian(e);return[1,Math.tan(i),0,Math.tan(n),1,0,0,0,1]},skewX:function(t){var e=this.radian(t);return[1,Math.tan(e),0,0,1,0,0,0,1]},skewY:function(t){var e=this.radian(t);return[1,0,0,Math.tan(e),1,0,0,0,1]},shear1:function(t){return[1,-Math.tan(this.radian(t)/2),0,0,1,0,0,0,1]},shear2:function(t){return[1,0,0,Math.sin(this.radian(t)),1,0,0,0,1]}},vt={CONSTANT:dt,radian:function(t){return dt.radian(t)},multiply:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]},identity:function(t){return this.multiply(dt.identity(),t)},translate:function(t,e,i){return this.multiply(dt.translate(t,e),i)},rotate:function(t,e){return this.multiply(dt.rotate(t),e)},shear1:function(t,e){return this.multiply(dt.shear1(t),e)},shear2:function(t,e){return this.multiply(dt.shear2(t),e)},rotateShear:function(t,e){var i=e;return i=this.shear1(t,i),i=this.shear2(t,i),this.shear1(t,i)}};function kt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center";return function(n,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Wt(n.pixels.length,n.width,n.height),h=n.width,a=n.height;"center"==e&&(e=Math.floor(h/2)),"center"==i&&(i=Math.floor(a/2));var l=vt.CONSTANT.translate(-e,-i),c=vt.CONSTANT.translate(e,i),u=vt.CONSTANT.shear1(t),f=vt.CONSTANT.shear2(t);te((function(t,e,i,s){var r=vt.multiply(l,[i,s,1]);r=vt.multiply(u,r).map(Math.round),r=vt.multiply(f,r).map(Math.round),r=vt.multiply(u,r).map(Math.round),r=vt.multiply(c,r);var o=b(r,2),p=o[0],_=o[1];p<0||_<0||p>h-1||_>a-1||ne(t,_*h+p<<2,n.pixels,e)}))(o,(function(){s(o)}),r)}}function gt(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=zt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:200);return qt("\n        // refer to Color.brightness \n        const v = ($C * Math.ceil($r * 0.2126 + $g * 0.7152 + $b * 0.0722) ) >= $scale ? 255 : 0;\n\n        if ($hasColor) {\n\n            if (v == 0) {\n                $r = 0 \n                $g = 0 \n                $b = 0\n            }\n            \n        } else {\n            const value = Math.round(v)\n            $r = value \n            $g = value \n            $b = value \n        }\n        \n    ",{$C:(t=zt(t))/100,$scale:i,$hasColor:e})}function xt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return se(Ft([1,2,1,2,4,2,1,2,1],1/16*((t=zt(t))/100)))}function Tt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return se(Ft([1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1],1/256*((t=zt(t))/100)))}function yt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t=zt(t),se([5,5,5,-3,0,-3,-3,-3,-3])}function mt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t=zt(t),se([5,-3,-3,5,0,-3,5,-3,-3])}function Et(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return se(Ft([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,24,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],(t=zt(t))/100))}function Ct(){return se(Ft([1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1],1/9))}function bt(){return se(Ft([1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1],1/9))}function At(){return se(Ft([1,0,0,0,1,0,0,0,1,0,1,0,0,1,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0,1,0,0,0,1],1/9))}function St(){return se([-1,-2,-1,0,0,0,1,2,1])}function $t(){return se([-1,0,1,-2,0,2,-1,0,1])}var Ot=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],It=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Nt(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function Lt(t,e,i,n){if(isNaN(n)||n<1)return t;n|=0;var s,r,o,h,a,l,c,u,f,p,_,d,v,k,g,x,T,y,m,E,C,b,A,S,$=t.pixels,O=t.width,I=t.height,N=n+n+1,L=O-1,R=I-1,w=n+1,D=w*(w+1)/2,P=new Nt,U=P;for(o=1;o<N;o++)if(U=U.next=new Nt,o==w)var M=U;U.next=P;var B=null,F=null;c=l=0;var H=Ot[n],G=It[n];for(r=0;r<I;r++){for(x=T=y=m=u=f=p=_=0,d=w*(E=$[l]),v=w*(C=$[l+1]),k=w*(b=$[l+2]),g=w*(A=$[l+3]),u+=D*E,f+=D*C,p+=D*b,_+=D*A,U=P,o=0;o<w;o++)U.r=E,U.g=C,U.b=b,U.a=A,U=U.next;for(o=1;o<w;o++)h=l+((L<o?L:o)<<2),u+=(U.r=E=$[h])*(S=w-o),f+=(U.g=C=$[h+1])*S,p+=(U.b=b=$[h+2])*S,_+=(U.a=A=$[h+3])*S,x+=E,T+=C,y+=b,m+=A,U=U.next;for(B=P,F=M,s=0;s<O;s++)$[l+3]=A=_*H>>G,0!=A?(A=255/A,$[l]=(u*H>>G)*A,$[l+1]=(f*H>>G)*A,$[l+2]=(p*H>>G)*A):$[l]=$[l+1]=$[l+2]=0,u-=d,f-=v,p-=k,_-=g,d-=B.r,v-=B.g,k-=B.b,g-=B.a,h=c+((h=s+n+1)<L?h:L)<<2,u+=x+=B.r=$[h],f+=T+=B.g=$[h+1],p+=y+=B.b=$[h+2],_+=m+=B.a=$[h+3],B=B.next,d+=E=F.r,v+=C=F.g,k+=b=F.b,g+=A=F.a,x-=E,T-=C,y-=b,m-=A,F=F.next,l+=4;c+=O}for(s=0;s<O;s++){for(T=y=m=x=f=p=_=u=0,d=w*(E=$[l=s<<2]),v=w*(C=$[l+1]),k=w*(b=$[l+2]),g=w*(A=$[l+3]),u+=D*E,f+=D*C,p+=D*b,_+=D*A,U=P,o=0;o<w;o++)U.r=E,U.g=C,U.b=b,U.a=A,U=U.next;for(a=O,o=1;o<=n;o++)l=a+s<<2,u+=(U.r=E=$[l])*(S=w-o),f+=(U.g=C=$[l+1])*S,p+=(U.b=b=$[l+2])*S,_+=(U.a=A=$[l+3])*S,x+=E,T+=C,y+=b,m+=A,U=U.next,o<R&&(a+=O);for(l=s,B=P,F=M,r=0;r<I;r++)$[3+(h=l<<2)]=A=_*H>>G,A>0?(A=255/A,$[h]=(u*H>>G)*A,$[h+1]=(f*H>>G)*A,$[h+2]=(p*H>>G)*A):$[h]=$[h+1]=$[h+2]=0,u-=d,f-=v,p-=k,_-=g,d-=B.r,v-=B.g,k-=B.b,g-=B.a,h=s+((h=r+w)<R?h:R)*O<<2,u+=x+=B.r=$[h],f+=T+=B.g=$[h+1],p+=y+=B.b=$[h+2],_+=m+=B.a=$[h+3],B=B.next,d+=E=F.r,v+=C=F.g,k+=b=F.b,g+=A=F.a,x-=E,T-=C,y-=b,m-=A,F=F.next,l+=O}return t}function Lt(t,e,i,n){if(isNaN(n)||n<1)return t;n|=0;var s,r,o,h,a,l,c,u,f,p,_,d,v,k,g,x,T,y,m,E,C=t.pixels,b=t.width,A=t.height,S=n+n+1,$=b-1,O=A-1,I=n+1,N=I*(I+1)/2,L=new Nt,R=L;for(o=1;o<S;o++)if(R=R.next=new Nt,o==I)var w=R;R.next=L;var D=null,P=null;c=l=0;var U=Ot[n],M=It[n];for(r=0;r<A;r++){for(k=g=x=u=f=p=0,_=I*(T=C[l]),d=I*(y=C[l+1]),v=I*(m=C[l+2]),u+=N*T,f+=N*y,p+=N*m,R=L,o=0;o<I;o++)R.r=T,R.g=y,R.b=m,R=R.next;for(o=1;o<I;o++)h=l+(($<o?$:o)<<2),u+=(R.r=T=C[h])*(E=I-o),f+=(R.g=y=C[h+1])*E,p+=(R.b=m=C[h+2])*E,k+=T,g+=y,x+=m,R=R.next;for(D=L,P=w,s=0;s<b;s++)C[l]=u*U>>M,C[l+1]=f*U>>M,C[l+2]=p*U>>M,u-=_,f-=d,p-=v,_-=D.r,d-=D.g,v-=D.b,h=c+((h=s+n+1)<$?h:$)<<2,u+=k+=D.r=C[h],f+=g+=D.g=C[h+1],p+=x+=D.b=C[h+2],D=D.next,_+=T=P.r,d+=y=P.g,v+=m=P.b,k-=T,g-=y,x-=m,P=P.next,l+=4;c+=b}for(s=0;s<b;s++){for(g=x=k=f=p=u=0,_=I*(T=C[l=s<<2]),d=I*(y=C[l+1]),v=I*(m=C[l+2]),u+=N*T,f+=N*y,p+=N*m,R=L,o=0;o<I;o++)R.r=T,R.g=y,R.b=m,R=R.next;for(a=b,o=1;o<=n;o++)l=a+s<<2,u+=(R.r=T=C[l])*(E=I-o),f+=(R.g=y=C[l+1])*E,p+=(R.b=m=C[l+2])*E,k+=T,g+=y,x+=m,R=R.next,o<O&&(a+=b);for(l=s,D=L,P=w,r=0;r<A;r++)C[h=l<<2]=u*U>>M,C[h+1]=f*U>>M,C[h+2]=p*U>>M,u-=_,f-=d,p-=v,_-=D.r,d-=D.g,v-=D.b,h=s+((h=r+I)<O?h:O)*b<<2,u+=k+=D.r=C[h],f+=g+=D.g=C[h+1],p+=x+=D.b=C[h+2],D=D.next,_+=T=P.r,d+=y=P.g,v+=m=P.b,k-=T,g-=y,x-=m,P=P.next,l+=b}return t}function Rt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=zt(t),function(i,n){n(function(t,e,i){return i?Lt(t,0,0,e):stackBlurCanvasRGB(t,0,0,e)}(i,t,e))}}function wt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;return se(Ft([1,4,6,4,1,4,16,24,16,4,6,24,-476,24,6,4,16,24,16,4,1,4,6,4,1],-1/(t=zt(t))))}var Dt,Pt=y({},{crop:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments[2],n=arguments[3],s=Wt(i*n*4,i,n);return function(r,o){for(var h=e,a=0;h<n;h++,a++)for(var l=t,c=0;l<i;l++,c++)s.pixels[a*i*c]=r.pixels[h*i*l];o(s)}},resize:function(t,e){return function(i,n){var s=pt.drawPixels(i),r=s.getContext("2d");s.width=t,s.height=e,n({pixels:new Uint8ClampedArray(r.getImageData(0,0,t,e).data),width:t,height:e})}},flipH:function(){return function(t,e){for(var i=t.width,n=t.height,s=i%2==1?Math.floor(i/2):i/2,r=0;r<n;r++)for(var o=0;o<s;o++){var h=r*i+o<<2,a=r*i+(i-1-o)<<2;Jt(t.pixels,h,a)}e(t)}},flipV:function(){return function(t,e){for(var i=t.width,n=t.height,s=n%2==1?Math.floor(n/2):n/2,r=0;r<s;r++)for(var o=0;o<i;o++){var h=r*i+o<<2,a=(n-1-r)*i+o<<2;Jt(t.pixels,h,a)}e(t)}},rotate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t=zt(t),t%=360,function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0==t)return e;if(90==t||270==t)var s=Wt(e.pixels.length,e.height,e.width);else{if(180!=t)return kt(t)(e,i,n);s=Wt(e.pixels.length,e.width,e.height)}te((function(i,n,r,o){if(90==t)var h=r*s.width+(s.width-1-o)<<2;else 270==t?h=(s.height-1-r)*s.width+o<<2:180==t&&(h=(s.height-1-o)*s.width+(s.width-1-r)<<2);ne(s.pixels,h,e.pixels,n)}))(e,(function(){i(s)}),n)}},rotateDegree:kt,histogram:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"gray",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[],n=0;n<e.length-1;n++)for(var s=e[n],r=e[n+1],o=r[0]-s[0],h=(r[1]-s[1])/o,a=0,l=s[0];a<o;a++,l++)i[l]=s[1]+a*h;return i[255]=255,qt("red"===t?function(){$r=i[$r]}:"green"===t?function(){$g=i[$g]}:"blue"===t?function(){$b=i[$b]}:function(){var t=Color.RGBtoYCrCb($r,$g,$b),e=Color.YCrCbtoRGB(clamp(i[clamp(t.y)]),t.cr,t.cb,0);$r=e.r,$g=e.g,$b=e.b},{},{$realPoints:i})},"rotate-degree":kt},{bitonal:function(t,e){return qt("\n        const thresholdColor = ( $r + $g + $b ) <= $threshold ? $darkColor : $lightColor\n\n        $r = thresholdColor.r\n        $g = thresholdColor.g \n        $b = thresholdColor.b \n    ",{$threshold:arguments.length>2&&void 0!==arguments[2]?arguments[2]:100},{$darkColor:Ve.parse(t),$lightColor:Ve.parse(e)})},brightness:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t=zt(t),qt("\n        $r += $C \n        $g += $C \n        $b += $C \n    ",{$C:Math.floor(t/100*255)})},brownie:function(){return qt("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a        \n    ",{$matrix:[.5997023498159715,.34553243048391263,-.2708298674538042,0,-.037703249837783157,.8609577587992641,.15059552388459913,0,.24113635128153335,-.07441037908422492,.44972182064877153,0,0,0,0,1]})},clip:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t=zt(t),qt("\n\n        $r = ($r > 255 - $C) ? 255 : 0\n        $g = ($g > 255 - $C) ? 255 : 0\n        $b = ($b > 255 - $C) ? 255 : 0\n\n    ",{$C:2.55*Math.abs(t)})},contrast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t=zt(t),qt("\n        $r *= $C\n        $g *= $C\n        $b *= $C\n    ",{$C:Math.max((128+t)/128,0)})},gamma:function(){return qt("\n        $r = Math.pow($r / 255, $C) * 255\n        $g = Math.pow($g / 255, $C) * 255\n        $b = Math.pow($b / 255, $C) * 255\n    ",{$C:zt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)})},gradient:function(){var t=[].concat(Array.prototype.slice.call(arguments));1===t.length&&"string"==typeof t[0]&&(t=Ve.convertMatchesArray(t[0]));var e=(t=t.map((function(t){return Ve.matches(t).length?{type:"param",value:t}:{type:"scale",value:t}}))).filter((function(t){return"scale"==t.type}))[0];e=e?+e.value:256,t=t.filter((function(t){return"param"==t.type})).map((function(t){return t.value})).join(",");var i=Ve.gradient(t,e).map((function(t){var e=Ve.parse(t);return{r:e.r,g:e.g,b:e.b,a:e.a}}));return qt("\n        const colorIndex = clamp(Math.ceil($r * 0.2126 + $g * 0.7152 + $b * 0.0722))\n        const newColorIndex = clamp(Math.floor(colorIndex * ($scale / 256)))\n        const color = $colors[newColorIndex]\n\n        $r = color.r \n        $g = color.g \n        $b = color.b \n        $a = clamp(Math.floor(color.a * 256))\n    ",{},{$colors:i,$scale:e})},grayscale:function(t){var e=(t=zt(t))/100;return e>1&&(e=1),qt("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a\n    ",{$matrix:[.2126+.7874*(1-e),.7152-.7152*(1-e),.0722-.0722*(1-e),0,.2126-.2126*(1-e),.7152+.2848*(1-e),.0722-.0722*(1-e),0,.2126-.2126*(1-e),.7152-.7152*(1-e),.0722+.9278*(1-e),0,0,0,0,1]})},hue:function(){return qt("\n        var hsv = Color.RGBtoHSV($r, $g, $b);\n\n        // 0 ~ 360 \n        var h = hsv.h;\n        h += Math.abs($C)\n        h = h % 360\n        hsv.h = h\n\n        var rgb = Color.HSVtoRGB(hsv);\n\n        $r = rgb.r\n        $g = rgb.g\n        $b = rgb.b\n    ",{$C:zt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:360)})},invert:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return qt("\n        $r = (255 - $r) * $C\n        $g = (255 - $g) * $C\n        $b = (255 - $b) * $C\n    ",{$C:(t=zt(t))/100})},kodachrome:function(){return qt("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a        \n    ",{$matrix:[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,0,0,0,1]})},matrix:function(){return qt("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a        \n    ",{$matrix:[arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,arguments.length>15&&void 0!==arguments[15]?arguments[15]:0]})},noise:function(){return qt("\n        const C = Math.abs($C) * 5\n        const min = -C\n        const max = C \n        const noiseValue = Math.round(min + (Math.random() * (max - min)))\n\n        $r += noiseValue\n        $g += noiseValue\n        $b += noiseValue\n    ",{$C:zt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)})},opacity:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return qt("\n        $a *= $C \n    ",{$C:(t=zt(t))/100})},polaroid:function(){return qt("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a        \n    ",{$matrix:[1.438,-.062,-.062,0,-.122,1.378,-.122,0,-.016,-.016,1.483,0,0,0,0,1]})},saturation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=(t=zt(t))/100,i=1-Math.abs(e);return qt("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a        \n    ",{$matrix:[i,0,0,0,0,i,0,0,0,0,i,0,0,0,0,i]})},sepia:function(){var t=zt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);return t>1&&(t=1),qt("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a        \n    ",{$matrix:[.393+.607*(1-t),.769-.769*(1-t),.189-.189*(1-t),0,.349-.349*(1-t),.686+.314*(1-t),.168-.168*(1-t),0,.272-.272*(1-t),.534-.534*(1-t),.131+.869*(1-t),0,0,0,0,1]})},shade:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return qt("\n        $r *= $redValue\n        $g *= $greenValue\n        $b *= $blueValue\n    ",{$redValue:zt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),$greenValue:zt(t),$blueValue:zt(e)})},shift:function(){return qt("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a        \n    ",{$matrix:[1.438,-.062,-.062,0,-.122,1.378,-.122,0,-.016,-.016,1.483,0,0,0,0,1]})},solarize:function(t,e,i){return qt("\n        $r = ($r < $redValue) ? 255 - $r: $r\n        $g = ($g < $greenValue) ? 255 - $g: $g\n        $b = ($b < $blueValue) ? 255 - $b: $b\n    ",{$redValue:zt(t),$greenValue:zt(e),$blueValue:zt(i)})},technicolor:function(){return qt("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a        \n    ",{$matrix:[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-.231103377548616,-.7501899197440212,1.847597816108189,0,0,0,0,1]})},threshold:function(){return gt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,!1)},"threshold-color":gt,tint:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return qt("\n\n        $r += (255 - $r) * $redTint\n        $g += (255 - $g) * $greenTint\n        $b += (255 - $b) * $blueTint\n\n    ",{$redTint:zt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),$greenTint:zt(t),$blueTint:zt(e)})}},{blur:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return se(ee(t=zt(t)))},emboss:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return se([-2*(t=zt(t)),-t,0,-t,1,t,0,t,2*t])},gaussianBlur:xt,"gaussian-blur":xt,gaussianBlur5x:Tt,"gaussian-blur-5x":Tt,grayscale2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return se(Ft([.3,.3,.3,0,0,.59,.59,.59,0,0,.11,.11,.11,0,0,0,0,0,0,0,0,0,0,0,0],(t=zt(t))/100))},normal:function(){return se([0,0,0,0,1,0,0,0,0])},kirschHorizontal:yt,"kirsch-horizontal":yt,kirschVertical:mt,"kirsch-vertical":mt,laplacian:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return se(Ft([-1,-1,-1,-1,8,-1,-1,-1,-1],(t=zt(t))/100))},laplacian5x:Et,"laplacian-5x":Et,motionBlur:Ct,"motion-blur":Ct,motionBlur2:bt,"motion-blur-2":bt,motionBlur3:At,"motion-blur-3":At,negative:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return se(Ft([-1,0,0,0,0,0,-1,0,0,0,0,0,-1,0,0,0,0,0,1,0,1,1,1,1,1],(t=zt(t))/100))},sepia2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return se(Ft([.393,.349,.272,0,0,.769,.686,.534,0,0,.189,.168,.131,0,0,0,0,0,0,0,0,0,0,0,0],(t=zt(t))/100))},sharpen:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return se(Ft([0,-1,0,-1,5,-1,0,-1,0],(t=zt(t))/100))},sobelHorizontal:St,"sobel-horizontal":St,sobelVertical:$t,"sobel-vertical":$t,stackBlur:Rt,"stack-blur":Rt,transparency:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return se(Ft([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,.3,0,0,0,0,0,1],(t=zt(t))/100))},unsharpMasking:wt,"unsharp-masking":wt},{kirsch:function(){return ae("kirsch-horizontal kirsch-vertical")},sobel:function(){return ae("sobel-horizontal sobel-vertical")},vintage:function(){return ae("brightness(15) saturation(-20) gamma(1.8)")}}),Ut=0,Mt=(T(Dt={partial:fe,multi:ce,merge:ue,weight:Ft,repeat:Ht,colorMatrix:function(t,e,i){var n=t[e],s=t[e+1],r=t[e+2],o=t[e+3];ie(t,e,i[0]*n+i[1]*s+i[2]*r+i[3]*o,i[4]*n+i[5]*s+i[6]*r+i[7]*o,i[8]*n+i[9]*s+i[10]*r+i[11]*o,i[12]*n+i[13]*s+i[14]*r+i[15]*o)},each:Vt,eachXY:jt,createRandomCount:function(){return[9,16,25,36,49,64,81,100].sort((function(t,e){return.5-Math.random()}))[0]},createRandRange:function(t,e,i){for(var n=[],s=1;s<=i;s++){var r=Math.random()*(e-t)+t,o=Math.floor(10*Math.random())%2==0?-1:1;n.push(o*r)}n.sort();var h=Math.floor(i>>1),a=n[h];return n[h]=n[0],n[0]=a,n},createBitmap:Wt,createBlurMatrix:ee,pack:function(t){return function(e,i){Vt(e.pixels.length,(function(i,n){t(e.pixels,i,n,e.pixels[i],e.pixels[i+1],e.pixels[i+2],e.pixels[i+3])}),(function(){i(e)}))}},packXY:te,pixel:qt,getBitmap:Yt,putBitmap:Qt,radian:function(t){return vt.CONSTANT.radian(t)},convolution:se,parseParamNumber:zt,filter:ae,clamp:he,fillColor:ie,fillPixelColor:ne},"multi",ce),T(Dt,"merge",ue),T(Dt,"matches",re),T(Dt,"parseFilter",oe),T(Dt,"partial",fe),Dt),Bt=Mt;function Ft(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.map((function(t){return t*e}))}function Ht(t,e){for(var i=new Array(e),n=0;n<e;n++)i[n]=t;return i}function Gt(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments[3],n=arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e4,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"full",o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:50,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=function(t){setTimeout(t,0)};function l(){for(var r=function(){var t=[].concat(A(Array(arguments.length>0&&void 0!==arguments[0]?arguments[0]:50))).map((function(t){return"cri = ri + i * s; if (cri >= mx) return {currentRunIndex: cri, i: null}; c(cri); i++;"})).join("\n");return new Function("ri","i","s","mx","c","\n            let cri = ri;\n            \n            "+t+"\n            \n            return {currentRunIndex: cri, i: i} \n        ")}(o),c=h,u={},f=0;f<s;){if(null==(u=r(h,f,e,t,i)).i){c=u.currentRunIndex;break}f=u.i,c=u.currentRunIndex}!function(i){i?h=i:h+=e,h>=t?n():a?a(l):l()}(c)}"requestAnimationFrame"==r&&(a=requestAnimationFrame,s=1e3),"full"==r&&(a=null,s=t),l()}function Vt(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Gt(t,0,4,(function(t){e(t,t>>2)}),(function(){i()}),n.functionDumpCount,n.frameTimer,n.loopCount)}function jt(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};Gt(t,0,4,(function(t){var n=t>>2;i(t,n%e,Math.floor(n/e))}),(function(){n()}),s.functionDumpCount,s.frameTimer,s.loopCount)}function Wt(t,e,i){return{pixels:new Uint8ClampedArray(t),width:e,height:i}}function Yt(t,e){return pt.getBitmap(t,e)}function Qt(t,e,i){return pt.putBitmap(t,e,i)}function zt(t){return"string"==typeof t&&(t=(t=t.replace(/deg/,"")).replace(/px/,"")),+t}var Xt=/(([\w_\-]+)(\(([^\)]*)\))?)+/gi;function Kt(t){return e={},i=[{callback:t,context:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},rootContext:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}}].map((function(t){var i=[];Object.keys(t.context).forEach((function(t,e){i[t]="n$"+Ut+++t+"$"})),Object.keys(t.rootContext).forEach((function(n,s){i[n]="r$"+Ut+++n+"$",e[i[n]]=t.rootContext[n]}));var n=Object.keys(t.context).filter((function(e){return"number"!=typeof t.context[e]&&"string"!=typeof t.context[e]&&(!Array.isArray(t.context[e])||"number"!=typeof t.context[e][0]&&"string"!=typeof t.context[e][0])})).map((function(e,n){return[i[e],JSON.stringify(t.context[e])].join(" = ")})),s=t.callback;return"function"==typeof t.callback&&((s=t.callback.toString().split("{")).shift(),(s=(s=s.join("{")).split("}")).pop(),s=s.join("}")),Object.keys(i).forEach((function(e){var n=i[e];"number"==typeof t.context[e]||"string"==typeof t.context[e]?s=s.replace(new RegExp("\\"+e,"g"),t.context[e]):!Array.isArray(t.context[e])||"number"!=typeof t.context[e][0]&&"string"!=typeof t.context[e][0]?s=s.replace(new RegExp("\\"+e,"g"),n):t.context[e].forEach((function(t,i){s=s.replace(new RegExp("\\"+e+"\\["+i+"\\]","g"),t)}))})),{preCallbackString:s,preContext:n}})),n=i.map((function(t,e){return t.preContext.length?"const "+t.preContext+";":""})).join("\n\n"),s=i.map((function(t){return t.preCallbackString})).join("\n\n"),(r=new Function("$pixels","$pixelIndex","$clamp","$Color"," \n    let $r = $pixels[$pixelIndex], $g = $pixels[$pixelIndex+1], $b = $pixels[$pixelIndex+2], $a = $pixels[$pixelIndex+3];\n\n    "+n+"\n\n    "+s+"\n    \n    $pixels[$pixelIndex] = $r\n    $pixels[$pixelIndex+1] = $g \n    $pixels[$pixelIndex+2] = $b   \n    $pixels[$pixelIndex+3] = $a   \n    ")).$preCallbackString=s,r.$preContext=n,r.rootContextObject=e,r;var e,i,n,s,r}function qt(t){var e=Kt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),i=function(t,e){};return i.userFunction=e,i}var Zt=[0,1,2,3];function Jt(t,e,i){Zt.forEach((function(n){var s=t[e+n];t[e+n]=t[i+n],t[i+n]=s}))}function te(t){return function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jt(e.pixels.length,e.width,(function(i,n,s){t(e.pixels,i,n,s)}),(function(){i(e)}),n)}}function ee(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,e=Math.pow(t,2);return Ht(1/e,e)}function ie(t,e,i,n,s,r){if(3==arguments.length){var o=arguments[2];i=o.r,n=o.g,s=o.b,r=o.a}"number"==typeof i&&(t[e]=i),"number"==typeof n&&(t[e+1]=n),"number"==typeof s&&(t[e+2]=s),"number"==typeof r&&(t[e+3]=r)}function ne(t,e,i,n){ie(t,e,i[n],i[n+1],i[n+2],i[n+3])}function se(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255;return e=t.map((function(t,e){return[]})),t.forEach((function(t,s){if(0!=t){var r=e[s];for(s=i;s<=n;s++)r[s]=t*s}})),e}(t);return function(n,s){var r=Math.round(Math.sqrt(t.length)),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.width+e,n=t.height+e;return{pixels:new Uint8ClampedArray(i*n*4),width:i,height:n}}(n,2*r);!function(t,e,i,n){for(var s=e.pixels.length/4,r=0,o=0,h=0,a=0,l=0,c=0,u=0;u<s;u++)h=u%e.width,o=n+(a=Math.floor(u/e.width)),(r=i+h)>t.width||o>t.height||(l=a*e.width+h<<2,c=o*t.width+r<<2,t.pixels[c]=e.pixels[l],t.pixels[c+1]=e.pixels[l+1],t.pixels[c+2]=e.pixels[l+2],t.pixels[c+3]=e.pixels[l+3])}(o,n,r,r);for(var h=Wt(o.pixels.length,o.width,o.height),a=Wt(n.pixels.length,n.width,n.height),l=function(t,e,i,n,s){var r=Math.round(Math.sqrt(t.length)),o=Math.floor(r/2),h=s?1:0,a="let r = 0, g = 0, b = 0, a = 0, scy = 0, scx =0, si = 0; ",l=[],c=[],u=[],f=[];t.forEach((function(t,e){var n=Math.floor(e/r)-o,s=e%r-o;0!=t&&(l.push("$t["+e+"][$sp[(($sy + ("+n+")) * "+i+" + ($sx + ("+s+"))) * 4]]"),c.push("$t["+e+"][$sp[(($sy + ("+n+")) * "+i+" + ($sx + ("+s+"))) * 4 + 1]]"),u.push("$t["+e+"][$sp[(($sy + ("+n+")) * "+i+" + ($sx + ("+s+"))) * 4 + 2]]"),f.push("$t["+e+"][$sp[(($sy + ("+n+")) * "+i+" + ($sx + ("+s+"))) * 4 + 3]]"))})),a+="r = "+l.join(" + ")+"; g = "+c.join(" + ")+"; b = "+u.join(" + ")+"; a = "+f.join(" + ")+";",a+="$dp[$di] = r; $dp[$di+1] = g;$dp[$di+2] = b;$dp[$di+3] = a + ("+h+")*(255-a); ";var p=new Function("$dp","$sp","$di","$sx","$sy","$t",a);return function(t,i,n,s,r){p(t,i,n,s,r,e)}}(t,i,o.width,o.height,e),c=n.pixels.length/4,u=0;u<c;u++){var f=u,p=f%n.width+r,_=Math.floor(f/n.width)+r;l(h.pixels,o.pixels,4*(_*o.width+p),p,_)}(function(t,e,i,n){for(var s=e.pixels.length>>2,r=0,o=0,h=0,a=0,l=0,c=0,u=0;u<s;u++)h=u%e.width,o=n+(a=Math.floor(u/e.width)),(r=i+h)>t.width||o>t.height||(l=o*t.width+r<<2,c=a*e.width+h<<2,e.pixels[c]=t.pixels[l],e.pixels[c+1]=t.pixels[l+1],e.pixels[c+2]=t.pixels[l+2],e.pixels[c+3]=t.pixels[l+3])})(h,a,r,r),s(a)}}function re(t){var e=Ve.convertMatches(t),i=e.str.match(Xt),n=[];if(!i)return n;n=i.map((function(t){return{filter:t,origin:Ve.reverseMatches(t,e.matches)}}));var s={next:0};return n.map((function(e){var i=t.indexOf(e.origin,s.next);return e.startIndex=i,e.endIndex=i+e.origin.length,e.arr=oe(e.origin),s.next=e.endIndex,e})).filter((function(t){return!!t.arr.length}))}function oe(t){var e=Ve.convertMatches(t),i=e.str.match(Xt);if(!i[0])return[];var n=i[0].split("("),s=n.shift(),r=[];return n.length&&(r=n.shift().split(")")[0].split(",").map((function(t){return Ve.reverseMatches(t,e.matches)}))),[s].concat(A(r)).map(Ve.trim)}function he(t){return Math.min(255,t)}function ae(t){return ue(re(t).map((function(t){return t.arr})))}function le(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[],i=[],n=0,s=t.length;n<s;n++){var r=t[n];r.userFunction?i.push(r):(i.length&&e.push([].concat(A(i))),e.push(r),i=[])}return i.length&&e.push([].concat(A(i))),e.forEach((function(t,i){var n;Array.isArray(t)&&(e[i]=(n=function(t){var e=t.map((function(t){return" \n            "+t.userFunction.$preContext+"\n\n            "+t.userFunction.$preCallbackString+"\n\n            $r = clamp($r); $g = clamp($g); $b = clamp($b); $a = clamp($a);\n        "})).join("\n\n"),i={clamp:he,Color:Ve};t.forEach((function(t){Object.assign(i,t.userFunction.rootContextObject)}));var n="const "+Object.keys(i).map((function(t){return" "+t+" = $rc."+t+" "})).join(","),s=new Function("$p","$pi","$rc"," \n    let $r = $p[$pi], $g = $p[$pi+1], $b = $p[$pi+2], $a = $p[$pi+3];\n    \n    "+n+"\n\n    "+e+"\n    \n    $p[$pi] = $r; $p[$pi+1] = $g; $p[$pi+2] = $b; $p[$pi+3] = $a;\n    ");return function(t,e){s(t,e,i)}}(t),function(t,e){for(var i=0,s=t.pixels.length;i<s;i+=4)n(t.pixels,i);e(t)}))})),e}function ce(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];e=e.map((function(t){return function(t){if("function"==typeof t)return t;"string"==typeof t&&(t=[t]);var e=(t=t.slice(0)).shift();if("function"==typeof e)return e;var i=t,n=Pt[e]||Bt[e];if(!n)throw new Error(e+" is not filter. please check filter name.");return n.apply(n,i)}(t)})).filter((function(t){return t}));var n=(e=le(e)).length;return function(t,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t,o=0;function h(){e[o].call(null,r,(function(t){r=t,++o>=n?i(r):h()}),s)}h()}}function ue(t){return ce.apply(void 0,A(t))}function fe(t){for(var e=null,i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return e=1==n.length&&"string"==typeof n[0]?ae(n[0]):ue(n),function(i,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Yt(i,t),(function(e){n(Qt(i,e,t))}),s)}}function pe(t){return"string"==typeof t&&(t=(t=t.replace(/deg/,"")).replace(/px/,"")),+t}function _e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.map((function(t){return t*e}))}var de=0;function ve(t){return[].concat(Array.prototype.slice.call(arguments))}function ke(t){return{type:"convolution",length:t.length,content:t}}function ge(t,e){return"\n        if (u_filterIndex == "+e+".0) {\n            "+t+"\n        }\n    "}function xe(t,e){return{type:"shader",index:de,options:e,content:ge(t,de++)}}function Te(t){return"\n    \n    if (u_kernelSelect == "+t+".0) {\n        vec4 colorSum = "+function(t){var e=Math.sqrt(t),i=Math.floor(e/2);return[].concat(A(Array(t))).map((function(n,s){var r=Math.floor(s/e)-i;return"texture(u_image, v_texCoord + onePixel * vec2("+(s%e-i)+", "+r+")) * u_kernel"+t+"["+s+"]"})).join(" + \n")}(t)+"; \n\n        outColor = vec4((colorSum / u_kernel"+t+"Weight).rgb, 1);\n        \n    }\n    "}function ye(t){return"vec4("+(t=[t.r/255,t.g/255,t.b/255,t.a||0].map(me))+")"}function me(t){return t==Math.floor(t)?t+".0":t}function Ee(){return ke(_e([1,2,1,2,4,2,1,2,1],pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*(1/16)))}function Ce(){return ke([1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1])}function be(){return ke([5,5,5,-3,0,-3,-3,-3,-3])}function Ae(){return ke([5,-3,-3,5,0,-3,5,-3,-3])}function Se(){return ke([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,24,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}function $e(){return ke([1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1])}function Oe(){return ke([1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1])}function Ie(){return ke([1,0,0,0,1,0,0,0,1,0,1,0,0,1,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0,1,0,0,0,1])}function Ne(){return ke([-1,-2,-1,0,0,0,1,2,1])}function Le(){return ke([-1,0,1,-2,0,2,-1,0,1])}function Re(){return ke(_e([1,4,6,4,1,4,16,24,16,4,6,24,-476,24,6,4,16,24,16,4,1,4,6,4,1],-1/256))}function we(){var t=[arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,arguments.length>15&&void 0!==arguments[15]?arguments[15]:0].map(me);return xe("\n\n        outColor = vec4(\n            "+t[0]+" * pixelColor.r + "+t[1]+" * pixelColor.g + "+t[2]+" * pixelColor.b + "+t[3]+" * pixelColor.a,\n            "+t[4]+" * pixelColor.r + "+t[5]+" * pixelColor.g + "+t[6]+" * pixelColor.b + "+t[7]+" * pixelColor.a,\n            "+t[8]+" * pixelColor.r + "+t[9]+" * pixelColor.g + "+t[10]+" * pixelColor.b + "+t[11]+" * pixelColor.a,\n            "+t[12]+" * pixelColor.r + "+t[13]+" * pixelColor.g + "+t[14]+" * pixelColor.b + "+t[15]+" * pixelColor.a\n        ); \n    ")}function De(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return xe("\n        float c = ( (pixelColor.r * 0.2126 + pixelColor.g * 0.7152 + pixelColor.b * 0.0722) ) >= "+(t=me(pe(t)))+" ? 1.0 : 0.0;\n\n        outColor = vec4(c, c, c, pixelColor.a);\n    ")}var Pe=y({},{blur:function(){return ke([1,1,1,1,1,1,1,1,1])},normal:function(){return ke([0,0,0,0,1,0,0,0,0])},emboss:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return ke([-2*(t=pe(t)),-t,0,-t,1,t,0,t,2*t])},gaussianBlur:Ee,"gaussian-blur":Ee,gaussianBlur5x:Ce,"gaussian-blur-5x":Ce,grayscale2:function(){return ke([.3,.3,.3,0,0,.59,.59,.59,0,0,.11,.11,.11,0,0,0,0,0,0,0,0,0,0,0,0])},kirschHorizontal:be,"kirsch-horizontal":be,kirschVertical:Ae,"kirsch-vertical":Ae,laplacian:function(){return ke([-1,-1,-1,-1,8,-1,-1,-1,-1])},laplacian5x:Se,"laplacian-5x":Se,motionBlur:$e,"motion-blur":$e,motionBlur2:Oe,"motion-blur-2":Oe,motionBlur3:Ie,"motion-blur-3":Ie,negative:function(){return ke([-1,0,0,0,0,0,-1,0,0,0,0,0,-1,0,0,0,0,0,1,0,1,1,1,1,1])},sepia2:function(){return ke([.393,.349,.272,0,0,.769,.686,.534,0,0,.189,.168,.131,0,0,0,0,0,0,0,0,0,0,0,0])},sharpen:function(){return ke([0,-1,0,-1,5,-1,0,-1,0])},sobelHorizontal:Ne,"sobel-horizontal":Ne,sobelVertical:Le,"sobel-vertical":Le,transparency:function(){return ke([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,.3,0,0,0,0,0,1])},unsharpMasking:Re,"unsharp-masking":Re},{bitonal:function(t,e){var i=me(arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5),n=ye(Ve.parse(t));return xe("\n        if ((pixelColor.r + pixelColor.g + pixelColor.b) > "+i+") {\n            outColor = vec4("+ye(Ve.parse(e))+".rgb, pixelColor.a);\n        } else {\n            outColor = vec4("+n+".rgb, pixelColor.a);\n        }\n    ")},brightness:function(){return xe("\n        outColor = pixelColor + ("+me(pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1))+");\n    ")},brownie:function(){return we(.5997023498159715,.34553243048391263,-.2708298674538042,0,-.037703249837783157,.8609577587992641,.15059552388459913,0,.24113635128153335,-.07441037908422492,.44972182064877153,0,0,0,0,1)},clip:function(){var t=me(pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0));return xe("\n        outColor = vec4(\n            (pixelColor.r > 1.0 - "+t+") ? 1.0 : 0.0,\n            (pixelColor.g > 1.0 - "+t+") ? 1.0 : 0.0,\n            (pixelColor.b > 1.0 - "+t+") ? 1.0 : 0.0,\n            pixelColor.a \n        );\n    ")},chaos:function(){return xe("\n        vec2 st = pixelColor.st;\n        st *= "+me(pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:10))+";\n        \n        vec2 ipos = floor(st);  // get the integer coords\n\n        vec3 color = vec3(random( ipos ));\n\n        outColor = vec4(color, pixelColor.a);\n    ")},contrast:function(){return xe("\n        outColor = pixelColor * "+me(pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1))+";\n    ")},gamma:function(){var t=me(pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1));return xe("\n        outColor = vec4(pow(pixelColor.r, "+t+"), pow(pixelColor.g, "+t+"), pow(pixelColor.b, "+t+"), pixelColor.a );\n    ")},gradient:function(){var t=[].concat(Array.prototype.slice.call(arguments));1===t.length&&"string"==typeof t[0]&&(t=Ve.convertMatchesArray(t[0])),t=t.map((function(t){return t})).join(", ");var e=Ve.parseGradient(t);e[0][1]=0,e[e.length-1][1]=1,e=e.map((function(t){var e=Ve.parse(t[0]);return[{r:e.r,g:e.g,b:e.b,a:e.a},t[1]]}));for(var i=[],n=0,s=e.length;n<s-1;n++){var r=e[n],o=e[n+1],h=ye(r[0]),a=ye(o[0]),l=me(r[1]),c=me(o[1]);i.push("\n            if ("+l+" <= rate && rate < "+c+") {\n                outColor = mix("+h+", "+a+", (rate - "+l+")/("+c+" - "+l+"));\n            }\n        ")}return xe("\n        float rate = (pixelColor.r * 0.2126 + pixelColor.g * 0.7152 + pixelColor.b * 0.0722); \n\n        "+i.join("\n")+"        \n    ")},grayscale:function(){var t=pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);return t>1&&(t=1),we(.2126+.7874*(1-t),.7152-.7152*(1-t),.0722-.0722*(1-t),0,.2126-.2126*(1-t),.7152+.2848*(1-t),.0722-.0722*(1-t),0,.2126-.2126*(1-t),.7152-.7152*(1-t),.0722+.9278*(1-t),0,0,0,0,1)},hue:function(){return xe("\n        vec3 hsv = rgb2hsv(pixelColor.rgb);\n        hsv.x += "+me(pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1))+";\n        outColor = vec4(hsv2rgb(hsv).rgb, pixelColor.a);\n    ")},invert:function(){var t=me(pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1));return xe("\n        outColor = vec4(\n            (1.0 - pixelColor.r) * "+t+",\n            (1.0 - pixelColor.g) * "+t+",\n            (1.0 - pixelColor.b) * "+t+",\n            pixelColor.a\n        );\n    ")},kodachrome:function(){return we(1.1285582396593525,-.3967382283601348,-.03992559172921793,0,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,0,0,0,1)},matrix:we,noise:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Math.abs(pe(t)),i=me(-e);return xe("\n        float rnd = "+i+" + random( pixelColor.st ) * ("+me(e)+" - "+i+");\n\n        outColor = vec4(pixelColor.rgb + rnd, 1.0);\n    ")},opacity:function(){return xe("\n        outColor = vec4(pixelColor.rgb, pixelColor.a * "+me(pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1))+");\n    ")},polaroid:function(){return we(1.438,-.062,-.062,0,-.122,1.378,-.122,0,-.016,-.016,1.483,0,0,0,0,1)},saturation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=1-Math.abs(pe(t));return we(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,e)},sepia:function(){var t=pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);return t>1&&(t=1),we(.393+.607*(1-t),.769-.769*(1-t),.189-.189*(1-t),0,.349-.349*(1-t),.686+.314*(1-t),.168-.168*(1-t),0,.272-.272*(1-t),.534-.534*(1-t),.131+.869*(1-t),0,0,0,0,1)},shade:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return xe("\n        outColor = vec4(\n            pixelColor.r * "+me(pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)/255)+",\n            pixelColor.g * "+me(pe(t)/255)+",\n            pixelColor.b * "+me(pe(e)/255)+",\n            pixelColor.a\n        );\n    ")},shift:function(){return we(1.438,-.062,-.062,0,-.122,1.378,-.122,0,-.016,-.016,1.483,0,0,0,0,1)},solarize:function(t,e,i){return xe("\n        outColor = vec4(\n            (pixelColor.r < "+me(pe(t))+") ? 1.0 - pixelColor.r: pixelColor.r,\n            (pixelColor.g < "+me(pe(e))+") ? 1.0 - pixelColor.g: pixelColor.g,\n            (pixelColor.b < "+me(pe(i))+") ? 1.0 - pixelColor.b: pixelColor.b,\n            pixelColor.a\n        );\n    ")},technicolor:function(){return we(1.9125277891456083,-.8545344976951645,-.09155508482755585,0,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-.231103377548616,-.7501899197440212,1.847597816108189,0,0,0,0,1)},threshold:function(){return De(arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,!1)},"threshold-color":De,tint:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return xe("\n        outColor = vec4(\n            pixelColor.r += (1 - pixelColor.r) * "+pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+",\n            pixelColor.g += (1 - pixelColor.g) * "+pe(t)+",\n            pixelColor.b += (1 - pixelColor.b) * "+pe(e)+",\n            pixelColor.a\n        );\n    ")}},{kirsch:function(){return ve("kirsch-horizontal kirsch-vertical")},sobel:function(){return ve("sobel-horizontal sobel-vertical")},vintage:function(){return ve("brightness(0.15) saturation(-0.2) gamma(1.8)")}}),Ue=0,Me=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:"400px",height:"300px"};g(this,t),this.img=e.img,this.width=parseFloat(this.img.width||e.width||"400px"),this.height=parseFloat(this.img.height||e.height||"300px"),this.init()}return x(t,[{key:"resize",value:function(){this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.viewport()}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=this.gl;s.clearColor(t,e,i,n),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)}},{key:"viewport",value:function(t,e,i,n){var s=this.gl;s.viewport(t||0,e||0,i||s.canvas.width,n||s.canvas.height)}},{key:"initCanvas",value:function(t,e){if(this.canvas=document.createElement("canvas"),this.gl=this.canvas.getContext("webgl2"),!this.gl)throw new Error("you need webgl2 support");this.program=this.createProgram(t,e),this.resize(),this.initBuffer()}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"TRIANGLES",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,n=this.gl;n.drawArrays(n[t],e,i)}},{key:"triangles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;this.draw("TRIANGLES",t,e)}},{key:"uniform2f",value:function(){for(var t,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=i.shift();(t=this.gl).uniform2f.apply(t,[this.locations[s]].concat(i))}},{key:"uniform1f",value:function(){for(var t,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=i.shift();(t=this.gl).uniform1f.apply(t,[this.locations[s]].concat(i))}},{key:"uniform1fv",value:function(){for(var t,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=i.shift();(t=this.gl).uniform1fv.apply(t,[this.locations[s]].concat(i))}},{key:"uniform1i",value:function(){for(var t,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=i.shift();(t=this.gl).uniform1i.apply(t,[this.locations[s]].concat(i))}},{key:"useProgram",value:function(){this.gl.useProgram(this.program)}},{key:"bindBuffer",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"STATIC_DRAW",n=this.gl;this.buffers[t]||(this.buffers[t]=n.createBuffer()),n.bindBuffer(n.ARRAY_BUFFER,this.buffers[t]),e&&n.bufferData(n.ARRAY_BUFFER,new Float32Array(e),n[i])}},{key:"enable",value:function(t){this.gl.enableVertexAttribArray(this.locations[t])}},{key:"location",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"attribute";"attribute"===e?this.locations[t]=this.gl.getAttribLocation(this.program,t):"uniform"===e&&(this.locations[t]=this.gl.getUniformLocation(this.program,t))}},{key:"a",value:function(t){return this.location(t)}},{key:"u",value:function(t){return this.location(t,"uniform")}},{key:"pointer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FLOAT",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=this.gl;o.vertexAttribPointer(this.locations[t],i,o[e],n,s,r)}},{key:"bufferData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.gl;e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW)}},{key:"isPowerOf2",value:function(t){return 0==(t&t-1)}},{key:"bindTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"RGBA",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"RGBA",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"UNSIGNED_BYTE",o=this.gl;1!=arguments.length?(this.textures[t]||(this.textures[t]=o.createTexture()),this.textureIndex[t]=Ue++,o.bindTexture(o.TEXTURE_2D,this.textures[t]),this.setTextureParameter(),o.texImage2D(o.TEXTURE_2D,i,o[n],o[s],o[r],e.newImage||e)):o.bindTexture(o.TEXTURE_2D,this.textures[t])}},{key:"bindColorTexture",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:256,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"RGBA",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"RGBA",h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"UNSIGNED_BYTE",a=this.gl;this.textures[t]||(this.textures[t]=a.createTexture()),this.textureIndex[t]=Ue++,a.bindTexture(a.TEXTURE_2D,this.textures[t]),this.setTextureParameter(),a.texImage2D(a.TEXTURE_2D,s,a[r],i,n,0,a[o],a[h],new Uint8Array(e))}},{key:"bindEmptyTexture",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"RGBA",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"RGBA",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"UNSIGNED_BYTE",h=this.gl;this.textures[t]||(this.textures[t]=h.createTexture()),this.textureIndex[t]=Ue++,h.bindTexture(h.TEXTURE_2D,this.textures[t]),this.setTextureParameter();h.texImage2D(h.TEXTURE_2D,n,h[s],e,i,0,h[r],h[o],null)}},{key:"setTextureParameter",value:function(){var t=this.gl;t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)}},{key:"bindFrameBufferWithTexture",value:function(t,e,i,n){this.bindEmptyTexture(e,i,n),this.bindFrameBuffer(t,e)}},{key:"enumToString",value:function(t){var e=this.gl;if(0===t)return"NONE";for(var i in e)if(e[i]===t)return i;return"0x"+t.toString(16)}},{key:"bindFrameBuffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.gl;if(1!==arguments.length){this.framebuffers[t]||(this.framebuffers[t]=i.createFramebuffer()),i.bindFramebuffer(i.FRAMEBUFFER,this.framebuffers[t]);var n=i.COLOR_ATTACHMENT0;i.framebufferTexture2D(i.FRAMEBUFFER,n,i.TEXTURE_2D,this.textures[e],0),i.checkFramebufferStatus(i.FRAMEBUFFER),i.FRAMEBUFFER_COMPLETE}else i.bindFramebuffer(i.FRAMEBUFFER,null==t?null:this.framebuffers[t])}},{key:"bindVA",value:function(){var t=this.gl;this.vao||(this.vao=t.createVertexArray()),t.bindVertexArray(this.vao)}},{key:"bindAttr",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"STATIC_DRAW",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;this.bindBuffer(t,e,i),this.enable(t),this.pointer(t,"FLOAT",n)}},{key:"initBuffer",value:function(){var t=this.canvas,e=t.width,i=t.height;this.a("a_position"),this.a("a_texCoord"),this.u("u_resolution"),this.u("u_image"),this.u("u_flipY"),this.u("u_kernelSelect"),this.u("u_filterIndex"),this.u("u_kernel9[0]"),this.u("u_kernel9Weight"),this.u("u_kernel25[0]"),this.u("u_kernel25Weight"),this.u("u_kernel49[0]"),this.u("u_kernel49Weight"),this.u("u_kernel81[0]"),this.u("u_kernel81Weight"),this.bindVA(),this.bindAttr("a_position",[0,0,e,0,0,i,0,i,e,0,e,i],"STATIC_DRAW",2),this.bindAttr("a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1],"STATIC_DRAW",2),this.bindTexture("u_image",this.img),this.bindFrameBufferWithTexture("frame_buffer_0","img_texture_0",e,i),this.bindFrameBufferWithTexture("frame_buffer_1","img_texture_1",e,i)}},{key:"activeTexture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.gl;e.activeTexture(e.TEXTURE0+t)}},{key:"drawFilter",value:function(){var t=this,e=this.gl;this.resize(),this.clear(),this.useProgram(),this.bindVA(),this.activeTexture(0),this.bindTexture("u_image"),this.uniform1i("u_image",0),this.uniform1f("u_flipY",1);var i=e.canvas,n=i.width,s=i.height;this.eachFilter((function(e,i){t.bindFrameBuffer("frame_buffer_"+i%2),t.uniform2f("u_resolution",n,s),t.viewport(0,0,n,s),t.effectFilter(e),t.bindTexture("img_texture_"+i%2)})),this.uniform1f("u_flipY",-1),this.bindFrameBuffer(null),this.uniform2f("u_resolution",n,s),this.viewport(0,0,n,s),this.clear(),this.effectFilter("normal")}},{key:"effectFilter",value:function(t){"string"==typeof t&&(t=(Pe[t]||Pe.normal).call(Pe)),"convolution"==t.type?(this.uniform1f("u_kernelSelect",t.length),this.uniform1f("u_filterIndex",-1),this.uniform1fv("u_kernel"+t.length+"[0]",t.content),this.uniform1f("u_kernel"+t.length+"Weight",this.computeKernelWeight(t.content))):(this.uniform1f("u_kernelSelect",-1),this.uniform1f("u_filterIndex",t.index)),this.triangles(0,6)}},{key:"computeKernelWeight",value:function(t){var e=t.reduce((function(t,e){return t+e}));return e<=0?1:e}},{key:"createProgram",value:function(t,e){var i=this.gl,n=i.createProgram();if(this.vertexShader=this.createVertexShader(t),this.fragmentShader=this.createFragmentShader(e),i.attachShader(n,this.vertexShader),i.attachShader(n,this.fragmentShader),i.linkProgram(n),i.getProgramParameter(n,i.LINK_STATUS))return n;console.error(i.getProgramInfoLog(n)),i.deleteProgram(n)}},{key:"createShader",value:function(t,e){var i=this.gl,n=i.createShader(t);if(i.shaderSource(n,e),i.compileShader(n),i.getShaderParameter(n,i.COMPILE_STATUS))return n;console.error(i.getShaderInfoLog(n)),i.deleteShader(n)}},{key:"createVertexShader",value:function(t){var e=this.gl;return this.createShader(e.VERTEX_SHADER,t)}},{key:"createFragmentShader",value:function(t){var e=this.gl;return this.createShader(e.FRAGMENT_SHADER,t)}},{key:"eachFilter",value:function(t){this.filterList.forEach(t)}},{key:"init",value:function(){this.locations={},this.buffers={},this.framebuffers={},this.textures={},this.textureIndex={},this.hasTexParameter={}}},{key:"destroy",value:function(){var t=this.gl;this.init(),t.deleteProgram(this.program)}},{key:"filter",value:function(t,e){var i,n,s;this.filterList=t,this.initCanvas("#version 300 es \n\n        in vec2 a_position;\n        in vec2 a_texCoord; \n\n        uniform vec2 u_resolution;\n        uniform float u_flipY;\n\n        out vec2 v_texCoord; \n\n        void main() {\n            vec2 zeroToOne = a_position / u_resolution;\n\n            vec2 zeroToTwo = zeroToOne * 2.0;\n\n            vec2 clipSpace = zeroToTwo - 1.0;\n\n            gl_Position = vec4(clipSpace * vec2(1, u_flipY), 0, 1);\n\n            v_texCoord = a_texCoord;\n\n        }\n    ",(i=this.filterList,n=i.filter((function(t){return"shader"==t.type})).map((function(t){return t.content})).join("\n\n"),s={9:!0},i.filter((function(t){return"convolution"==t.type})).forEach((function(t){s[t.length]=!0})),"#version 300 es\n\n    precision highp int;\n    precision mediump float;\n    \n    uniform sampler2D u_image;\n\n    // 3 is 3x3 matrix kernel \n    uniform float u_kernelSelect;\n    uniform float u_filterIndex;\n\n    uniform float u_kernel9[9];\n    uniform float u_kernel9Weight;\n    uniform float u_kernel25[25];\n    uniform float u_kernel25Weight;\n    uniform float u_kernel49[49];\n    uniform float u_kernel49Weight;\n    uniform float u_kernel81[81];\n    uniform float u_kernel81Weight;    \n\n    in vec2 v_texCoord;\n    \n    out vec4 outColor;\n\n    float random (vec2 st) {\n        return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);\n    } \n\n    // \n    vec3 rgb2hsv(vec3 c)\n    {\n        vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n        vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n        vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n        float d = q.x - min(q.w, q.y);\n        float e = 1.0e-10;\n        return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n    }\n\n    vec3 hsv2rgb(vec3 c)\n    {\n        vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n        vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n        return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }\n    \n    void main() {\n        vec4 pixelColor = texture(u_image, v_texCoord);\n        vec2 onePixel = vec2(1) / vec2(textureSize(u_image, 0));                \n\n        "+n+"\n\n        "+Object.keys(s).map((function(t){return Te(+t)})).join("\n")+"\n\n    }")),this.drawFilter(),"function"==typeof e&&e(this)}}]),t}(),Be={GLCanvas:Me};function Fe(t){var e=[];"string"==typeof t?e=re(t):Array.isArray(t)&&(e=t);var i=[];return e.forEach((function(t){var e=t.arr[0];if(Pe[e]){var n=function(t){var e=t.arr[0],i=Pe[e],n=t.arr;return n.shift(),i.apply(this,n)}(t);"convolution"==n.type||"shader"==n.type?i.push(n):n.forEach((function(t){i=i.concat(Fe(t))}))}})),i}var He=y({},Be,{filter:function(t,e,i,n){var s=new Be.GLCanvas({width:n.width||t.width,height:n.height||t.height,img:t});s.filter(Fe(e),(function(){"function"==typeof i&&i(s)}))}});function Ge(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{frameTimer:"full"},s=new _t(t);s.loadImage((function(){s.toArray(e,(function(t){"function"==typeof i&&i(t)}),n)}))}var Ve=y({},r,f,st,D,Z,V,j,q,k,X,{palette:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex";return e.length>i&&(e=ft(e,i)),e.map((function(e){return t(e,n)}))},ImageToCanvas:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{frameTimer:"full"};Ge(t,e,i,Object.assign({returnTo:"canvas"},n))},ImageToHistogram:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{width:200,height:100},n=new _t(t);n.loadImage((function(){pt.createHistogram(i.width||200,i.height||100,n.toHistogram(i),(function(t){"function"==typeof e&&e(t.toDataURL("image/png"))}),i)}))},ImageToRGB:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];if(i){if(i){var n;(n=new _t(t,e)).loadImage((function(){"function"==typeof i&&i(n.toRGB())}))}}else(n=new _t(t)).loadImage((function(){"function"==typeof e&&e(n.toRGB())}))},ImageToURL:Ge,GLToCanvas:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=new _t(t);s.load((function(){He.filter(s.newImage,e,(function(t){"function"==typeof i&&i(t)}),n)}))},histogram:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new _t(t);n.loadImage((function(){"function"==typeof e&&e(n.toHistogram(i))}))},histogramToPoints:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,i=[],n=0;n<t.length;n++){var s=t[n];if(0!=n)if(n!=t.length-1){var r=t[n-1],o=t[n+1],h=(o[1],r[1],o[0],r[0],[r[0]+(o[0]-r[0])*e,r[1]+(o[1]-r[1])*e]),a=[[].concat(A(r)),[].concat(h)],l=Math.sqrt(Math.pow(s[0]-r[0],2)+Math.pow(s[1]-r[1],2))/Math.sqrt(Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)),c=a[0][0]+(a[1][0]-a[0][0])*l,u=a[0][1]+(a[1][1]-a[0][1])*l;a[0][0]+=s[0]-c,a[0][1]+=s[1]-u,a[1][0]+=s[0]-c,a[1][1]+=s[1]-u,i[n]=a}else i[n]=[];else i[n]=[]}return i}}),je=[{rgb:"#ff0000",start:0},{rgb:"#ffff00",start:.17},{rgb:"#00ff00",start:.33},{rgb:"#00ffff",start:.5},{rgb:"#0000ff",start:.67},{rgb:"#ff00ff",start:.83},{rgb:"#ff0000",start:1}];!function(){for(var t=0,e=je.length;t<e;t++){var i=je[t],n=Ve.parse(i.rgb);i.r=n.r,i.g=n.g,i.b=n.b}}();var We={colors:je,checkHueColor:function(t){for(var e,i,n=0;n<je.length;n++)if(je[n].start>=t){e=je[n-1],i=je[n];break}return e&&i?Ve.interpolateRGB(e,i,(t-e.start)/(i.start-e.start)):je[0].rgb}},Ye=y({},Pt,Mt),Qe={Color:Ve,HueColor:We,ColorNames:_,ImageFilter:Ye,GL:He,Canvas:pt,ImageLoader:_t},ze=(Ve.color,0),Xe=[],Ke=function(){function t(e,i,n){if(g(this,t),"string"!=typeof e)this.el=e;else{var s=document.createElement(e);for(var r in this.uniqId=ze++,i&&(s.className=i),n=n||{})s.setAttribute(r,n[r]);this.el=s}}return x(t,[{key:"attr",value:function(t,e){return 1==arguments.length?this.el.getAttribute(t):(this.el.setAttribute(t,e),this)}},{key:"closest",value:function(e){for(var i=this,n=!1;!(n=i.hasClass(e));){if(!i.el.parentNode)return null;i=new t(i.el.parentNode)}return n?i:null}},{key:"checked",value:function(){return this.el.checked}},{key:"removeClass",value:function(t){return this.el.className=(" "+this.el.className+" ").replace(" "+t+" "," ").trim(),this}},{key:"hasClass",value:function(t){return!!this.el.className&&(" "+this.el.className+" ").indexOf(" "+t+" ")>-1}},{key:"addClass",value:function(t){return this.hasClass(t)||(this.el.className=this.el.className+" "+t),this}},{key:"toggleClass",value:function(t){this.hasClass(t)?this.removeClass(t):this.addClass(t)}},{key:"html",value:function(t){try{"string"==typeof t?this.el.innerHTML=t:this.empty().append(t)}catch(e){console.log(t)}return this}},{key:"find",value:function(t){return this.el.querySelector(t)}},{key:"$",value:function(e){return new t(this.find(e))}},{key:"findAll",value:function(t){return this.el.querySelectorAll(t)}},{key:"$$",value:function(e){return[].concat(A(this.findAll(e))).map((function(e){return new t(e)}))}},{key:"empty",value:function(){return this.html("")}},{key:"append",value:function(t){return"string"==typeof t?this.el.appendChild(document.createTextNode(t)):this.el.appendChild(t.el||t),this}},{key:"appendTo",value:function(t){return(t.el?t.el:t).appendChild(this.el),this}},{key:"remove",value:function(){return this.el.parentNode&&this.el.parentNode.removeChild(this.el),this}},{key:"text",value:function(){return this.el.textContent}},{key:"css",value:function(t,e){var i=this;if(2==arguments.length)this.el.style[t]=e;else if(1==arguments.length){if("string"==typeof t)return getComputedStyle(this.el)[t];var n=t||{};Object.keys(n).forEach((function(t){i.el.style[t]=n[t]}))}return this}},{key:"cssFloat",value:function(t){return parseFloat(this.css(t))}},{key:"cssInt",value:function(t){return parseInt(this.css(t))}},{key:"offset",value:function(){var e=this.el.getBoundingClientRect();return{top:e.top+t.getScrollTop(),left:e.left+t.getScrollLeft()}}},{key:"rect",value:function(){return this.el.getBoundingClientRect()}},{key:"position",value:function(){return this.el.style.top?{top:parseFloat(this.css("top")),left:parseFloat(this.css("left"))}:this.el.getBoundingClientRect()}},{key:"size",value:function(){return[this.width(),this.height()]}},{key:"width",value:function(){return this.el.offsetWidth||this.el.getBoundingClientRect().width}},{key:"contentWidth",value:function(){return this.width()-this.cssFloat("padding-left")-this.cssFloat("padding-right")}},{key:"height",value:function(){return this.el.offsetHeight||this.el.getBoundingClientRect().height}},{key:"contentHeight",value:function(){return this.height()-this.cssFloat("padding-top")-this.cssFloat("padding-bottom")}},{key:"dataKey",value:function(t){return this.uniqId+"."+t}},{key:"data",value:function(t,e){if(2!=arguments.length){if(1==arguments.length)return Xe[this.dataKey(t)];var i=Object.keys(Xe),n=this.uniqId+".";return i.filter((function(t){return 0==t.indexOf(n)})).map((function(t){return Xe[t]}))}return Xe[this.dataKey(t)]=e,this}},{key:"val",value:function(t){return 0==arguments.length?this.el.value:(1==arguments.length&&(this.el.value=t),this)}},{key:"int",value:function(){return parseInt(this.val(),10)}},{key:"float",value:function(){return parseFloat(this.val())}},{key:"show",value:function(){return this.css("display","block")}},{key:"hide",value:function(){return this.css("display","none")}},{key:"toggle",value:function(){return"none"==this.css("display")?this.show():this.hide()}},{key:"scrollTop",value:function(){return this.el===document.body?t.getScrollTop():this.el.scrollTop}},{key:"scrollLeft",value:function(){return this.el===document.body?t.getScrollLeft():this.el.scrollLeft}},{key:"on",value:function(t,e,i,n){return this.el.addEventListener(t,e,i,n),this}},{key:"off",value:function(t,e){return this.el.removeEventListener(t,e),this}},{key:"getElement",value:function(){return this.el}},{key:"createChild",value:function(e){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=new t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return n.css(i),this.append(n),n}},{key:"firstChild",value:function(){return new t(this.el.firstElementChild)}},{key:"replace",value:function(t,e){return this.el.replaceChild(e,t),this}}],[{key:"getScrollTop",value:function(){return Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)}},{key:"getScrollLeft",value:function(){return Math.max(window.pageXOffset,document.documentElement.scrollLeft,document.body.scrollLeft)}}]),t}(),qe=function(){function t(e){g(this,t),this.$store=e,this.initialize()}return x(t,[{key:"initialize",value:function(){var t=this;this.filterProps().forEach((function(e){t.$store.action(e,t)}))}},{key:"filterProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return Object.getOwnPropertyNames(this.__proto__).filter((function(e){return e.startsWith(t)}))}}]),t}(),Ze=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"initialize",value:function(){m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initialize",this).call(this),this.$store.colorSetsList=[{name:"Material",colors:["#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B"]},{name:"Custom",edit:!0,colors:[]},{name:"Color Scale",scale:["red","yellow","black"],count:5}],this.$store.currentColorSets={}}},{key:"/list",value:function(t){return Array.isArray(t.userList)&&t.userList.length?t.userList:t.colorSetsList}},{key:"/setUserPalette",value:function(t,e){t.userList=e,t.dispatch("/resetUserPalette"),t.dispatch("/setCurrentColorSets")}},{key:"/resetUserPalette",value:function(t){t.userList&&t.userList.length&&(t.userList=t.userList.map((function(e,i){if("function"==typeof e.colors){var n=e.colors;e.colors=n(t),e._colors=n}return Object.assign({name:"color-"+i,colors:[]},e)})),t.emit("changeUserList"))}},{key:"/setCurrentColorSets",value:function(t,e){var i=t.dispatch("/list");t.currentColorSets=void 0===e?i[0]:"number"==typeof e?i[e]:i.filter((function(t){return t.name==e}))[0],t.emit("changeCurrentColorSets")}},{key:"/getCurrentColorSets",value:function(t){return t.currentColorSets}},{key:"/addCurrentColor",value:function(t,e){Array.isArray(t.currentColorSets.colors)&&(t.currentColorSets.colors.push(e),t.emit("changeCurrentColorSets"))}},{key:"/setCurrentColorAll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.currentColorSets.colors=e,t.emit("changeCurrentColorSets")}},{key:"/removeCurrentColor",value:function(t,e){t.currentColorSets.colors[e]&&(t.currentColorSets.colors.splice(e,1),t.emit("changeCurrentColorSets"))}},{key:"/removeCurrentColorToTheRight",value:function(t,e){t.currentColorSets.colors[e]&&(t.currentColorSets.colors.splice(e,Number.MAX_VALUE),t.emit("changeCurrentColorSets"))}},{key:"/clearPalette",value:function(t){t.currentColorSets.colors&&(t.currentColorSets.colors=[],t.emit("changeCurrentColorSets"))}},{key:"/getCurrentColors",value:function(t){return t.dispatch("/getColors",t.currentColorSets)}},{key:"/getColors",value:function(t,e){return e.scale?Ve.scale(e.scale,e.count):e.colors||[]}},{key:"/getColorSetsList",value:function(t){return t.dispatch("/list").map((function(e){return{name:e.name,edit:e.edit,colors:t.dispatch("/getColors",e)}}))}}]),e}(qe),Je={addEvent:function(t,e,i,n){t&&t.addEventListener(e,i,n)},removeEvent:function(t,e,i){t&&t.removeEventListener(e,i)},pos:function(t){return t.touches&&t.touches[0]?t.touches[0]:t},posXY:function(t){var e=this.pos(t);return{x:e.pageX,y:e.pageY}}},ti=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(this,t),this.masterObj=e,this.settingObj=i}return x(t,[{key:"set",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.settingObj[t]=e||i}},{key:"init",value:function(t){if(!this.has(t)){var e=t.split("."),i=this.masterObj.refs[e[0]]||this.masterObj[e[0]]||this.masterObj,n=e.pop();if(i[n]){for(var s=arguments.length,r=Array(s>1?s-1:0),o=1;o<s;o++)r[o-1]=arguments[o];var h=i[n].apply(i,r);this.set(t,h)}}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.init(t,e),this.settingObj[t]||e}},{key:"has",value:function(t){return!!this.settingObj[t]}}]),t}(),ei=/^(click|mouse(down|up|move|enter|leave)|touch(start|move|end)|key(down|up|press)|contextmenu|change|input)/gi,ii=/^load (.*)/gi,ni=["Control","Shift","Alt","Meta"],si=function(){function t(){g(this,t),this.state=new ti(this),this.refs={},this.childComponents=this.components()}return x(t,[{key:"newChildComponents",value:function(){var t=this;Object.keys(this.childComponents).forEach((function(e){var i=t.childComponents[e];t[e]=new i(t)}))}},{key:"render",value:function(){this.$el=this.parseTemplate(this.template()),this.refs.$el=this.$el,this.parseTarget(),this.load(),this.afterRender()}},{key:"afterRender",value:function(){}},{key:"components",value:function(){return{}}},{key:"parseTemplate",value:function(t){var e=this,i=new Ke("div").html(t).firstChild(),n=i.findAll("[ref]");return[].concat(A(n)).forEach((function(t){var i=t.getAttribute("ref");e.refs[i]=new Ke(t)})),i}},{key:"parseTarget",value:function(){var t=this,e=this.$el.findAll("[target]");[].concat(A(e)).forEach((function(e){var i=e.getAttribute("target"),n=e.getAttribute("ref")||i,s=new(0,t.childComponents[i])(t);t[n]=s,t.refs[n]=s.$el,s&&(s.render(),new Ke(e.parentNode).replace(e,s.$el.el))}))}},{key:"load",value:function(){var t=this;this.filterProps(ii).forEach((function(e){var i=e.split("load ")[1];t.refs[i]&&t.refs[i].html(t.parseTemplate(t[e].call(t)))}))}},{key:"template",value:function(){return"<div></div>"}},{key:"initialize",value:function(){}},{key:"initializeEvent",value:function(){var t=this;this.initializeEventMachin(),Object.keys(this.childComponents).forEach((function(e){t[e]&&t[e].initializeEvent()}))}},{key:"destroy",value:function(){var t=this;this.destroyEventMachin(),Object.keys(this.childComponents).forEach((function(e){t[e]&&t[e].destroy()}))}},{key:"destroyEventMachin",value:function(){this.removeEventAll()}},{key:"initializeEventMachin",value:function(){this.filterProps(ei).forEach(this.parseEvent.bind(this))}},{key:"collectProps",value:function(){if(!this.collapsedProps){var t=this.__proto__,e=[];do{e.push.apply(e,A(Object.getOwnPropertyNames(t))),t=t.__proto__}while(t);this.collapsedProps=e}return this.collapsedProps}},{key:"filterProps",value:function(t){return this.collectProps().filter((function(e){return e.match(t)}))}},{key:"parseEvent",value:function(t){var e=t.split(" ");this.bindingEvent(e,this[t].bind(this))}},{key:"getDefaultDomElement",value:function(t){var e=void 0;return(e=t?this.refs[t]||this[t]||window[t]:this.el||this.$el||this.$root)instanceof Ke?e.getElement():e}},{key:"getDefaultEventObject",value:function(t){var e=this,i=t.split("."),n=i.shift(),s=i.includes("Control"),r=i.includes("Shift"),o=i.includes("Alt"),h=i.includes("Meta"),a=(i=i.filter((function(t){return!1===ni.includes(t)}))).filter((function(t){return!!e[t]}));return{eventName:n,isControl:s,isShift:r,isAlt:o,isMeta:h,codes:i=i.filter((function(t){return!1===a.includes(t)})).map((function(t){return t.toLowerCase()})),checkMethodList:a}}},{key:"bindingEvent",value:function(t,e){var i,n=(i=t,Array.isArray(i)?i:Array.from(i)),s=n[0],r=n[1],o=n.slice(2);r=this.getDefaultDomElement(r);var h=this.getDefaultEventObject(s);h.dom=r,h.delegate=o.join(" "),this.addEvent(h,e)}},{key:"matchPath",value:function(t,e){return t?t.matches(e)?t:this.matchPath(t.parentElement,e):null}},{key:"getBindings",value:function(){return this._bindings||this.initBindings(),this._bindings}},{key:"addBinding",value:function(t){this.getBindings().push(t)}},{key:"initBindings",value:function(){this._bindings=[]}},{key:"checkEventType",value:function(t,e){var i=this,n=!e.isControl||t.ctrlKey,s=!e.isShift||t.shiftKey,r=!e.isAlt||t.altKey,o=!e.isMeta||t.metaKey,h=!0;e.codes.length&&(h=e.codes.includes(t.code.toLowerCase())||e.codes.includes(t.key.toLowerCase()));var a=!0;return e.checkMethodList.length&&(a=e.checkMethodList.every((function(e){return i[e].call(i,t)}))),n&&r&&s&&o&&h&&a}},{key:"makeCallback",value:function(t,e){var i=this;return t.delegate?function(n){if(n.xy=Je.posXY(n),i.checkEventType(n,t)){var s=i.matchPath(n.target||n.srcElement,t.delegate);if(s)return n.delegateTarget=s,n.$delegateTarget=new Ke(s),e(n)}}:function(n){if(n.xy=Je.posXY(n),i.checkEventType(n,t))return e(n)}}},{key:"addEvent",value:function(t,e){t.callback=this.makeCallback(t,e),this.addBinding(t);var i=!0;"touchstart"===t.eventName&&(i={passive:!0}),Je.addEvent(t.dom,t.eventName,t.callback,i)}},{key:"removeEventAll",value:function(){var t=this;this.getBindings().forEach((function(e){t.removeEvent(e)})),this.initBindings()}},{key:"removeEvent",value:function(t){var e=t.eventName,i=t.dom,n=t.callback;Je.removeEvent(i,e,n)}}]),t}(),ri=/^@/,oi=function(t){function e(t){g(this,e);var i=C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.opt=t||{},t&&t.$store&&(i.$store=t.$store),i.initialize(),i.initializeStoreEvent(),i}return E(e,t),x(e,[{key:"initializeStoreEvent",value:function(){var t=this;this.storeEvents={},this.filterProps(ri).forEach((function(e){var i=e.split("@");i.shift();var n=i.join("@");t.storeEvents[n]=t[e].bind(t),t.$store.on(n,t.storeEvents[n])}))}},{key:"destoryStoreEvent",value:function(){var t=this;Object.keys(this.storeEvents).forEach((function(e){t.$store.off(e,t.storeEvents[e])}))}}]),e}(si);var hi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"initialize",value:function(){m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initialize",this).call(this),this.$store.rgb={},this.$store.hsl={},this.$store.hsv={},this.$store.alpha=1,this.$store.format="hex"}},{key:"/changeFormat",value:function(t,e){t.format=e,t.emit("changeFormat")}},{key:"/initColor",value:function(t,e,i){t.dispatch("/changeColor",e,i,!0),t.emit("initColor")}},{key:"/changeColor",value:function(t,e,i,n){var s;"string"==typeof(e=e||"#FF0000")&&(e=Ve.parse(e)),e.source=e.source||i,t.alpha=void 0===(s=e.a)||null==s?t.alpha:e.a,t.format="hsv"!=e.type&&e.type||t.format,"hsl"==e.type?(t.hsl=Object.assign(t.hsl,e),t.rgb=Ve.HSLtoRGB(t.hsl),t.hsv=Ve.HSLtoHSV(e)):"hex"==e.type||"rgb"==e.type?(t.rgb=Object.assign(t.rgb,e),t.hsl=Ve.RGBtoHSL(t.rgb),t.hsv=Ve.RGBtoHSV(e)):"hsv"==e.type&&(t.hsv=Object.assign(t.hsv,e),t.rgb=Ve.HSVtoRGB(t.hsv),t.hsl=Ve.HSVtoHSL(t.hsv)),n||t.emit("changeColor",e.source)}},{key:"/getHueColor",value:function(t){return We.checkHueColor(t.hsv.h/360)}},{key:"/toString",value:function(t,e){var i=t[e=e||t.format]||t.rgb;return Ve.format(y({},i,{a:t.alpha}),e)}},{key:"/toColor",value:function(t,e){return"rgb"==(e=e||t.format)?t.dispatch("/toRGB"):"hsl"==e?t.dispatch("/toHSL"):"hex"==e?t.dispatch("/toHEX"):t.dispatch("/toString",e)}},{key:"/toRGB",value:function(t){return t.dispatch("/toString","rgb")}},{key:"/toHSL",value:function(t){return t.dispatch("/toString","hsl")}},{key:"/toHEX",value:function(t){return t.dispatch("/toString","hex").toUpperCase()}}]),e}(qe),ai=function(){function t(e){g(this,t),this.callbacks=[],this.actions=[],this.modules=e.modules||[],this.initialize()}return x(t,[{key:"initialize",value:function(){this.initializeModule()}},{key:"initializeModule",value:function(){var t=this;this.modules.forEach((function(e){new e(t)}))}},{key:"action",value:function(t,e){this.actions[t]={context:e,callback:e[t]}}},{key:"dispatch",value:function(t){var e=[].concat(Array.prototype.slice.call(arguments)),i=(t=e.shift(),this.actions[t]);if(i)return i.callback.apply(i.context,[this].concat(A(e)))}},{key:"module",value:function(t){}},{key:"on",value:function(t,e){this.callbacks.push({event:t,callback:e})}},{key:"off",value:function(t,e){0==arguments.length?this.callbacks=[]:1==arguments.length?this.callbacks=this.callbacks.filter((function(e){return e.event!=t})):2==arguments.length&&(this.callbacks=this.callbacks.filter((function(i){return i.event!=t&&i.callback!=e})))}},{key:"emit",value:function(){var t=[].concat(Array.prototype.slice.call(arguments)),e=t.shift();this.callbacks.filter((function(t){return t.event==e})).forEach((function(e){e&&"function"==typeof e.callback&&e.callback.apply(e,A(t))}))}}]),t}(),li=function(t){function e(t){g(this,e);var i=C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.isColorPickerShow=!1,i.isShortCut=!1,i.hideDelay=+(void 0===i.opt.hideDeplay?2e3:i.opt.hideDelay),i.timerCloseColorPicker,i.autoHide=i.opt.autoHide||!0,i.outputFormat=i.opt.outputFormat,i.$checkColorPickerClass=i.checkColorPickerClass.bind(i),i}return E(e,t),x(e,[{key:"initialize",value:function(){var t=this;this.$body=null,this.$root=null,this.$store=new ai({modules:[hi,Ze]}),this.callbackChange=function(){t.callbackColorValue()},this.callbackLastUpdate=function(){t.callbackLastUpdateColorValue()},this.colorpickerShowCallback=function(){},this.colorpickerHideCallback=function(){},this.colorpickerLastUpdateCallback=function(){},this.$body=new Ke(this.getContainer()),this.$root=new Ke("div","codemirror-colorpicker"),"inline"==this.opt.position&&this.$body.append(this.$root),this.opt.type&&this.$root.addClass(this.opt.type),this.opt.hideInformation&&this.$root.addClass("hide-information"),this.opt.hideColorsets&&this.$root.addClass("hide-colorsets"),this.$arrow=new Ke("div","arrow"),this.$root.append(this.$arrow),this.$store.dispatch("/setUserPalette",this.opt.colorSets),this.render(),this.$root.append(this.$el),this.initColorWithoutChangeEvent(this.opt.color),this.initializeEvent()}},{key:"initColorWithoutChangeEvent",value:function(t){this.$store.dispatch("/initColor",t)}},{key:"show",value:function(t,e,i,n,s){this.colorpickerShowCallback=i,this.colorpickerHideCallback=n,this.colorpickerLastUpdateCallback=s,this.$root.css(this.getInitalizePosition()).show(),this.isColorPickerShow=!0,this.isShortCut=t.isShortCut||!1,this.outputFormat=t.outputFormat,this.hideDelay=+(void 0===t.hideDelay?2e3:t.hideDelay),this.hideDelay>0&&this.setHideDelay(this.hideDelay),this.$root.appendTo(this.$body),this.definePosition(t),this.initColorWithoutChangeEvent(e)}},{key:"initColor",value:function(t,e){this.$store.dispatch("/changeColor",t,e)}},{key:"hide",value:function(){this.isColorPickerShow&&(this.$root.hide(),this.$root.remove(),this.isColorPickerShow=!1,this.callbackHideColorValue())}},{key:"setColorsInPalette",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$store.dispatch("/setCurrentColorAll",t)}},{key:"setUserPalette",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$store.dispatch("/setUserPalette",t)}},{key:"getOption",value:function(t){return this.opt[t]}},{key:"setOption",value:function(t,e){this.opt[t]=e}},{key:"isType",value:function(t){return this.getOption("type")==t}},{key:"isPaletteType",value:function(){return this.isType("palette")}},{key:"isSketchType",value:function(){return this.isType("sketch")}},{key:"getContainer",value:function(){return this.opt.container||document.body}},{key:"getColor",value:function(t){return this.$store.dispatch("/toColor",t)}},{key:"definePositionForArrow",value:function(t,e,i){}},{key:"definePosition",value:function(t){var e=this.$root.width(),i=this.$root.height(),n=t.left-this.$body.scrollLeft();e+n>window.innerWidth&&(n-=e+n-window.innerWidth),n<0&&(n=0);var s=t.top-this.$body.scrollTop();i+s>window.innerHeight&&(s-=i+s-window.innerHeight),s<0&&(s=0),this.$root.css({left:n+"px",top:s+"px"})}},{key:"getInitalizePosition",value:function(){return"inline"==this.opt.position?{position:"relative",left:"auto",top:"auto",display:"inline-block"}:{position:"fixed",left:"-10000px",top:"-10000px"}}},{key:"isAbsolute",value:function(){return"inline"!==this.opt.position}},{key:"mouseup.isAbsolute document",value:function(t){this.__isMouseDown=!1,this.checkInHtml(t.target)||(0==this.checkColorPickerClass(t.target)?this.hide():this.__isMouseIn||(clearTimeout(this.timerCloseColorPicker),this.timerCloseColorPicker=setTimeout(this.hide.bind(this),this.delayTime||this.hideDelay)))}},{key:"keyup.isAbsolute.escape $root",value:function(t){this.hide()}},{key:"mouseover.isAbsolute $root",value:function(t){clearTimeout(this.timerCloseColorPicker)}},{key:"mousemove.isAbsolute $root",value:function(t){clearTimeout(this.timerCloseColorPicker)}},{key:"mouseenter.isAbsolute $root",value:function(t){clearTimeout(this.timerCloseColorPicker),this.__isMouseIn=!0}},{key:"mouseleave.isAbsolute $root",value:function(t){this.__isMouseIn=!1,this.__isMouseDown||(clearTimeout(this.timerCloseColorPicker),this.timerCloseColorPicker=setTimeout(this.hide.bind(this),this.delayTime||this.hideDelay))}},{key:"mousedown.isAbsolute $root",value:function(t){this.__isMouseDown=!0}},{key:"setHideDelay",value:function(t){this.delayTime=t||0}},{key:"runHideDelay",value:function(){this.isColorPickerShow&&this.setHideDelay()}},{key:"callbackColorValue",value:function(t){t=t||this.getCurrentColor(),"function"==typeof this.opt.onChange&&this.opt.onChange.call(this,t),"function"==typeof this.colorpickerShowCallback&&this.colorpickerShowCallback(t)}},{key:"callbackLastUpdateColorValue",value:function(t){t=t||this.getCurrentColor(),"function"==typeof this.opt.onLastUpdate&&this.opt.onLastUpdate.call(this,t),"function"==typeof this.colorpickerLastUpdateCallback&&this.colorpickerLastUpdateCallback(t)}},{key:"callbackHideColorValue",value:function(t){t=t||this.getCurrentColor(),"function"==typeof this.opt.onHide&&this.opt.onHide.call(this,t),"function"==typeof this.colorpickerHideCallback&&this.colorpickerHideCallback(t)}},{key:"getCurrentColor",value:function(){return this.$store.dispatch("/toColor",this.outputFormat)}},{key:"checkColorPickerClass",value:function(t){var e=new Ke(t).closest("codemirror-colorview"),i=new Ke(t).closest("codemirror-colorpicker"),n=new Ke(t).closest("CodeMirror");return t.nodeName,!!(i||e||n)}},{key:"checkInHtml",value:function(t){return"HTML"==t.nodeName}},{key:"initializeStoreEvent",value:function(){m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initializeStoreEvent",this).call(this),this.$store.on("changeColor",this.callbackChange),this.$store.on("lastUpdateColor",this.callbackLastUpdate),this.$store.on("changeFormat",this.callbackChange)}},{key:"destroy",value:function(){m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.$store.off("changeColor",this.callbackChange),this.$store.off("lastUpdateColor",this.callbackLastUpdate),this.$store.off("changeFormat",this.callbackChange),this.callbackChange=void 0,this.callbackLastUpdate=void 0,this.colorpickerShowCallback=void 0,this.colorpickerHideCallback=void 0}}]),e}(oi),ci=function(t){function e(t){g(this,e);var i=C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.minValue=0,i.maxValue=1,i.source="base-slider",i}return E(e,t),x(e,[{key:"getMinMaxPosition",value:function(){var t=this.getMinPosition(),e=this.getMaxDist();return{min:t,max:t+e,width:e}}},{key:"getCurrent",value:function(t){return min+this.getMaxDist()*t}},{key:"getMinPosition",value:function(){return this.refs.$container.offset().left}},{key:"getMaxDist",value:function(){return this.state.get("$container.width")}},{key:"getDist",value:function(t){var e=this.getMinMaxPosition(),i=e.min,n=e.max;return t<i?0:t>n?100:(t-i)/(n-i)*100}},{key:"getCaculatedDist",value:function(t){var e=t?this.getMousePosition(t):this.getCurrent(this.getDefaultValue()/this.maxValue);return this.getDist(e)}},{key:"getDefaultValue",value:function(){return 0}},{key:"setMousePosition",value:function(t){this.refs.$bar.css({left:t+"px"})}},{key:"getMousePosition",value:function(t){return Je.pos(t).pageX}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(t){(t=t||this.getDefaultValue())<=this.minValue?this.refs.$bar.addClass("first").removeClass("last"):t>=this.maxValue?this.refs.$bar.addClass("last").removeClass("first"):this.refs.$bar.removeClass("last").removeClass("first"),this.setMousePosition(this.getMaxDist()*((t||0)/this.maxValue))}}]),e}(function(t){function e(t){g(this,e);var i=C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.source="base-box",i}return E(e,t),x(e,[{key:"refresh",value:function(){}},{key:"refreshColorUI",value:function(t){}},{key:"changeColor",value:function(t){this.$store.dispatch("/changeColor",Object.assign({source:this.source},t||{}))}},{key:"mouseup document",value:function(t){this.onDragEnd(t)}},{key:"mousemove document",value:function(t){this.onDragMove(t)}},{key:"mousedown $bar",value:function(t){t.preventDefault(),this.isDown=!0}},{key:"mousedown $container",value:function(t){this.isDown=!0,this.onDragStart(t)}},{key:"touchend document",value:function(t){this.onDragEnd(t)}},{key:"touchmove document",value:function(t){this.onDragMove(t)}},{key:"touchstart $bar",value:function(t){t.preventDefault(),this.isDown=!0}},{key:"touchstart $container",value:function(t){this.onDragStart(t)}},{key:"onDragStart",value:function(t){this.isDown=!0,this.refreshColorUI(t)}},{key:"onDragMove",value:function(t){this.isDown&&this.refreshColorUI(t)}},{key:"onDragEnd",value:function(t){this.isDown&&(this.$store.emit("lastUpdateColor"),this.isDown=!1)}},{key:"@changeColor",value:function(t){this.source!=t&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),e}(oi)),ui=function(t){function e(t){g(this,e);var i=C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.minValue=0,i.maxValue=1,i.source="value-control",i}return E(e,t),x(e,[{key:"template",value:function(){return'\n            <div class="value">\n                <div ref="$container" class="value-container">\n                    <div ref="$bar" class="drag-bar"></div>\n                </div>\n            </div>\n        '}},{key:"setBackgroundColor",value:function(){this.refs.$container.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"refresh",value:function(){m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"refresh",this).call(this),this.setBackgroundColor()}},{key:"getDefaultValue",value:function(){return this.$store.hsv.v}},{key:"refreshColorUI",value:function(t){var e=this.getCaculatedDist(t);this.setColorUI(e/100*this.maxValue),this.changeColor({type:"hsv",v:e/100*this.maxValue})}}]),e}(ci),fi=function(t){function e(t){g(this,e);var i=C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.minValue=0,i.maxValue=1,i.source="opacity-control",i}return E(e,t),x(e,[{key:"template",value:function(){return'\n        <div class="opacity">\n            <div ref="$container" class="opacity-container">\n                <div ref="$colorbar" class="color-bar"></div>\n                <div ref="$bar" class="drag-bar"></div>\n            </div>\n        </div>\n        '}},{key:"refresh",value:function(){m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"refresh",this).call(this),this.setOpacityColorBar()}},{key:"setOpacityColorBar",value:function(){var t=Object.assign({},this.$store.rgb);t.a=0;var e=Ve.format(t,"rgb");t.a=1;var i=Ve.format(t,"rgb");this.setOpacityColorBarBackground(e,i)}},{key:"setOpacityColorBarBackground",value:function(t,e){this.refs.$colorbar.css("background","linear-gradient(to right, "+t+", "+e+")")}},{key:"getDefaultValue",value:function(){return this.$store.alpha}},{key:"refreshColorUI",value:function(t){var e=this.getCaculatedDist(t);this.setColorUI(e/100*this.maxValue),this.changeColor({a:Math.floor(e)/100*this.maxValue})}}]),e}(ci);var pi,_i=(pi=window,"EyeDropper"in pi),di=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return'\n      <nav class="el-cp-color-eyedropper">\n        <button type="button" ref="$button" title="Eyedropper">\n          <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path d="M7.797 18.344c-.019.001-.074-.009-.24-.065-.277-.094-.745-.25-1.137.141l-1.542 1.543a.595.595 0 0 1-.84-.84L5.58 17.58c.391-.39.235-.859.141-1.14-.045-.134-.06-.195-.072-.206-.002-.003-.005-.003-.007-.001l1.06-1.06.703.705a.432.432 0 1 0 .611-.611l-.703-.705.557-.557.703.703a.434.434 0 0 0 .611 0 .434.434 0 0 0 0-.61l-.703-.703.571-.572.703.704a.435.435 0 0 0 .612 0 .434.434 0 0 0 0-.61l-.705-.706L14 7.875l2.126 2.127-8.33 8.342zM19.29 9.37l-.654-.655 1.669-1.668a2.372 2.372 0 0 0-3.353-3.354l-1.669 1.669-.655-.654a1.341 1.341 0 0 0-1.898 1.897l.658.658-8.358 8.359c-.373.373-.214.841-.13 1.094.061.18.069.24.069.253l-1.543 1.542a1.458 1.458 0 1 0 2.062 2.061l1.536-1.54c.019-.003.08.006.259.066.252.085.72.243 1.093-.13l8.359-8.358.658.658a1.341 1.341 0 1 0 1.897-1.898z" fill="currentColor"/>\n          </svg>\n        </button>\n      </nav>\n    '}},{key:"click $button",value:function(){var t=this;_i&&(new EyeDropper).open().then((function(e){t.$store.dispatch("/changeColor",e.sRGBHex),t.$store.emit("lastUpdateColor")}))}}]),e}(oi),vi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"components",value:function(){return{Value:ui,Opacity:fi,Eyedropper:di}}},{key:"template",value:function(){return'\n        <div class="control '+(_i?"has-eyedropper":"")+'">\n            <div target="Value" ></div>\n            <div target="Opacity" ></div>\n            <div ref="$controlPattern" class="empty"></div>\n            <div ref="$controlColor" class="color"></div>\n            '+(_i?'\n        <div class="el-cp-color-control__left">\n          <div target="Eyedropper"></div>\n        </div>\n      ':"")+"                       \n        </div>\n        "}},{key:"setBackgroundColor",value:function(){this.refs.$controlColor.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"refresh",value:function(){this.setColorUI(),this.setBackgroundColor()}},{key:"setColorUI",value:function(){this.Value.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(t){"macos-control"!=t&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),e}(oi),ki=function(t){function e(t){g(this,e);var i=C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.width=214,i.height=214,i.thinkness=0,i.half_thinkness=0,i.source="colorwheel",i}return E(e,t),x(e,[{key:"template",value:function(){return'\n        <div class="wheel">\n            <canvas class="wheel-canvas" ref="$colorwheel" ></canvas>\n            <div class="wheel-canvas" ref="$valuewheel" ></div>\n            <div class="drag-pointer" ref="$drag_pointer"></div>\n        </div>\n        '}},{key:"refresh",value:function(t){this.setColorUI(t)}},{key:"setColorUI",value:function(t){this.renderCanvas(),this.renderValue(),this.setHueColor(null,t)}},{key:"renderValue",value:function(){var t=1-this.$store.hsv.v;this.refs.$valuewheel.css({"background-color":"rgba(0, 0, 0, "+t+")"})}},{key:"renderWheel",value:function(t,e){this.width&&!t&&(t=this.width),this.height&&!e&&(e=this.height);var i=new Ke("canvas"),n=i.el.getContext("2d");i.el.width=t,i.el.height=e,i.css({width:t+"px",height:e+"px"});for(var s=n.getImageData(0,0,t,e),r=s.data,o=Math.floor(t/2),h=Math.floor(e/2),a=t>e?h:o,l=o,c=h,f=0;f<e;f++)for(var p=0;p<t;p++){var _=p-l+1,d=f-c+1,v=_*_+d*d,k=u(_,d),g=Ve.HSVtoRGB(k,Math.min(Math.sqrt(v)/a,1),1),x=4*(f*t+p);r[x]=g.r,r[x+1]=g.g,r[x+2]=g.b,r[x+3]=255}return n.putImageData(s,0,0),this.thinkness>0&&(n.globalCompositeOperation="destination-out",n.fillStyle="black",n.beginPath(),n.arc(l,c,a-this.thinkness,0,2*Math.PI),n.closePath(),n.fill()),i}},{key:"renderCanvas",value:function(){if(!this.$store.createdWheelCanvas){var t=this.refs.$colorwheel,e=t.el.getContext("2d"),i=t.size(),n=b(i,2),s=n[0],r=n[1];this.width&&!s&&(s=this.width),this.height&&!r&&(r=this.height),t.el.width=s,t.el.height=r,t.css({width:s+"px",height:r+"px"});var o=this.renderWheel(s,r);e.drawImage(o.el,0,0),this.$store.createdWheelCanvas=!0}}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"getDefaultSaturation",value:function(){return this.$store.hsv.s}},{key:"getCurrentXY",value:function(t,e,i,n,s){return t?Je.posXY(t):function(t,e){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{x:l(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),y:c(t,e,i)}}(e,i,n,s)}},{key:"getRectangle",value:function(){var t=this.state.get("$el.width"),e=this.state.get("$el.height"),i=this.state.get("$colorwheel.width")/2,n=this.refs.$el.offset().left,s=n+t/2,r=this.refs.$el.offset().top;return{minX:n,minY:r,width:t,height:e,radius:i,centerX:s,centerY:r+e/2}}},{key:"setHueColor",value:function(t,e){if(this.state.get("$el.width")){var i=this.getRectangle(),n=i.minX,s=i.minY,r=i.radius,o=i.centerX,h=i.centerY,a=this.getCurrentXY(t,this.getDefaultValue(),this.getDefaultSaturation()*r,o,h),l=(d=a.x)-o,c=(v=a.y)-h,f=l*l+c*c,p=u(l,c);if(f>r*r)var _=this.getCurrentXY(null,p,r,o,h),d=_.x,v=_.y;var k=Math.min(Math.sqrt(f)/r,1);this.refs.$drag_pointer.css({left:d-n+"px",top:v-s+"px"}),e||this.changeColor({type:"hsv",h:p,s:k})}}},{key:"changeColor",value:function(t){this.$store.dispatch("/changeColor",Object.assign({source:this.source},t||{}))}},{key:"@changeColor",value:function(t){this.source!=t&&this.refresh(!0)}},{key:"@initColor",value:function(){this.refresh(!0)}},{key:"mouseup document",value:function(t){this.isDown&&(this.isDown=!1,this.$store.emit("lastUpdateColor"))}},{key:"mousemove document",value:function(t){this.isDown&&this.setHueColor(t)}},{key:"mousedown $drag_pointer",value:function(t){t.preventDefault(),this.isDown=!0}},{key:"mousedown $el",value:function(t){this.isDown=!0,this.setHueColor(t)}},{key:"touchend document",value:function(t){this.isDown&&(this.isDown=!1,this.$store.emit("lastUpdateColor"))}},{key:"touchmove document",value:function(t){this.isDown&&this.setHueColor(t)}},{key:"touchstart $drag_pointer",value:function(t){t.preventDefault(),this.isDown=!0}},{key:"touchstart $el",value:function(t){t.preventDefault(),this.isDown=!0,this.setHueColor(t)}}]),e}(oi),gi="chromedevtool-information",xi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return'\n        <div class="information hex">\n            <div ref="$informationChange" class="information-change">\n                <button ref="$formatChangeButton" type="button" class="format-change-button arrow-button"></button>\n            </div>\n            <div class="information-item hex">\n                <div class="input-field hex">\n                    <input ref="$hexCode" class="input" type="text" />\n                    <div class="title">HEX</div>\n                </div>\n            </div>\n            <div class="information-item rgb">\n                <div class="input-field rgb-r">\n                    <input ref="$rgb_r" class="input" type="number" step="1" min="0" max="255" />\n                    <div class="title">R</div>\n                </div>\n                <div class="input-field rgb-g">\n                    <input ref="$rgb_g" class="input" type="number" step="1" min="0" max="255" />\n                    <div class="title">G</div>\n                </div>\n                <div class="input-field rgb-b">\n                    <input ref="$rgb_b" class="input" type="number" step="1" min="0" max="255" />\n                    <div class="title">B</div>\n                </div>          \n                <div class="input-field rgb-a">\n                    <input ref="$rgb_a" class="input" type="number" step="0.01" min="0" max="1" />\n                    <div class="title">A</div>\n                </div>                                                            \n            </div>\n            <div class="information-item hsl">\n                <div class="input-field hsl-h">\n                    <input ref="$hsl_h" class="input" type="number" step="1" min="0" max="360" />\n                    <div class="title">H</div>\n                </div>\n                <div class="input-field hsl-s">\n                    <input ref="$hsl_s" class="input" type="number" step="1" min="0" max="100" />\n                    <div class="postfix">%</div>\n                    <div class="title">S</div>\n                </div>\n                <div class="input-field hsl-l">\n                    <input ref="$hsl_l" class="input" type="number" step="1" min="0" max="100" />\n                    <div class="postfix">%</div>                        \n                    <div class="title">L</div>\n                </div>\n                <div class="input-field hsl-a">\n                    <input ref="$hsl_a" class="input" type="number" step="0.01" min="0" max="1" />\n                    <div class="title">A</div>\n                </div>\n            </div>\n        </div>\n        '}},{key:"setCurrentFormat",value:function(t){this.format=t,this.initFormat()}},{key:"initFormat",value:function(){var t=this,e=this.format||"hex";["hex","rgb","hsl"].filter((function(t){return t!==e})).forEach((function(e){t.$el.removeClass(e)})),this.$el.addClass(e)}},{key:"nextFormat",value:function(){var t=this.$store.format||"hex",e="hex";"hex"==t?e="rgb":"rgb"==t?e="hsl":"hsl"==t&&(e="hex"),this.format=e,this.$store.dispatch("/changeFormat",e),this.$store.emit("lastUpdateColor"),this.initFormat()}},{key:"goToFormat",value:function(t){this.format=t,this.$store.dispatch("/changeFormat",this.format),this.$store.emit("lastUpdateColor"),this.initFormat()}},{key:"getFormat",value:function(){return this.format||"hex"}},{key:"checkNumberKey",value:function(t){var e=t.which,i=!1;return 37!=e&&39!=e&&8!=e&&46!=e&&9!=e||(i=!0),!(!i&&(e<48||e>57))}},{key:"checkNotNumberKey",value:function(t){return!this.checkNumberKey(t)}},{key:"changeRgbColor",value:function(){this.$store.dispatch("/changeColor",{type:"rgb",r:this.refs.$rgb_r.int(),g:this.refs.$rgb_g.int(),b:this.refs.$rgb_b.int(),a:this.refs.$rgb_a.float(),source:gi}),this.$store.emit("lastUpdateColor")}},{key:"changeHslColor",value:function(){this.$store.dispatch("/changeColor",{type:"hsl",h:this.refs.$hsl_h.int(),s:this.refs.$hsl_s.int(),l:this.refs.$hsl_l.int(),a:this.refs.$hsl_a.float(),source:gi}),this.$store.emit("lastUpdateColor")}},{key:"@changeColor",value:function(t){gi!=t&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}},{key:"input $rgb_r",value:function(t){this.changeRgbColor()}},{key:"input $rgb_g",value:function(t){this.changeRgbColor()}},{key:"input $rgb_b",value:function(t){this.changeRgbColor()}},{key:"input $rgb_a",value:function(t){this.changeRgbColor()}},{key:"input $hsl_h",value:function(t){this.changeHslColor()}},{key:"input $hsl_s",value:function(t){this.changeHslColor()}},{key:"input $hsl_l",value:function(t){this.changeHslColor()}},{key:"input $hsl_a",value:function(t){this.changeHslColor()}},{key:"keyup $hexCode",value:function(t){var e=this.refs.$hexCode.val();"#"!=e.charAt(0)||7!=e.length&&9!==e.length||(this.$store.dispatch("/changeColor",e,gi),this.$store.emit("lastUpdateColor"))}},{key:"click $formatChangeButton",value:function(t){this.nextFormat()}},{key:"click $el .information-item.hex .input-field .title",value:function(t){this.goToFormat("rgb")}},{key:"click $el .information-item.rgb .input-field .title",value:function(t){this.goToFormat("hsl")}},{key:"click $el .information-item.hsl .input-field .title",value:function(t){this.goToFormat("hex")}},{key:"setRGBInput",value:function(){this.refs.$rgb_r.val(this.$store.rgb.r),this.refs.$rgb_g.val(this.$store.rgb.g),this.refs.$rgb_b.val(this.$store.rgb.b),this.refs.$rgb_a.val(this.$store.alpha)}},{key:"setHSLInput",value:function(){this.refs.$hsl_h.val(this.$store.hsl.h),this.refs.$hsl_s.val(this.$store.hsl.s),this.refs.$hsl_l.val(this.$store.hsl.l),this.refs.$hsl_a.val(this.$store.alpha)}},{key:"setHexInput",value:function(){this.refs.$hexCode.val(this.$store.dispatch("/toHEX"))}},{key:"refresh",value:function(){this.setCurrentFormat(this.$store.format),this.setRGBInput(),this.setHSLInput(),this.setHexInput()}}]),e}(oi),Ti=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return'\n            <div class="color-chooser">\n                <div class="color-chooser-container">\n                    <div class="colorsets-item colorsets-item-header">\n                        <h1 class="title">Color Palettes</h1>\n                        <span ref="$toggleButton" class="items">&times;</span>\n                    </div>\n                    <div ref="$colorsetsList" class="colorsets-list"></div>\n                </div>\n            </div>\n        '}},{key:"refresh",value:function(){this.load()}},{key:"@changeCurrentColorSets",value:function(){this.refresh()}},{key:"@toggleColorChooser",value:function(){this.toggle()}},{key:"load $colorsetsList",value:function(){return"\n            <div>\n                "+this.$store.dispatch("/getColorSetsList").map((function(t,e){return'\n                        <div class="colorsets-item" data-colorsets-index="'+e+'" >\n                            <h1 class="title">'+t.name+'</h1>\n                            <div class="items">\n                                <div>\n                                    '+t.colors.filter((function(t,e){return e<5})).map((function(t){return'<div class="color-item" title="'+(t=t||"rgba(255, 255, 255, 1)")+'">\n                                                <div class="color-view" style="background-color: '+t+'"></div>\n                                            </div>'})).join("")+"\n                                </div>\n                            </div>\n                        </div>"})).join("")+"\n            </div>\n        "}},{key:"show",value:function(){this.$el.addClass("open")}},{key:"hide",value:function(){this.$el.removeClass("open")}},{key:"toggle",value:function(){this.$el.toggleClass("open")}},{key:"click $toggleButton",value:function(t){this.toggle()}},{key:"click $colorsetsList .colorsets-item",value:function(t){var e=t.$delegateTarget;if(e){var i=parseInt(e.attr("data-colorsets-index"));this.$store.dispatch("/setCurrentColorSets",i),this.hide()}}},{key:"destroy",value:function(){m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.hide()}}]),e}(oi),yi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return'\n            <div class="colorsets">\n                <div class="menu" title="Open Color Palettes">\n                    <button ref="$colorSetsChooseButton" type="button" class="color-sets-choose-btn arrow-button"></button>\n                </div>\n                <div ref="$colorSetsColorList" class="color-list"></div>\n            </div>\n        '}},{key:"load $colorSetsColorList",value:function(){var t=this.$store.dispatch("/getCurrentColorSets");return'\n            <div class="current-color-sets">\n            '+this.$store.dispatch("/getCurrentColors").map((function(t,e){return'<div class="color-item" title="'+t+'" data-index="'+e+'" data-color="'+t+'">\n                    <div class="empty"></div>\n                    <div class="color-view" style="background-color: '+t+'"></div>\n                </div>'})).join("")+"   \n            "+(t.edit?'<div class="add-color-item">+</div>':"")+"         \n            </div>\n        "}},{key:"refresh",value:function(){this.load()}},{key:"addColor",value:function(t){this.$store.dispatch("/addCurrentColor",t)}},{key:"@changeCurrentColorSets",value:function(){this.refresh()}},{key:"click $colorSetsChooseButton",value:function(t){this.$store.emit("toggleColorChooser")}},{key:"contextmenu $colorSetsColorList",value:function(t){if(t.preventDefault(),this.$store.dispatch("/getCurrentColorSets").edit){var e=new Ke(t.target).closest("color-item");if(e){var i=parseInt(e.attr("data-index"));this.$store.emit("showContextMenu",t,i)}else this.$store.emit("showContextMenu",t)}}},{key:"click $colorSetsColorList .add-color-item",value:function(t){this.addColor(this.$store.dispatch("/toColor"))}},{key:"click $colorSetsColorList .color-item",value:function(t){this.$store.dispatch("/changeColor",t.$delegateTarget.attr("data-color")),this.$store.emit("lastUpdateColor")}}]),e}(oi),mi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return'\n            <ul class="colorsets-contextmenu">\n                <li class="menu-item small-hide" data-type="remove-color">Remove color</li>\n                <li class="menu-item small-hide" data-type="remove-all-to-the-right">Remove all to the right</li>\n                <li class="menu-item" data-type="clear-palette">Clear palette</li>\n            </ul>\n        '}},{key:"show",value:function(t,e){var i=Je.pos(t);this.$el.css({top:i.clientY-10+"px",left:i.clientX+"px"}),this.$el.addClass("show"),this.selectedColorIndex=e,void 0===this.selectedColorIndex?this.$el.addClass("small"):this.$el.removeClass("small")}},{key:"hide",value:function(){this.$el.removeClass("show")}},{key:"runCommand",value:function(t){switch(t){case"remove-color":this.$store.dispatch("/removeCurrentColor",this.selectedColorIndex);break;case"remove-all-to-the-right":this.$store.dispatch("/removeCurrentColorToTheRight",this.selectedColorIndex);break;case"clear-palette":this.$store.dispatch("/clearPalette")}}},{key:"@showContextMenu",value:function(t,e){this.show(t,e)}},{key:"click $el .menu-item",value:function(t){t.preventDefault(),this.runCommand(t.$delegateTarget.attr("data-type")),this.hide()}}]),e}(oi),Ei=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="colorwheel"></div>\n                <div target="control"></div>\n                <div target="information"></div>\n                <div target="currentColorSets"></div>\n                <div target="colorSetsChooser"></div>\n                <div target="contextMenu"></div>                \n            </div>\n        '}},{key:"components",value:function(){return{colorwheel:ki,control:vi,information:xi,currentColorSets:yi,colorSetsChooser:Ti,contextMenu:mi}}}]),e}(li),Ci=function(t){function e(t){g(this,e);var i=C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.minValue=0,i.maxValue=360,i.source="hue-control",i}return E(e,t),x(e,[{key:"template",value:function(){return'\n            <div class="hue">\n                <div ref="$container" class="hue-container">\n                    <div ref="$bar" class="drag-bar"></div>\n                </div>\n            </div>\n        '}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"refreshColorUI",value:function(t){var e=this.getCaculatedDist(t);this.setColorUI(e/100*this.maxValue),this.changeColor({h:e/100*this.maxValue,type:"hsv"})}}]),e}(ci),bi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"components",value:function(){return{Hue:Ci,Opacity:fi,Eyedropper:di}}},{key:"template",value:function(){return'\n        <div class="control '+(_i?"has-eyedropper":"")+'">\n            <div target="Hue" ></div>\n            <div target="Opacity" ></div>\n            <div ref="$controlPattern" class="empty"></div>\n            <div ref="$controlColor" class="color"></div>\n            '+(_i?'\n        <div class="el-cp-color-control__left">\n          <div target="Eyedropper"></div>\n        </div>\n      ':"")+"            \n        </div>\n        "}},{key:"setBackgroundColor",value:function(){this.refs.$controlColor.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"refresh",value:function(){this.setColorUI(),this.setBackgroundColor()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(t){"chromedevtool-control"!=t&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),e}(oi),Ai="chromedevtool-palette",Si=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return'\n        <div class="color">\n            <div ref="$saturation" class="saturation">\n                <div ref="$value" class="value">\n                    <div ref="$drag_pointer" class="drag-pointer"></div>\n                </div>\n            </div>        \n        </div>        \n        '}},{key:"setBackgroundColor",value:function(t){this.$el.css("background-color",t)}},{key:"refresh",value:function(){this.setColorUI()}},{key:"caculateSV",value:function(){var t=this.drag_pointer_pos||{x:0,y:0},e=this.state.get("$el.width"),i=this.state.get("$el.height"),n=t.x/e,s=(i-t.y)/i;this.$store.dispatch("/changeColor",{type:"hsv",s:n,v:s,source:Ai})}},{key:"setColorUI",value:function(){var t=this.state.get("$el.width")*this.$store.hsv.s,e=this.state.get("$el.height")*(1-this.$store.hsv.v);this.refs.$drag_pointer.css({left:t+"px",top:e+"px"}),this.drag_pointer_pos={x:t,y:e},this.setBackgroundColor(this.$store.dispatch("/getHueColor"))}},{key:"setMainColor",value:function(t){var e=this.$el.offset(),i=this.state.get("$el.contentWidth"),n=this.state.get("$el.contentHeight"),s=Je.pos(t).pageX-e.left,r=Je.pos(t).pageY-e.top;s<0?s=0:s>i&&(s=i),r<0?r=0:r>n&&(r=n),this.refs.$drag_pointer.css({left:s+"px",top:r+"px"}),this.drag_pointer_pos={x:s,y:r},this.caculateSV()}},{key:"@changeColor",value:function(t){Ai!=t&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}},{key:"mouseup document",value:function(t){this.isDown&&(this.isDown=!1,this.$store.emit("lastUpdateColor"))}},{key:"mousemove document",value:function(t){this.isDown&&this.setMainColor(t)}},{key:"mousedown",value:function(t){this.isDown=!0,this.setMainColor(t)}},{key:"touchend document",value:function(t){this.isDown&&(this.isDown=!1,this.$store.emit("lastUpdateColor"))}},{key:"touchmove document",value:function(t){this.isDown&&this.setMainColor(t)}},{key:"touchstart",value:function(t){t.preventDefault(),this.isDown=!0,this.setMainColor(t)}}]),e}(oi),$i=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="palette"></div> \n                <div target="control"></div>\n                <div target="information"></div>\n                <div target="currentColorSets"></div>\n                <div target="colorSetsChooser"></div>\n                <div target="contextMenu"></div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Si,control:bi,information:xi,currentColorSets:yi,colorSetsChooser:Ti,contextMenu:mi}}}]),e}(li),Oi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"components",value:function(){return{Hue:Ci,Opacity:fi}}},{key:"template",value:function(){return'\n        <div class="control">\n            <div target="Hue" ></div>\n            <div target="Opacity" ></div>\n        </div>\n        '}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(t){"mini-control"!=t&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),e}(oi),Ii=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="palette"></div>\n                <div target="control"></div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Si,control:Oi}}}]),e}(li),Ni=function(t){function e(t){g(this,e);var i=C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.source="vertical-slider",i}return E(e,t),x(e,[{key:"getMaxDist",value:function(){return this.state.get("$container.height")}},{key:"setMousePosition",value:function(t){this.refs.$bar.css({top:t+"px"})}},{key:"getMousePosition",value:function(t){return Je.pos(t).pageY}},{key:"getMinPosition",value:function(){return this.refs.$container.offset().top}},{key:"getCaculatedDist",value:function(t){var e=t?this.getMousePosition(t):this.getCurrent(this.getDefaultValue()/this.maxValue);return 100-this.getDist(e)}},{key:"setColorUI",value:function(t){(t=t||this.getDefaultValue())<=this.minValue?this.refs.$bar.addClass("first").removeClass("last"):t>=this.maxValue?this.refs.$bar.addClass("last").removeClass("first"):this.refs.$bar.removeClass("last").removeClass("first");var e=1-(t||0)/this.maxValue;this.setMousePosition(this.getMaxDist()*e)}}]),e}(ci),Li=function(t){function e(t){g(this,e);var i=C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.minValue=0,i.maxValue=360,i.source="vertical-hue-control",i}return E(e,t),x(e,[{key:"template",value:function(){return'\n            <div class="hue">\n                <div ref="$container" class="hue-container">\n                    <div ref="$bar" class="drag-bar"></div>\n                </div>\n            </div>\n        '}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"refreshColorUI",value:function(t){var e=this.getCaculatedDist(t);this.setColorUI(e/100*this.maxValue),this.changeColor({h:e/100*this.maxValue,type:"hsv"})}}]),e}(Ni),Ri=function(t){function e(t){g(this,e);var i=C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.source="vertical-opacity-control",i}return E(e,t),x(e,[{key:"template",value:function(){return'\n        <div class="opacity">\n            <div ref="$container" class="opacity-container">\n                <div ref="$colorbar" class="color-bar"></div>\n                <div ref="$bar" class="drag-bar2"></div>\n            </div>\n        </div>\n        '}},{key:"refresh",value:function(){m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"refresh",this).call(this),this.setOpacityColorBar()}},{key:"setOpacityColorBar",value:function(){var t=Object.assign({},this.$store.rgb);t.a=0;var e=Ve.format(t,"rgb");t.a=1;var i=Ve.format(t,"rgb");this.refs.$colorbar.css("background","linear-gradient(to top, "+e+", "+i+")")}},{key:"getDefaultValue",value:function(){return this.$store.alpha}},{key:"refreshColorUI",value:function(t){var e=this.getCaculatedDist(t);this.setColorUI(e/100*this.maxValue),this.changeColor({a:Math.floor(e)/100*this.maxValue})}}]),e}(Ni),wi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"components",value:function(){return{Hue:Li,Opacity:Ri}}},{key:"template",value:function(){return'<div class="control"><div target="Hue" ></div><div target="Opacity" ></div></div>'}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(t){"mini-control"!=t&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),e}(oi),Di=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="palette"></div><div target="control"></div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Si,control:wi}}}]),e}(li),Pi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"components",value:function(){return{Value:ui,Opacity:fi,Eyedropper:di}}},{key:"template",value:function(){return'\n        <div class="control '+(_i?"has-eyedropper":"")+'">\n            <div target="Value" ></div>\n            <div target="Opacity" ></div>\n            <div ref="$controlPattern" class="empty"></div>\n            <div ref="$controlColor" class="color"></div>\n            '+(_i?'\n        <div class="el-cp-color-control__left">\n          <div target="Eyedropper"></div>\n        </div>\n      ':"")+"                                \n        </div>\n        "}},{key:"setBackgroundColor",value:function(){this.refs.$controlColor.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"refresh",value:function(){this.setColorUI(),this.setBackgroundColor()}},{key:"setColorUI",value:function(){this.Value.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(t){"macos-control"!=t&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),e}(oi),Ui=function(t){function e(t){g(this,e);var i=C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.width=214,i.height=214,i.thinkness=16,i.half_thinkness=i.thinkness/2,i.source="colorring",i}return E(e,t),x(e,[{key:"template",value:function(){return'\n        <div class="wheel" data-type="ring">\n            <canvas class="wheel-canvas" ref="$colorwheel" ></canvas>\n            <div class="drag-pointer" ref="$drag_pointer"></div>\n        </div>\n        '}},{key:"setColorUI",value:function(t){this.renderCanvas(),this.setHueColor(null,t)}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"setHueColor",value:function(t,e){if(this.state.get("$el.width")){var i=this.getRectangle(),n=i.minX,s=i.minY,r=i.radius,o=i.centerX,h=i.centerY,a=this.getCurrentXY(t,this.getDefaultValue(),r,o,h),l=u(a.x-o,a.y-h),c=this.getCurrentXY(null,l,r-this.half_thinkness,o,h),f=c.x,p=c.y;this.refs.$drag_pointer.css({left:f-n+"px",top:p-s+"px"}),e||this.changeColor({type:"hsv",h:l})}}}]),e}(ki),Mi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="colorring"></div>\n                <div target="palette"></div> \n                <div target="control"></div>\n                <div target="information"></div>\n                <div target="currentColorSets"></div>\n                <div target="colorSetsChooser"></div>\n                <div target="contextMenu"></div>\n            </div>\n        '}},{key:"components",value:function(){return{colorring:Ui,palette:Si,control:Pi,information:xi,currentColorSets:yi,colorSetsChooser:Ti,contextMenu:mi}}}]),e}(li),Bi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"components",value:function(){return{Hue:Li,Opacity:Ri}}},{key:"template",value:function(){return'\n        <div class="control">\n            <div target="Hue" ></div>\n            <div target="Opacity" ></div>\n        </div>\n        '}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(){this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),e}(oi),Fi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="palette"></div> \n                <div target="control"></div>\n                <div target="information"></div>\n                <div target="currentColorSets"></div>\n                <div target="colorSetsChooser"></div>\n                <div target="contextMenu"></div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Si,control:Bi,information:xi,currentColorSets:yi,colorSetsChooser:Ti,contextMenu:mi}}}]),e}(li),Hi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"components",value:function(){return{Hue:Li,Opacity:Ri}}},{key:"template",value:function(){return'\n            <div class="control">\n                <div target="Opacity" ></div>            \n                <div target="Hue" ></div>\n            </div>\n        '}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(t){"mini-control"!=t&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),e}(oi),Gi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return"\n            <div class='colorpicker-body'>\n                <div class='color-view "+(_i?"has-eyedropper":"")+'\' >\n                    <div class=\'color-view-container\'  >\n                        <div class="preview" ref="$colorview"></div>\n                    </div>\n                    '+(_i?'\n        <div class="el-cp-color-control__left">\n          <div target="Eyedropper"></div>\n        </div>\n      ':"")+'            \n                </div>\n                <div class=\'color-tool\'>\n                    <div target="palette"></div>\n                    <div target="control"></div>\n                </div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Si,control:Hi,Eyedropper:di}}},{key:"initColorWithoutChangeEvent",value:function(t){this.$store.dispatch("/initColor",t),this.refresh()}},{key:"setBackgroundColor",value:function(){var t=this.$store.dispatch("/toColor"),e=this.$store.rgb,i=Ve.brightness(e.r,e.g,e.b);this.refs.$colorview.css({"background-color":t,color:i>127?"black":"white"}),this.refs.$colorview.html(t)}},{key:"click $colorview",value:function(t){this.nextFormat()}},{key:"nextFormat",value:function(){var t=this.$store.format||"hex",e="hex";"hex"==t?e="rgb":"rgb"==t?e="hsl":"hsl"==t&&(e="hex"),this.$store.dispatch("/changeFormat",e),this.$store.emit("lastUpdateColor"),this.refresh()}},{key:"refresh",value:function(){this.setBackgroundColor()}},{key:"@changeColor",value:function(){this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),e}(li),Vi=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"components",value:function(){return{Hue:Ci,Opacity:fi,Eyedropper:di}}},{key:"template",value:function(){return'\n        <div class="control '+(_i?"has-eyedropper":"")+'">\n            <div>\n                '+(_i?'\n        <div class="el-cp-color-control__left">\n          <div target="Eyedropper"></div>\n        </div>\n      ':"")+'                                \n                <div class="color-info">\n                    <div ref="$controlPattern" class="empty"></div>\n                    <div ref="$controlColor" class="color"></div>        \n                </div>\n            </div>\n            <div target="Hue" ></div>\n            <div target="Opacity" ></div>\n\n        </div>\n        '}},{key:"setBackgroundColor",value:function(){this.refs.$controlColor.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"refresh",value:function(){this.setColorUI(),this.setBackgroundColor()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(t){"chromedevtool-control"!=t&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),e}(oi),ji=function(t){function e(){return g(this,e),C(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return E(e,t),x(e,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="palette"></div> \n                <div>\n                    <div target="control"></div>\n                    <div target="information"></div>\n                    <div target="currentColorSets"></div>\n                    <div target="colorSetsChooser"></div>\n                    <div target="contextMenu"></div>\n                </div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Si,control:Vi,information:xi,currentColorSets:yi,colorSetsChooser:Ti,contextMenu:mi}}}]),e}(li),Wi={create:function(t){switch(t.type){case"box":return new ji(t);case"macos":return new Ei(t);case"xd":return new Fi(t);case"ring":return new Mi(t);case"mini":return new Ii(t);case"vscode":return new Gi(t);case"mini-vertical":return new Di(t);default:return new $i(t)}},ColorPicker:$i,ChromeDevToolColorPicker:$i,MacOSColorPicker:Ei,RingColorPicker:Mi,MiniColorPicker:Ii,VSCodePicker:Gi,MiniVerticalColorPicker:Di},Yi="codemirror-colorview",Qi="codemirror-colorview-background",zi=["comment","builtin","qualifier","tag","property","property error","variable","variable-2"];function Xi(t,e){"setValue"==e.origin?(t.state.colorpicker.init_color_update(),t.state.colorpicker.style_color_update()):t.state.colorpicker.style_color_update(t.getCursor().line)}function Ki(t,e){t.state.colorpicker.isUpdate||(t.state.colorpicker.isUpdate=!0,t.state.colorpicker.close_color_picker(),t.state.colorpicker.init_color_update(),t.state.colorpicker.style_color_update())}function qi(t,e){Xi(t,{origin:"setValue"})}function Zi(t,e){t.state.colorpicker.keyup(e)}function Ji(t,e){t.state.colorpicker.is_edit_mode()&&t.state.colorpicker.check_mousedown(e)}function tn(t,e){Xi(t,{origin:"setValue"})}function en(t){t.state.colorpicker.close_color_picker()}function nn(t){t.state.colorpicker.hide_delay_color_picker(t.state.colorpicker.opt.hideDelay||1e3)}var sn=function(){function t(e,i){g(this,t),i="boolean"==typeof i?{mode:"edit"}:Object.assign({mode:"edit"},i||{}),this.opt=i,this.cm=e,this.markers={},this.excluded_token=this.opt.excluded_token||zi,this.opt.colorpicker?this.colorpicker=this.opt.colorpicker(this.opt):this.colorpicker=Wi.create(this.opt),this.init_event()}return x(t,[{key:"init_event",value:function(){var t,e;this.cm.on("mousedown",Ji),this.cm.on("keyup",Zi),this.cm.on("change",Xi),this.cm.on("update",Ki),this.cm.on("refresh",qi),this.cm.on("blur",nn),this.onPasteCallback=(t=this.cm,e=tn,function(i){e.call(this,t,i)}),this.onScrollEvent=function(t,e){var i=void 0;return function(n,s){i&&clearTimeout(i),i=setTimeout((function(){t(n,s)}),e||300)}}(en,50),this.cm.getWrapperElement().addEventListener("paste",this.onPasteCallback),this.is_edit_mode()&&this.cm.on("scroll",this.onScrollEvent)}},{key:"is_edit_mode",value:function(){return"edit"==this.opt.mode}},{key:"is_view_mode",value:function(){return"view"==this.opt.mode}},{key:"destroy",value:function(){this.cm.off("mousedown",Ji),this.cm.off("keyup",Zi),this.cm.off("change",Xi),this.cm.off("blur",nn),this.cm.getWrapperElement().removeEventListener("paste",this.onPasteCallback),this.is_edit_mode()&&this.cm.off("scroll",this.onScrollEvent)}},{key:"hasClass",value:function(t,e){return!!t.className&&(" "+t.className+" ").indexOf(" "+e+" ")>-1}},{key:"check_mousedown",value:function(t){this.hasClass(t.target,Qi)?this.open_color_picker(t.target.parentNode):this.close_color_picker()}},{key:"popup_color_picker",value:function(t){var e=this.cm.getCursor(),i=this,n={lineNo:e.line,ch:e.ch,color:t||"#FFFFFF",isShortCut:!0};Object.keys(this.markers).forEach((function(t){if(("#"+t).indexOf("#"+n.lineNo+":")>-1){var e=i.markers[t];e.ch<=n.ch&&n.ch<=e.ch+e.color.length&&(n.ch=e.ch,n.color=e.color,n.nameColor=e.nameColor)}})),this.open_color_picker(n)}},{key:"open_color_picker",value:function(t){var e=this,i=t.lineNo,n=t.ch,s=t.nameColor,r=t.color;if(this.colorpicker){var o=r,h=this.cm.charCoords({line:i,ch:n});this.colorpicker.show({left:h.left,top:h.bottom,isShortCut:t.isShortCut||!1,hideDelay:this.opt.hideDelay||2e3},s||r,(function(t){e.cm.replaceRange(t,{line:i,ch:n},{line:i,ch:n+o.length},"*colorpicker"),e.cm.focus(),o=t}))}}},{key:"close_color_picker",value:function(){this.colorpicker&&this.colorpicker.hide()}},{key:"hide_delay_color_picker",value:function(){this.colorpicker&&this.colorpicker.runHideDelay()}},{key:"key",value:function(t,e){return[t,e].join(":")}},{key:"keyup",value:function(t){this.colorpicker&&("Escape"==t.key||0==this.colorpicker.isShortCut)&&this.colorpicker.hide()}},{key:"init_color_update",value:function(){this.markers={}}},{key:"style_color_update",value:function(t){if(t)this.match(t);else for(var e=this.cm.lineCount(),i=0;i<e;i++)this.match(i)}},{key:"empty_marker",value:function(t,e){for(var i=e.markedSpans||[],n=0,s=i.length;n<s;n++){var r=this.key(t,i[n].from);r&&(o=i[n].marker.replacedWith,h=Yi,o&&o.className&&(" "+o.className+" ").indexOf(" "+h+" ")>-1)&&(delete this.markers[r],i[n].marker.clear())}var o,h}},{key:"match_result",value:function(t){return Ve.matches(t.text)}},{key:"submatch",value:function(t,e){var i=this;this.empty_marker(t,e);var n=this.match_result(e),s={next:0};n.forEach((function(n){i.render(s,t,e,n.color,n.nameColor)}))}},{key:"match",value:function(t){var e=this.cm.getLineHandle(t),i=this;this.cm.operation((function(){i.submatch(t,e)}))}},{key:"make_element",value:function(){var t=document.createElement("div");return t.className=Yi,this.is_edit_mode()?t.title="open color picker":t.title="",t.back_element=this.make_background_element(),t.appendChild(t.back_element),t}},{key:"make_background_element",value:function(){var t=document.createElement("div");return t.className=Qi,t}},{key:"set_state",value:function(t,e,i,n){var s=this.create_marker(t,e);return s.lineNo=t,s.ch=e,s.color=i,s.nameColor=n,s}},{key:"create_marker",value:function(t,e){return this.has_marker(t,e)||this.init_marker(t,e),this.get_marker(t,e)}},{key:"init_marker",value:function(t,e){this.markers[this.key(t,e)]=this.make_element()}},{key:"has_marker",value:function(t,e){return!!this.get_marker(t,e)}},{key:"get_marker",value:function(t,e){var i=this.key(t,e);return this.markers[i]}},{key:"update_element",value:function(t,e){t.back_element.style.backgroundColor=e}},{key:"set_mark",value:function(t,e,i){this.cm.setBookmark({line:t,ch:e},{widget:i,handleMouseEvents:!0})}},{key:"is_excluded_token",value:function(t,e){var i=this.cm.getTokenAt({line:t,ch:e},!0),n=i.type,s=i.state.state;return null==n&&"block"==s||null==n&&"top"==s||this.excluded_token.includes(n)}},{key:"render",value:function(t,e,i,n,s){var r=i.text.indexOf(n,t.next);if(!0!==this.is_excluded_token(e,r+1)){if(t.next=r+n.length,this.has_marker(e,r))return this.update_element(this.create_marker(e,r),s||n),void this.set_state(e,r,n,s);var o=this.create_marker(e,r);this.update_element(o,s||n),this.set_state(e,r,n,s||n),this.set_mark(e,r,o)}else t.next=r+n.length}}]),t}();try{var rn=i(3204)}catch(t){}function on(){var t=rn||window.CodeMirror;t&&t.defineOption("colorpicker",!1,(function(e,i,n){n&&n!=t.Init&&e.state.colorpicker&&(e.state.colorpicker.destroy(),e.state.colorpicker=null),i&&(e.state.colorpicker=new sn(e,i))}))}return on(),y({},Qe,Wi,{load:on})}()},7446:(t,e,i)=>{"use strict";const n=i(1703),s=i(1143),r=function(t,e){this.withPositions=t,this.withSource=e};r.precedence={},[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach((function(t,e){t.forEach((function(t){r.precedence[t]=e+1}))})),r.prototype.isRightAssociative=function(t){return"**"===t||"??"===t},r.prototype.swapLocations=function(t,e,i,n){this.withPositions&&(t.loc.start=e.loc.start,t.loc.end=i.loc.end,this.withSource&&(t.loc.source=n.lexer._input.substring(t.loc.start.offset,t.loc.end.offset)))},r.prototype.resolveLocations=function(t,e,i,n){this.withPositions&&(t.loc.start.offset>e.loc.start.offset&&(t.loc.start=e.loc.start),t.loc.end.offset<i.loc.end.offset&&(t.loc.end=i.loc.end),this.withSource&&(t.loc.source=n.lexer._input.substring(t.loc.start.offset,t.loc.end.offset)))},r.prototype.resolvePrecedence=function(t,e){let i,n,s;return"call"===t.kind?this.resolveLocations(t,t.what,t,e):"propertylookup"===t.kind||"staticlookup"===t.kind||"offsetlookup"===t.kind&&t.offset?this.resolveLocations(t,t.what,t.offset,e):"bin"===t.kind?t.right&&!t.right.parenthesizedExpression&&("bin"===t.right.kind?(n=r.precedence[t.type],s=r.precedence[t.right.type],n&&s&&s<=n&&(t.type!==t.right.type||!this.isRightAssociative(t.type))&&(i=t.right,t.right=t.right.left,this.swapLocations(t,t.left,t.right,e),i.left=this.resolvePrecedence(t,e),this.swapLocations(i,i.left,i.right,e),t=i)):"retif"===t.right.kind&&(n=r.precedence[t.type],s=r.precedence["?"],n&&s&&s<=n&&(i=t.right,t.right=t.right.test,this.swapLocations(t,t.left,t.right,e),i.test=this.resolvePrecedence(t,e),this.swapLocations(i,i.test,i.falseExpr,e),t=i))):"silent"!==t.kind&&"cast"!==t.kind||!t.expr||t.expr.parenthesizedExpression?"unary"===t.kind?t.what&&!t.what.parenthesizedExpression&&("bin"===t.what.kind?(i=t.what,t.what=t.what.left,this.swapLocations(t,t,t.what,e),i.left=this.resolvePrecedence(t,e),this.swapLocations(i,i.left,i.right,e),t=i):"retif"===t.what.kind&&(i=t.what,t.what=t.what.test,this.swapLocations(t,t,t.what,e),i.test=this.resolvePrecedence(t,e),this.swapLocations(i,i.test,i.falseExpr,e),t=i)):"retif"===t.kind?t.falseExpr&&"retif"===t.falseExpr.kind&&!t.falseExpr.parenthesizedExpression&&(i=t.falseExpr,t.falseExpr=i.test,this.swapLocations(t,t.test,t.falseExpr,e),i.test=this.resolvePrecedence(t,e),this.swapLocations(i,i.test,i.falseExpr,e),t=i):"assign"===t.kind?t.right&&"bin"===t.right.kind&&!t.right.parenthesizedExpression&&(n=r.precedence["="],s=r.precedence[t.right.type],n&&s&&s<n&&(i=t.right,t.right=t.right.left,i.left=t,this.swapLocations(i,i.left,t.right,e),t=i)):"expressionstatement"===t.kind&&this.swapLocations(t,t.expression,t,e):"bin"===t.expr.kind?(i=t.expr,t.expr=t.expr.left,this.swapLocations(t,t,t.expr,e),i.left=this.resolvePrecedence(t,e),this.swapLocations(i,i.left,i.right,e),t=i):"retif"===t.expr.kind&&(i=t.expr,t.expr=t.expr.test,this.swapLocations(t,t,t.expr,e),i.test=this.resolvePrecedence(t,e),this.swapLocations(i,i.test,i.falseExpr,e),t=i),t},r.prototype.prepare=function(t,e,i){let o=null;(this.withPositions||this.withSource)&&(o=i.position());const h=this,a=function(){let l=null;const c=Array.prototype.slice.call(arguments);if(c.push(e),h.withPositions||h.withSource){let t=null;h.withSource&&(t=i.lexer._input.substring(o.offset,i.prev[2])),l=new n(t,o,new s(i.prev[0],i.prev[1],i.prev[2])),c.push(l)}t||(t=c.shift());const u=h[t];if("function"!=typeof u)throw new Error('Undefined node "'+t+'"');const f=Object.create(u.prototype);return u.apply(f,c),a.instance=f,a.trailingComments&&(f.trailingComments=a.trailingComments),"function"==typeof a.postBuild&&a.postBuild(f),i.debug&&delete r.stack[a.stackUid],h.resolvePrecedence(f,i)};return i.debug&&(r.stack||(r.stack={},r.stackUid=1),r.stack[++r.stackUid]={position:o,stack:(new Error).stack.split("\n").slice(3,5)},a.stackUid=r.stackUid),a.setTrailingComments=function(t){a.instance?a.instance.setTrailingComments(t):a.trailingComments=t},a.destroy=function(t){e&&(t?t.leadingComments?t.leadingComments=e.concat(t.leadingComments):t.leadingComments=e:i._docIndex=i._docs.length-e.length),i.debug&&delete r.stack[a.stackUid]},a},r.prototype.checkNodes=function(){const t=[];for(const e in r.stack)r.stack.hasOwnProperty(e)&&t.push(r.stack[e]);return r.stack={},t},[i(8965),i(8731),i(691),i(3094),i(9395),i(914),i(9590),i(5600),i(3096),i(5798),i(9259),i(5077),i(9386),i(3527),i(9510),i(2555),i(8593),i(687),i(3224),i(8423),i(3233),i(2266),i(370),i(1847),i(7895),i(8714),i(9315),i(5521),i(6712),i(2682),i(522),i(3444),i(8446),i(2826),i(9979),i(6792),i(3896),i(6846),i(1433),i(7352),i(2693),i(7740),i(1911),i(2872),i(535),i(3034),i(3982),i(7386),i(3765),i(7718),i(9483),i(2324),i(8261),i(1632),i(1920),i(1695),i(5008),i(5734),i(120),i(2743),i(8126),i(1986),i(7614),i(814),i(9238),i(7769),i(7461),i(1658),i(6038),i(9570),i(2210),i(3565),i(7366),i(7692),i(8117),i(2795),i(202),i(69),i(6909),i(8871),i(882),i(2238),i(1777),i(1095),i(9324),i(6291),i(4755),i(7788),i(669),i(7577),i(8653),i(206),i(330),i(9279),i(3832),i(8401),i(3590),i(2460),i(838),i(4960),i(8419),i(85),i(6442),i(1685),i(4954),i(2288),i(6001),i(7406),i(6062)].forEach((function(t){r.prototype[t.kind]=t})),t.exports=r},8965:(t,e,i)=>{"use strict";const n=i(6846),s="array";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.items=e,this.shortForm=t}))},8731:(t,e,i)=>{"use strict";const n=i(6846),s="arrowfunc";t.exports=n.extends(s,(function(t,e,i,r,o,h,a,l){n.apply(this,[s,a,l]),this.arguments=t,this.byref=e,this.body=i,this.type=r,this.nullable=o,this.isStatic=h||!1}))},691:(t,e,i)=>{"use strict";const n=i(6846),s="assign";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,r,o]),this.left=t,this.right=e,this.operator=i}))},3094:(t,e,i)=>{"use strict";const n=i(6846),s="assignref";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.left=t,this.right=e}))},914:(t,e,i)=>{"use strict";const n=i(814),s="attrgroup";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.attrs=t||[]}))},9395:(t,e,i)=>{"use strict";const n=i(814),s="attribute";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.name=t,this.args=e}))},9590:(t,e,i)=>{"use strict";const n=i(2210);t.exports=n.extends("bin",(function(t,e,i,s,r){n.apply(this,["bin",s,r]),this.type=t,this.left=e,this.right=i}))},5600:(t,e,i)=>{"use strict";const n=i(6291),s="block";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[t||s,i,r]),this.children=e.filter(Boolean)}))},3096:(t,e,i)=>{"use strict";const n=i(1632),s="boolean";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,t,e,i,r])}))},5798:(t,e,i)=>{"use strict";const n=i(6291),s="break";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.level=t}))},9259:(t,e,i)=>{"use strict";const n=i(6846),s="byref";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.what=t}))},5077:(t,e,i)=>{"use strict";const n=i(6846),s="call";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.what=t,this.arguments=e}))},9386:(t,e,i)=>{"use strict";const n=i(6291),s="case";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.test=t,this.body=e}))},3527:(t,e,i)=>{"use strict";const n=i(2210),s="cast";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,r,o]),this.type=t,this.raw=e,this.expr=i}))},9510:(t,e,i)=>{"use strict";const n=i(6291),s="catch";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,r,o]),this.body=t,this.what=e,this.variable=i}))},2555:(t,e,i)=>{"use strict";const n=i(8714),s="class";t.exports=n.extends(s,(function(t,e,i,r,o,h,a){n.apply(this,[s,t,h,a]),this.isAnonymous=!t,this.extends=e,this.implements=i,this.body=r,this.attrGroups=[],this.parseFlags(o)}))},8593:(t,e,i)=>{"use strict";const n=i(1847),s="classconstant",r=n.extends(s,(function(t,e,i,r,o,h){n.apply(this,[t||s,e,o,h]),this.parseFlags(i),this.attrGroups=r}));r.prototype.parseFlags=function(t){-1===t[0]?this.visibility="":null===t[0]?this.visibility=null:0===t[0]?this.visibility="public":1===t[0]?this.visibility="protected":2===t[0]&&(this.visibility="private")},t.exports=r},687:(t,e,i)=>{"use strict";const n=i(6846),s="clone";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.what=t}))},3224:(t,e,i)=>{"use strict";const n=i(6846),s="closure";t.exports=n.extends(s,(function(t,e,i,r,o,h,a,l){n.apply(this,[s,a,l]),this.uses=i,this.arguments=t,this.byref=e,this.type=r,this.nullable=o,this.isStatic=h||!1,this.body=null,this.attrGroups=[]}))},8423:(t,e,i)=>{"use strict";const n=i(814);t.exports=n.extends("comment",(function(t,e,i,s){n.apply(this,[t,i,s]),this.value=e}))},3233:(t,e,i)=>{"use strict";const n=i(8423),s="commentblock";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,t,e,i])}))},2266:(t,e,i)=>{"use strict";const n=i(8423),s="commentline";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,t,e,i])}))},370:(t,e,i)=>{"use strict";const n=i(814),s="constant";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.name=t,this.value=e}))},1847:(t,e,i)=>{"use strict";const n=i(6291),s="constantstatement";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[t||s,i,r]),this.constants=e}))},7895:(t,e,i)=>{"use strict";const n=i(6291),s="continue";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.level=t}))},8714:(t,e,i)=>{"use strict";const n=i(6291),s="declaration",r=n.extends(s,(function(t,e,i,r){n.apply(this,[t||s,i,r]),this.name=e}));r.prototype.parseFlags=function(t){this.isAbstract=1===t[2],this.isFinal=2===t[2],"class"!==this.kind&&(-1===t[0]?this.visibility="":null===t[0]?this.visibility=null:0===t[0]?this.visibility="public":1===t[0]?this.visibility="protected":2===t[0]&&(this.visibility="private"),this.isStatic=1===t[1])},t.exports=r},9315:(t,e,i)=>{"use strict";const n=i(5600),s="declare",r=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,e,r,o]),this.directives=t,this.mode=i}));r.MODE_SHORT="short",r.MODE_BLOCK="block",r.MODE_NONE="none",t.exports=r},5521:(t,e,i)=>{"use strict";const n=i(814),s="declaredirective";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.key=t,this.value=e}))},6712:(t,e,i)=>{"use strict";const n=i(6291);t.exports=n.extends("do",(function(t,e,i,s){n.apply(this,["do",i,s]),this.test=t,this.body=e}))},2682:(t,e,i)=>{"use strict";const n=i(6291),s="echo";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.shortForm=e,this.expressions=t}))},522:(t,e,i)=>{"use strict";const n=i(6846),s="empty";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.expression=t}))},3444:(t,e,i)=>{"use strict";const n=i(1632),s="encapsed",r=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,t,e,r,o]),this.type=i}));r.TYPE_STRING="string",r.TYPE_SHELL="shell",r.TYPE_HEREDOC="heredoc",r.TYPE_OFFSET="offset",t.exports=r},8446:(t,e,i)=>{"use strict";const n=i(6846),s="encapsedpart";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,r,o]),this.expression=t,this.syntax=e,this.curly=i}))},2826:(t,e,i)=>{"use strict";const n=i(6846),s="entry";t.exports=n.extends(s,(function(t,e,i,r,o,h){n.apply(this,[s,o,h]),this.key=t,this.value=e,this.byRef=i,this.unpack=r}))},9979:(t,e,i)=>{"use strict";const n=i(814),s="error";t.exports=n.extends(s,(function(t,e,i,r,o,h){n.apply(this,[s,o,h]),this.message=t,this.token=e,this.line=i,this.expected=r}))},6792:(t,e,i)=>{"use strict";const n=i(6846),s="eval";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.source=t}))},3896:(t,e,i)=>{"use strict";const n=i(6846),s="exit";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.expression=t,this.useDie=e}))},6846:(t,e,i)=>{"use strict";const n=i(814),s="expression";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[t||s,e,i])}))},1433:(t,e,i)=>{"use strict";const n=i(6291),s="expressionstatement";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.expression=t}))},7352:(t,e,i)=>{"use strict";const n=i(6291);t.exports=n.extends("for",(function(t,e,i,s,r,o,h){n.apply(this,["for",o,h]),this.init=t,this.test=e,this.increment=i,this.shortForm=r,this.body=s}))},2693:(t,e,i)=>{"use strict";const n=i(6291),s="foreach";t.exports=n.extends(s,(function(t,e,i,r,o,h,a){n.apply(this,[s,h,a]),this.source=t,this.key=e,this.value=i,this.shortForm=o,this.body=r}))},7740:(t,e,i)=>{"use strict";const n=i(8714),s="function";t.exports=n.extends(s,(function(t,e,i,r,o,h,a){n.apply(this,[s,t,h,a]),this.arguments=e,this.byref=i,this.type=r,this.nullable=o,this.body=null,this.attrGroups=[]}))},1911:(t,e,i)=>{"use strict";const n=i(6291),s="global";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.items=t}))},2872:(t,e,i)=>{"use strict";const n=i(6291),s="goto";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.label=t}))},535:(t,e,i)=>{"use strict";const n=i(6291),s="halt";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.after=t}))},3034:(t,e,i)=>{"use strict";const n=i(814),s="identifier",r=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.name=t}));t.exports=r},3982:(t,e,i)=>{"use strict";const n=i(6291);t.exports=n.extends("if",(function(t,e,i,s,r,o){n.apply(this,["if",r,o]),this.test=t,this.body=e,this.alternate=i,this.shortForm=s}))},7386:(t,e,i)=>{"use strict";const n=i(6846),s="include";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,r,o]),this.once=t,this.require=e,this.target=i}))},3765:(t,e,i)=>{"use strict";const n=i(1632),s="inline";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,t,e,i,r])}))},7718:(t,e,i)=>{"use strict";const n=i(8714),s="interface";t.exports=n.extends(s,(function(t,e,i,r,o,h){n.apply(this,[s,t,o,h]),this.extends=e,this.body=i,this.attrGroups=r}))},9483:(t,e,i)=>{"use strict";const n=i(6846),s="isset";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.variables=t}))},2324:(t,e,i)=>{"use strict";const n=i(6291),s="label";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.name=t}))},8261:(t,e,i)=>{"use strict";const n=i(6846),s="list";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.items=t,this.shortForm=e}))},1632:(t,e,i)=>{"use strict";const n=i(6846),s="literal";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[t||s,r,o]),this.value=e,i&&(this.raw=i)}))},1703:t=>{"use strict";t.exports=function(t,e,i){this.source=t,this.start=e,this.end=i}},1920:(t,e,i)=>{"use strict";const n=i(6846),s="lookup";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[t||s,r,o]),this.what=e,this.offset=i}))},1695:(t,e,i)=>{"use strict";const n=i(1632),s="magic";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,t,e,i,r])}))},5008:(t,e,i)=>{"use strict";const n=i(6846),s="match";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.cond=t,this.arms=e}))},5734:(t,e,i)=>{"use strict";const n=i(6846),s="matcharm";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.conds=t,this.body=e}))},120:(t,e,i)=>{"use strict";const n=i(7740),s="method";t.exports=n.extends(s,(function(){n.apply(this,arguments),this.kind=s}))},2743:(t,e,i)=>{"use strict";const n=i(882),s="name",r=n.extends(s,(function t(e,i,r,o){n.apply(this,[s,r,o]),i?this.resolution=t.RELATIVE_NAME:1===e.length?this.resolution=t.UNQUALIFIED_NAME:e[0]?this.resolution=t.QUALIFIED_NAME:this.resolution=t.FULL_QUALIFIED_NAME,this.name=e.join("\\")}));r.UNQUALIFIED_NAME="uqn",r.QUALIFIED_NAME="qn",r.FULL_QUALIFIED_NAME="fqn",r.RELATIVE_NAME="rn",t.exports=r},1986:(t,e,i)=>{"use strict";const n=i(6846),s="namedargument";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.name=t,this.value=e}))},8126:(t,e,i)=>{"use strict";const n=i(5600),s="namespace";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,e,r,o]),this.name=t,this.withBrackets=i||!1}))},7614:(t,e,i)=>{"use strict";const n=i(6846);t.exports=n.extends("new",(function(t,e,i,s){n.apply(this,["new",i,s]),this.what=t,this.arguments=e}))},814:t=>{"use strict";const e=function(t,e,i){this.kind=t,e&&(this.leadingComments=e),i&&(this.loc=i)};e.prototype.setTrailingComments=function(t){this.trailingComments=t},e.prototype.destroy=function(t){if(!t)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(t.leadingComments?t.leadingComments=Array.concat(this.leadingComments,t.leadingComments):t.leadingComments=this.leadingComments),this.trailingComments&&(t.trailingComments?t.trailingComments=Array.concat(this.trailingComments,t.trailingComments):t.trailingComments=this.trailingComments),t},e.prototype.includeToken=function(t){return this.loc&&(this.loc.end&&(this.loc.end.line=t.lexer.yylloc.last_line,this.loc.end.column=t.lexer.yylloc.last_column,this.loc.end.offset=t.lexer.offset),t.ast.withSource&&(this.loc.source=t.lexer._input.substring(this.loc.start.offset,t.lexer.offset))),this},e.extends=function(t,e){return e.prototype=Object.create(this.prototype),e.extends=this.extends,e.prototype.constructor=e,e.kind=t,e},t.exports=e},9238:(t,e,i)=>{"use strict";const n=i(814),s="noop";t.exports=n.extends(s,(function(t,e){n.apply(this,[s,t,e])}))},7769:(t,e,i)=>{"use strict";const n=i(1632),s="nowdoc";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,t,e,r,o]),this.label=i}))},7461:(t,e,i)=>{"use strict";const n=i(814),s="nullkeyword";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.raw=t}))},1658:(t,e,i)=>{"use strict";const n=i(1920),s="nullsafepropertylookup";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,t,e,i,r])}))},6038:(t,e,i)=>{"use strict";const n=i(1632),s="number";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,t,e,i,r])}))},9570:(t,e,i)=>{"use strict";const n=i(1920),s="offsetlookup";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,t,e,i,r])}))},2210:(t,e,i)=>{"use strict";const n=i(6846),s="operation";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[t||s,e,i])}))},3565:(t,e,i)=>{"use strict";const n=i(8714),s="parameter";t.exports=n.extends(s,(function(t,e,i,r,o,h,a,l,c){n.apply(this,[s,t,l,c]),this.value=i,this.type=e,this.byref=r,this.variadic=o,this.nullable=h,this.flags=a||0,this.attrGroups=[]}))},7366:(t,e,i)=>{"use strict";const n=i(882),s="parentreference",r=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.raw=t}));t.exports=r},1143:t=>{"use strict";t.exports=function(t,e,i){this.line=t,this.column=e,this.offset=i}},7692:(t,e,i)=>{"use strict";const n=i(2210),s="post";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.type=t,this.what=e}))},8117:(t,e,i)=>{"use strict";const n=i(2210);t.exports=n.extends("pre",(function(t,e,i,s){n.apply(this,["pre",i,s]),this.type=t,this.what=e}))},2795:(t,e,i)=>{"use strict";const n=i(6846),s="print";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.expression=t}))},202:(t,e,i)=>{"use strict";const n=i(5600),s="program";t.exports=n.extends(s,(function(t,e,i,r,o,h){n.apply(this,[s,t,o,h]),this.errors=e,i&&(this.comments=i),r&&(this.tokens=r)}))},69:(t,e,i)=>{"use strict";const n=i(6291),s="property";t.exports=n.extends(s,(function(t,e,i,r,o,h,a){n.apply(this,[s,h,a]),this.name=t,this.value=e,this.nullable=i,this.type=r,this.attrGroups=o}))},6909:(t,e,i)=>{"use strict";const n=i(1920),s="propertylookup";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,t,e,i,r])}))},8871:(t,e,i)=>{"use strict";const n=i(6291),s="propertystatement",r=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,r,o]),this.properties=e,this.parseFlags(i)}));r.prototype.parseFlags=function(t){-1===t[0]?this.visibility="":null===t[0]?this.visibility=null:0===t[0]?this.visibility="public":1===t[0]?this.visibility="protected":2===t[0]&&(this.visibility="private"),this.isStatic=1===t[1]},t.exports=r},882:(t,e,i)=>{"use strict";const n=i(814),s="reference",r=n.extends(s,(function(t,e,i){n.apply(this,[t||s,e,i])}));t.exports=r},2238:(t,e,i)=>{"use strict";const n=i(6846),s="retif";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,r,o]),this.test=t,this.trueExpr=e,this.falseExpr=i}))},1777:(t,e,i)=>{"use strict";const n=i(6291),s="return";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.expr=t}))},1095:(t,e,i)=>{"use strict";const n=i(882),s="selfreference",r=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.raw=t}));t.exports=r},9324:(t,e,i)=>{"use strict";const n=i(6846),s="silent";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.expr=t}))},6291:(t,e,i)=>{"use strict";const n=i(814),s="statement";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[t||s,e,i])}))},4755:(t,e,i)=>{"use strict";const n=i(6291),s="static";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.variables=t}))},669:(t,e,i)=>{"use strict";const n=i(1920),s="staticlookup";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,t,e,i,r])}))},7577:(t,e,i)=>{"use strict";const n=i(882),s="staticreference",r=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.raw=t}));t.exports=r},7788:(t,e,i)=>{"use strict";const n=i(814),s="staticvariable";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.variable=t,this.defaultValue=e}))},8653:(t,e,i)=>{"use strict";const n=i(1632),s="string";t.exports=n.extends(s,(function(t,e,i,r,o,h){n.apply(this,[s,e,r,o,h]),this.unicode=i,this.isDoubleQuote=t}))},206:(t,e,i)=>{"use strict";const n=i(6291),s="switch";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,r,o]),this.test=t,this.body=e,this.shortForm=i}))},330:(t,e,i)=>{"use strict";const n=i(6291),s="throw";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.what=t}))},9279:(t,e,i)=>{"use strict";const n=i(8714),s="trait";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,t,i,r]),this.body=e}))},3832:(t,e,i)=>{"use strict";const n=i(814),s="traitalias";t.exports=n.extends(s,(function(t,e,i,r,o,h){n.apply(this,[s,o,h]),this.trait=t,this.method=e,this.as=i,this.visibility="",r&&(0===r[0]?this.visibility="public":1===r[0]?this.visibility="protected":2===r[0]&&(this.visibility="private"))}))},8401:(t,e,i)=>{"use strict";const n=i(814),s="traitprecedence";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,r,o]),this.trait=t,this.method=e,this.instead=i}))},3590:(t,e,i)=>{"use strict";const n=i(814),s="traituse";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.traits=t,this.adaptations=e}))},2460:(t,e,i)=>{"use strict";const n=i(6291);t.exports=n.extends("try",(function(t,e,i,s,r){n.apply(this,["try",s,r]),this.body=t,this.catches=e,this.always=i}))},838:(t,e,i)=>{"use strict";const n=i(882),s="typereference",r=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.name=t,this.raw=e}));r.types=["int","float","string","bool","object","array","callable","iterable","void","static"],t.exports=r},4960:(t,e,i)=>{"use strict";const n=i(2210),s="unary";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.type=t,this.what=e}))},8419:(t,e,i)=>{"use strict";const n=i(8714),s="uniontype";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,null,e,i]),this.types=t}))},85:(t,e,i)=>{"use strict";const n=i(6291),s="unset";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.variables=t}))},6442:(t,e,i)=>{"use strict";const n=i(6291),s="usegroup";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,r,o]),this.name=t,this.type=e,this.items=i}))},1685:(t,e,i)=>{"use strict";const n=i(6291),s="useitem",r=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,r,o]),this.name=t,this.alias=e,this.type=i}));r.TYPE_CONST="const",r.TYPE_FUNCTION="function",t.exports=r},4954:(t,e,i)=>{"use strict";const n=i(6846),s="variable";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.name=t,this.curly=e||!1}))},2288:(t,e,i)=>{"use strict";const n=i(6846),s="variadic";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.what=t}))},6001:(t,e,i)=>{"use strict";const n=i(6291),s="while";t.exports=n.extends(s,(function(t,e,i,r,o){n.apply(this,[s,r,o]),this.test=t,this.body=e,this.shortForm=i}))},7406:(t,e,i)=>{"use strict";const n=i(6846),s="yield";t.exports=n.extends(s,(function(t,e,i,r){n.apply(this,[s,i,r]),this.value=t,this.key=e}))},6062:(t,e,i)=>{"use strict";const n=i(6846),s="yieldfrom";t.exports=n.extends(s,(function(t,e,i){n.apply(this,[s,e,i]),this.value=t}))},3638:(t,e,i)=>{"use strict";const n=i(6122),s=i(5079),r=i(3155),o=i(7446);function h(t,e){const i=Object.keys(t);let n=i.length;for(;n--;){const s=i[n],r=t[s];null===r?delete e[s]:"function"==typeof r?e[s]=r.bind(e):Array.isArray(r)?e[s]=Array.isArray(e[s])?e[s].concat(r):r:e[s]="object"==typeof r&&"object"==typeof e[s]?h(r,e[s]):r}return e}const a=function(t){if("function"==typeof this)return new this(t);if(this.tokens=r,this.lexer=new n(this),this.ast=new o,this.parser=new s(this.lexer,this.ast),t&&"object"==typeof t){if(t.parser&&(t.lexer||(t.lexer={}),t.parser.version)){if("string"==typeof t.parser.version){let e=t.parser.version.split(".");if(e=100*parseInt(e[0])+parseInt(e[1]),isNaN(e))throw new Error("Bad version number : "+t.parser.version);t.parser.version=e}else if("number"!=typeof t.parser.version)throw new Error("Expecting a number for version");if(t.parser.version<500||t.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}h(t,this),this.lexer.version=this.parser.version}},l=function(t){return"function"==typeof t.write?t.toString():t};a.create=function(t){return new a(t)},a.parseEval=function(t,e){return new a(e).parseEval(t)},a.prototype.parseEval=function(t){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,t=l(t),this.parser.parse(t,"eval")},a.parseCode=function(t,e,i){return"object"!=typeof e||i||(i=e,e="unknown"),new a(i).parseCode(t,e)},a.prototype.parseCode=function(t,e){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,t=l(t),this.parser.parse(t,e)},a.tokenGetAll=function(t,e){return new a(e).tokenGetAll(t)},a.prototype.tokenGetAll=function(t){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,t=l(t);const e=this.lexer.EOF,i=this.tokens.values;this.lexer.setInput(t);let n=this.lexer.lex()||e;const s=[];for(;n!=e;){let t=this.lexer.yytext;i.hasOwnProperty(n)&&(t=[i[n],t,this.lexer.yylloc.first_line]),s.push(t),n=this.lexer.lex()||e}return s},t.exports=a,t.exports.tokens=r,t.exports.lexer=n,t.exports.AST=o,t.exports.parser=s,t.exports.combine=h,t.exports.default=a},6122:(t,e,i)=>{"use strict";const n=function(t){this.engine=t,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=800,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};n.prototype.setInput=function(t){return this._input=t,this.size=t.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this},n.prototype.input=function(){const t=this._input[this.offset];return t?(this.yytext+=t,this.offset++,"\r"===t&&"\n"===this._input[this.offset]&&(this.yytext+="\n",this.offset++),"\n"===t||"\r"===t?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,t):""},n.prototype.unput=function(t){if(1===t)this.offset--,"\n"===this._input[this.offset]&&"\r"===this._input[this.offset-1]&&(this.offset--,t++),"\r"===this._input[this.offset]||"\n"===this._input[this.offset]?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-t);else if(t>0)if(this.offset-=t,t<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-t),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(let t=0;t<this.yytext.length;t++){let e=this.yytext[t];"\r"===e?(e=this.yytext[++t],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,"\n"!==e&&("\r"===e?this.yylloc.last_line++:this.yylloc.last_column++)):"\n"===e?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this},n.prototype.tryMatch=function(t){return t===this.ahead(t.length)},n.prototype.tryMatchCaseless=function(t){return t===this.ahead(t.length).toLowerCase()},n.prototype.ahead=function(t){let e=this._input.substring(this.offset,this.offset+t);return"\r"===e[e.length-1]&&"\n"===this._input[this.offset+t+1]&&(e+="\n"),e},n.prototype.consume=function(t){for(let e=0;e<t;e++){const t=this._input[this.offset];if(!t)break;this.yytext+=t,this.offset++,"\r"===t&&"\n"===this._input[this.offset]&&(this.yytext+="\n",this.offset++,e++),"\n"===t||"\r"===t?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this},n.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}},n.prototype.setState=function(t){return this.yytext=t.yytext,this.offset=t.offset,this.yylineno=t.yylineno,this.yyprevcol=t.yyprevcol,this.yylloc=t.yylloc,t.heredoc_label&&(this.heredoc_label=t.heredoc_label),this},n.prototype.appendToken=function(t,e){return this.tokens.push([t,e]),this},n.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;let t=this.next()||this.lex();if(!this.all_tokens){for(;t===this.tok.T_WHITESPACE||!this.comment_tokens&&(t===this.tok.T_COMMENT||t===this.tok.T_DOC_COMMENT)||t===this.tok.T_OPEN_TAG;)t=this.next()||this.lex();if(t==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(t===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),t},n.prototype.begin=function(t){if(this.conditionStack.push(t),this.curCondition=t,this.stateCb=this["match"+t],"function"!=typeof this.stateCb)throw new Error('Undefined condition state "'+t+'"');return this},n.prototype.popState=function(){const t=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],"function"!=typeof this.stateCb)throw new Error('Undefined condition state "'+this.curCondition+'"');return t},n.prototype.next=function(){let t;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(t=this.tokens.shift(),"object"==typeof t[1]?this.setState(t[1]):this.consume(t[1]),t=t[0]):t=this.stateCb.apply(this,[]),this.offset>=this.size&&0===this.tokens.length&&(this.done=!0),this.debug){let e=t;e="number"==typeof e?this.engine.tokens.values[e]:'"'+e+'"';const i=new Error(e+"\tfrom "+this.yylloc.first_line+","+this.yylloc.first_column+"\t - to "+this.yylloc.last_line+","+this.yylloc.last_column+'\t"'+this.yytext+'"');console.error(i.stack)}return t},[i(1782),i(990),i(4775),i(8851),i(7497),i(5446),i(3021),i(8860),i(7599)].forEach((function(t){for(const e in t)n.prototype[e]=t[e]})),t.exports=n},1782:t=>{"use strict";t.exports={matchST_ATTRIBUTE:function(){let t=0,e=this.input();if(this.is_WHITESPACE()){do{e=this.input()}while(this.is_WHITESPACE());return this.unput(1),null}switch(e){case"]":return 0===t?this.popState():t--,"]";case"(":case")":case":":case"=":return this.consume_TOKEN();case"[":return t++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":if("/"===this._input[this.offset])return this.T_COMMENT();if("*"===this._input[this.offset])return this.input(),this.T_DOC_COMMENT()}if(this.is_LABEL_START()||"\\"===e){for(;this.offset<this.size;){const t=this.input();if(!this.is_LABEL()&&"\\"!==t){t&&this.unput(1);break}}return this.tok.T_STRING}if(this.is_NUM())return this.consume_NUM();throw new Error(`Bad terminal sequence "${e}" at line ${this.yylineno} (offset ${this.offset})`)}}},990:t=>{"use strict";t.exports={T_COMMENT:function(){for(;this.offset<this.size;){const t=this.input();if("\n"===t||"\r"===t)return this.tok.T_COMMENT;if("?"===t&&!this.aspTagMode&&">"===this._input[this.offset])return this.unput(1),this.tok.T_COMMENT;if("%"===t&&this.aspTagMode&&">"===this._input[this.offset])return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){let t=this.input(),e=this.tok.T_COMMENT;if("*"===t){if(t=this.input(),this.is_WHITESPACE()&&(e=this.tok.T_DOC_COMMENT),"/"===t)return e;this.unput(1)}for(;this.offset<this.size;)if(t=this.input(),"*"===t&&"/"===this._input[this.offset]){this.input();break}return e}}},4775:t=>{"use strict";t.exports={nextINITIAL:function(){return this.conditionStack.length>1&&"INITIAL"===this.conditionStack[this.conditionStack.length-1]?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){let t=this.input();if("<"==t)if(t=this.ahead(1),"?"==t){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}if(this.tryMatchCaseless("?php")&&(t=this._input[this.offset+4]," "===t||"\t"===t||"\n"===t||"\r"===t)){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&"%"==t){if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}return this.yytext.length>0&&this.tok.T_INLINE_HTML}}},8851:t=>{"use strict";let e=10,i="2147483648";e=19,i="9223372036854775808",t.exports={consume_NUM:function(){let t=this.yytext[0],e="."===t;if("0"===t)if(t=this.input(),"x"===t||"X"===t){if(t=this.input(),"_"!==t&&this.is_HEX())return this.consume_HNUM();this.unput(t?2:1)}else if("b"===t||"B"===t){if(t=this.input(),"_"!==t&&"0"===t||"1"===t)return this.consume_BNUM();this.unput(t?2:1)}else this.is_NUM()||t&&this.unput(1);for(;this.offset<this.size;){const i=t;if(t=this.input(),"_"===t){if("_"===i){this.unput(2);break}if("."===i){this.unput(1);break}if("e"===i||"E"===i){this.unput(2);break}}else{if("."===t){if(e){this.unput(1);break}if("_"===i){this.unput(2);break}e=!0;continue}if("e"===t||"E"===t){if("_"===i){this.unput(1);break}let e=2;if(t=this.input(),"+"!==t&&"-"!==t||(e=3,t=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(t?e:e-1);break}}if(!this.is_NUM()){t&&this.unput(1);break}}return e?this.tok.T_DNUMBER:this.yytext.length<18||this.yytext.length<19||19==this.yytext.length&&this.yytext<"9223372036854775808"?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){const t=this.input();if(!this.is_HEX()){t&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){const t=this.input();if(!this.is_NUM()){t&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){let t;for(;this.offset<this.size;)if(t=this.input(),"0"!==t&&"1"!==t&&"_"!==t){t&&this.unput(1);break}return this.tok.T_LNUMBER}}},7497:t=>{"use strict";t.exports={matchST_LOOKING_FOR_PROPERTY:function(){let t=this.input();if("-"===t){if(t=this.input(),">"===t)return this.tok.T_OBJECT_OPERATOR;t&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),t&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){let t=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),t=this.input(),"["===t||"}"===t)return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else t&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){const t=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if("]"===t)return this.popState(),"]";if("$"===t){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||"\\"===t||"'"===t||"#"===t)return this.tok.T_ENCAPSED_AND_WHITESPACE;if("["===t||"{"===t||"}"===t||'"'===t||"`"===t||this.is_TOKEN())return t;throw new Error("Unexpected terminal")}}},5446:t=>{"use strict";t.exports={matchST_IN_SCRIPTING:function(){let t=this.input();switch(t){case" ":case"\t":case"\n":case"\r":case"\r\n":return this.T_WHITESPACE();case"#":return"["===this._input[this.offset]?(this.input(),this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return"/"===this._input[this.offset]?this.T_COMMENT():"*"===this._input[this.offset]?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();const t=this._input[this.offset];return"\n"!==t&&"\r"!==t||this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&">"===this._input[this.offset]?(this.input(),t=this._input[this.offset],"\n"!==t&&"\r"!==t||this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if("."===t){if(t=this.input(),this.is_NUM_START())return this.consume_NUM();t&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+t+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){const t=this.input();if(" "!==t&&"\t"!==t&&"\n"!==t&&"\r"!==t){t&&this.unput(1);break}}return this.tok.T_WHITESPACE}}},3021:t=>{"use strict";const e=["\n","\r"],i=["\n","\r",";"],n=i.concat(["\t"," ",",","]",")","/","=","!"]);t.exports={T_CONSTANT_ENCAPSED_STRING:function(){let t;for(;this.offset<this.size;)if(t=this.input(),"\\"==t)this.input();else if("'"==t)break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){const t=this.offset;if("<"===this._input[this.offset-1]&&"<"===this._input[this.offset]&&"<"===this._input[this.offset+1]){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,this.is_TABSPACE()););let i=this._input[this.offset-1];if("'"===i||'"'===i?this.offset++:i=null,this.is_LABEL_START()){let n=this.offset-1;for(;this.offset<this.size&&(this.offset++,this.is_LABEL()););const s=this._input.substring(n,this.offset-1);if((!i||i===this._input[this.offset-1])&&(i&&this.offset++,e.includes(this._input[this.offset-1])))return this.heredoc_label.label=s,this.heredoc_label.length=s.length,this.heredoc_label.finished=!1,n=this.offset-t,this.offset=t,this.consume(n),"'"===i?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=t,!1},ST_DOUBLE_QUOTES:function(){let t;for(;this.offset<this.size;)if(t=this.input(),"\\"==t)this.input();else{if('"'==t)break;if("$"==t){if(t=this.input(),"{"==t||this.is_LABEL_START()){this.unput(2);break}t&&this.unput(1)}else if("{"==t){if(t=this.input(),"$"==t){this.unput(2);break}t&&this.unput(1)}}if('"'==t)return this.tok.T_CONSTANT_ENCAPSED_STRING;{let t=1;return"b"!==this.yytext[0]&&"B"!==this.yytext[0]||(t=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-t),this.unput(this.yytext.length-t),this.begin("ST_DOUBLE_QUOTES"),this.yytext}},isDOC_MATCH:function(t,s){const r=this._input[t-2];if(!e.includes(r))return!1;let o=!1,h=!1,a=0,l=this._input[t-1];if(this.version>=703){for(;"\t"===l||" "===l;)" "===l?o=!0:"\t"===l&&(h=!0),l=this._input[t+a],a++;if(t+=a,e.includes(this._input[t-1]))return!1}if(this._input.substring(t-1,t-1+this.heredoc_label.length)===this.heredoc_label.label){const e=this._input[t-1+this.heredoc_label.length];if((this.version>=703?n:i).includes(e)){if(s){if(this.consume(a),o&&h)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=a,this.heredoc_label.indentation_uses_spaces=o,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;let t=this.offset+1;for(;t<this._input.length;){if(this.isDOC_MATCH(t,!1))return;if(!e.includes(this._input[t-1]))for(;!e.includes(this._input[t++])&&t<this._input.length;);t++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;let t=this._input[this.offset-1];for(;this.offset<this.size;)if(e.includes(t)){if(t=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else t=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){let t=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if("\\"===t&&(t=this.input(),e.includes(t)||(t=this.input())),e.includes(t)){if(t=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if("$"===t){if(t=this.input(),"{"===t)return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){const t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}}else if("{"===t){if(t=this.input(),"$"===t)return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else t=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();const t=this.input();if("["==t)return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if("-"===t){if(">"===this.input())return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else t&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){let t=this.input();if("$"===t){if(t=this.input(),"{"===t)return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if("{"===t){if("$"===this._input[this.offset])return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if("`"===t)return this.popState(),"`";for(;this.offset<this.size;){if("\\"===t)this.input();else{if("`"===t){this.unput(1),this.popState(),this.appendToken("`",1);break}if("$"===t){if(t=this.input(),"{"===t)return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){const t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}continue}if("{"===t){if(t=this.input(),"$"===t)return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}}t=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){let t=this.input();if("$"===t){if(t=this.input(),"{"===t)return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if("{"===t){if("$"===this._input[this.offset])return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if('"'===t)return this.popState(),'"';for(;this.offset<this.size;){if("\\"===t)this.input();else{if('"'===t){this.unput(1),this.popState(),this.appendToken('"',1);break}if("$"===t){if(t=this.input(),"{"===t)return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){const t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}t&&this.unput(1)}else if("{"===t){if(t=this.input(),"$"===t)return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);t&&this.unput(1)}}t=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}}},8860:t=>{"use strict";t.exports={T_STRING:function(){const t=this.yytext.toLowerCase();let e=this.keywords[t];if("number"!=typeof e)if("yield"===t)this.version>=700&&this.tryMatch(" from")?(this.consume(5),e=this.tok.T_YIELD_FROM):e=this.tok.T_YIELD;else if(e=this.tok.T_STRING,"b"===t||"B"===t){const t=this.input(1);if('"'===t)return this.ST_DOUBLE_QUOTES();if("'"===t)return this.T_CONSTANT_ENCAPSED_STRING();t&&this.unput(1)}return e},consume_TOKEN:function(){const t=this._input[this.offset-1],e=this.tokenTerminals[t];return e?e.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){const t=this._input[this.offset];return">"===t?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):"-"===t?(this.input(),this.tok.T_DEC):"="===t?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){return this.tok.T_NS_SEPARATOR},"/":function(){return"="===this._input[this.offset]?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return":"===this._input[this.offset]?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){const t=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){const t=this.yytext.length;this.consume_LABEL();const e=this.yytext.substring(t-1).toLowerCase(),i=this.castKeywords[e];if("number"==typeof i&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),")"===this._input[this.offset-1]))return i}return this.unput(this.offset-t),"("},"=":function(){const t=this._input[this.offset];return">"===t?(this.input(),this.tok.T_DOUBLE_ARROW):"="===t?"="===this._input[this.offset+1]?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){const t=this._input[this.offset];return"+"===t?(this.input(),this.tok.T_INC):"="===t?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return"="===this._input[this.offset]?"="===this._input[this.offset+1]?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&"?"===this._input[this.offset]?this.version>=704&&"="===this._input[this.offset+1]?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&"-"===this._input[this.offset]&&">"===this._input[this.offset+1]?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){let t=this._input[this.offset];return"<"===t?(t=this._input[this.offset+1],"="===t?(this.consume(2),this.tok.T_SL_EQUAL):"<"===t&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL)):"="===t?(this.input(),this.version>=700&&">"===this._input[this.offset]?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):">"===t?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){let t=this._input[this.offset];return"="===t?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):">"===t?(t=this._input[this.offset+1],"="===t?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR)):">"},"*":function(){const t=this._input[this.offset];return"="===t?(this.input(),this.tok.T_MUL_EQUAL):"*"===t?(this.input(),"="===this._input[this.offset]?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){const t=this._input[this.offset];return"="===t?(this.input(),this.tok.T_CONCAT_EQUAL):"."===t&&"."===this._input[this.offset+1]?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return"="===this._input[this.offset]?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){const t=this._input[this.offset];return"="===t?(this.input(),this.tok.T_AND_EQUAL):"&"===t?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){const t=this._input[this.offset];return"="===t?(this.input(),this.tok.T_OR_EQUAL):"|"===t?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return"="===this._input[this.offset]?(this.input(),this.tok.T_XOR_EQUAL):"^"}}}},7599:t=>{"use strict";t.exports={is_NUM:function(){const t=this._input.charCodeAt(this.offset-1);return t>47&&t<58||95===t},is_NUM_START:function(){const t=this._input.charCodeAt(this.offset-1);return t>47&&t<58},is_LABEL:function(){const t=this._input.charCodeAt(this.offset-1);return t>96&&t<123||t>64&&t<91||95===t||t>47&&t<58||t>126},is_LABEL_START:function(){const t=this._input.charCodeAt(this.offset-1);return t>64&&t<91||t>96&&t<123||95===t||t>126},consume_LABEL:function(){for(;this.offset<this.size;){const t=this.input();if(!this.is_LABEL()){t&&this.unput(1);break}}return this},is_TOKEN:function(){const t=this._input[this.offset-1];return-1!==";:,.\\[]()|^&+-/*=%!~$<>?@".indexOf(t)},is_WHITESPACE:function(){const t=this._input[this.offset-1];return" "===t||"\t"===t||"\n"===t||"\r"===t},is_TABSPACE:function(){const t=this._input[this.offset-1];return" "===t||"\t"===t},consume_TABSPACE:function(){for(;this.offset<this.size;){const t=this.input();if(!this.is_TABSPACE()){t&&this.unput(1);break}}return this},is_HEX:function(){const t=this._input.charCodeAt(this.offset-1);return t>47&&t<58||t>64&&t<71||t>96&&t<103||95===t}}},5079:(t,e,i)=>{"use strict";const n=i(1143);function s(t){return"."!=t&&","!=t&&!isNaN(parseFloat(t))&&isFinite(t)}const r=function(t,e){this.lexer=t,this.ast=e,this.tok=t.tok,this.EOF=t.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=800,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;const i=function(t){return[t,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(i)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(i)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(i)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(i)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(i)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(i)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(i))}};r.prototype.getTokenName=function(t){return s(t)?t==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[t]:"'"+t+"'"},r.prototype.parse=function(t,e){this._errors=[],this.filename=e||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(t),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;const i=this.node("program"),n=[];for(this.next();this.token!=this.EOF;)n.push(this.read_start());0===n.length&&this.extractDoc&&this._docs.length>this._docIndex&&n.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];const s=i(n,this._errors,this._docs,this._tokens);if(this.debug){const t=this.ast.checkNodes();if(t.length>0)throw t.forEach((function(t){t.position&&console.log("Node at line "+t.position.line+", column "+t.position.column),console.log(t.stack.join("\n"))})),new Error("Some nodes are not closed")}return s},r.prototype.raiseError=function(t,e,i,n){if(t+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){const e=new SyntaxError(t,this.filename,this.lexer.yylloc.first_line);throw e.lineNumber=this.lexer.yylloc.first_line,e.fileName=this.filename,e.columnNumber=this.lexer.yylloc.first_column,e}const s=this.ast.prepare("error",null,this)(t,n,this.lexer.yylloc.first_line,i);return this._errors.push(s),s},r.prototype.error=function(t){let e="Parse Error : syntax error",i=this.getTokenName(this.token),n="";if(this.token!==this.EOF){if(s(this.token)){let t=this.text();t.length>10&&(t=t.substring(0,7)+"..."),i="'"+t+"' ("+i+")"}e+=", unexpected "+i}return t&&!Array.isArray(t)&&((s(t)||1===t.length)&&(n=", expecting "+this.getTokenName(t)),e+=n),this.raiseError(e,n,t,i)},r.prototype.position=function(){return new n(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)},r.prototype.node=function(t){if(this.extractDoc){let e=null;this._docIndex<this._docs.length&&(e=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+t)),console.log(e)));const i=this.ast.prepare(t,e,this);return i.postBuild=function(t){if(this._docIndex<this._docs.length)if(this._lastNode){const t=this.prev[2];let e=this._docIndex;for(;e<this._docs.length&&!(this._docs[e].offset>t);e++);e>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,e)),this._docIndex=e)}else this.token===this.EOF&&(t.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=t}.bind(this),i}return this.ast.prepare(t,null,this)},r.prototype.expectEndOfStatement=function(t){if(";"===this.token)t&&";"===this.lexer.yytext&&t.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};const o=["parser.next","parser.node","parser.showlog"];r.prototype.showlog=function(){const t=(new Error).stack.split("\n");let e;for(let i=2;i<t.length;i++){e=t[i].trim();let n=!1;for(let t=0;t<o.length;t++)if(e.substring(3,3+o[t].length)===o[t]){n=!0;break}if(!n)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @--\x3e"+e),this},r.prototype.expect=function(t){if(Array.isArray(t)){if(-1===t.indexOf(this.token))return this.error(t),!1}else if(this.token!=t)return this.error(t),!1;return!0},r.prototype.text=function(){return this.lexer.yytext},r.prototype.next=function(){if(";"===this.token&&";"!==this.lexer.yytext||(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this},r.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;let t=this.lexer.yytext;if(t=this.lexer.engine.tokens.values.hasOwnProperty(this.token)?[this.lexer.engine.tokens.values[this.token],t,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:[null,t,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(t),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this},r.prototype.is=function(t){return Array.isArray(t)?-1!==t.indexOf(this.token):this.entries[t].has(this.token)},[i(3489),i(1395),i(1482),i(8356),i(8658),i(8573),i(3897),i(660),i(7616),i(2932),i(3912),i(510),i(5289),i(4394),i(8414)].forEach((function(t){for(const e in t){if(r.prototype.hasOwnProperty(e))throw new Error("Function "+e+" is already defined - collision");r.prototype[e]=t[e]}})),t.exports=r},3489:t=>{"use strict";t.exports={read_array:function(){let t=null,e=!1;const i=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),t=")"):(e=!0,t="]");let n=[];return this.next().token!==t&&(n=this.read_array_pair_list(e)),this.expect(t),this.next(),i(e,n)},read_array_pair_list:function(t){const e=this;return this.read_list((function(){return e.read_array_pair(t)}),",",!0)},read_array_pair:function(t){if(!t&&")"===this.token||t&&"]"===this.token)return;if(","===this.token)return this.node("noop")();const e=this.node("entry");let i=null,n=null,s=!1,r=!1;if("&"===this.token)this.next(),s=!0,n=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),"&"===this.token&&this.error(),r=!0,n=this.read_expr();else{const t=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),i=t,"&"===this.token?(this.next(),s=!0,n=this.read_variable(!0,!1)):n=this.read_expr()):n=t}return e(i,n,s,r)}}},1395:t=>{"use strict";t.exports={read_class_declaration_statement:function(t){const e=this.node("class"),i=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);let n=this.node("identifier");const s=this.text();this.next(),n=n(s);const r=this.read_extends_from(),o=this.read_implements_list();this.expect("{");const h=e(n,r,o,this.next().read_class_body(),i);return t&&(h.attrGroups=t),h},read_class_modifiers:function(){return[0,0,this.read_class_modifier()]},read_class_modifier:function(){return this.token===this.tok.T_ABSTRACT?(this.next(),1):this.token===this.tok.T_FINAL?(this.next(),2):0},read_class_body:function(){let t=[],e=[];for(;this.token!==this.EOF&&"}"!==this.token;){if(this.token===this.tok.T_COMMENT){t.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){t.push(this.read_doc_comment());continue}if(this.token===this.tok.T_USE){t=t.concat(this.read_trait_use_statement());continue}this.token===this.tok.T_ATTRIBUTE&&(e=this.read_attr_list());const i=this.position(),n=this.read_member_flags(!1);if(this.token!==this.tok.T_CONST)if(this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),n[0]=null,n[1]=0),this.token===this.tok.T_FUNCTION)t.push(this.read_function(!1,n,e,i)),e=[];else if(this.token===this.tok.T_VARIABLE||this.version>=704&&("?"===this.token||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_ARRAY||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE)){const i=this.read_variable_list(n,e);e=[],this.expect(";"),this.next(),t=t.concat(i)}else this.error([this.tok.T_CONST,this.tok.T_VARIABLE,this.tok.T_FUNCTION]),this.next();else{const i=this.read_constant_list(n,e);this.expect(";")&&this.next(),t=t.concat(i)}}return this.expect("}"),this.next(),t},read_variable_list:function(t,e){const i=this.node("propertystatement"),n=this.read_list((function(){const t=this.node("property"),[i,n]=this.read_optional_type();this.expect(this.tok.T_VARIABLE);let s=this.node("identifier");const r=this.text().substring(1);return this.next(),s=s(r),";"===this.token||","===this.token?t(s,null,i,n,e||[]):"="===this.token?t(s,this.next().read_expr(),i,n,e||[]):(this.expect([",",";","="]),t(s,null,i,n,e||[]))}),",");return i(null,n,t)},read_constant_list:function(t,e){this.expect(this.tok.T_CONST)&&this.next();const i=this.node("classconstant"),n=this.read_list((function(){const t=this.node("constant");let e=null,i=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){e=this.node("identifier");const t=this.text();this.next(),e=e(t)}else this.expect("IDENTIFIER");return this.expect("=")&&(i=this.next().read_expr()),t(e,i)}),",");return i(null,n,t,e||[])},read_member_flags:function(t){const e=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){let i=0,n=0;do{switch(this.token){case this.tok.T_PUBLIC:i=0,n=0;break;case this.tok.T_PROTECTED:i=0,n=1;break;case this.tok.T_PRIVATE:i=0,n=2;break;case this.tok.T_STATIC:i=1,n=1;break;case this.tok.T_ABSTRACT:i=2,n=1;break;case this.tok.T_FINAL:i=2,n=2}t&&(0==i&&2==n?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),n=-1):2==i&&1==n&&(this.error(),n=-1)),-1!==e[i]?this.error():-1!==n&&(e[i]=n)}while(this.next().is("T_MEMBER_FLAGS"))}return-1==e[1]&&(e[1]=0),-1==e[2]&&(e[2]=0),e},read_optional_type:function(){let t=!1;"?"===this.token&&(t=!0,this.next());let e=this.read_types();if(t&&!e&&this.raiseError("Expecting a type definition combined with nullable operator"),!t&&!e)return[!1,null];if("|"===this.token){e=[e];do{this.next();const t=this.read_type();if(!t){this.raiseError("Expecting a type definition");break}e.push(t)}while("|"===this.token)}return[t,e]},read_interface_declaration_statement:function(t){const e=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);let i=this.node("identifier");const n=this.text();this.next(),i=i(n);const s=this.read_interface_extends_list();return this.expect("{"),e(i,s,this.next().read_interface_body(),t||[])},read_interface_body:function(){let t=[],e=[];for(;this.token!==this.EOF&&"}"!==this.token;){if(this.token===this.tok.T_COMMENT){t.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){t.push(this.read_doc_comment());continue}const i=this.position();e=this.read_attr_list();const n=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){const i=this.read_constant_list(n,e);this.expect(";")&&this.next(),t=t.concat(i),e=[]}else if(this.token===this.tok.T_FUNCTION){const s=this.read_function_declaration(2,n,e,i);s.parseFlags(n),t.push(s),this.expect(";")&&this.next(),e=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}return this.expect("}")&&this.next(),t},read_trait_declaration_statement:function(){const t=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier");const i=this.text();return this.next(),e=e(i),this.expect("{"),t(e,this.next().read_class_body())},read_trait_use_statement:function(){const t=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();const e=[this.read_namespace_name()];let i=null;for(;","===this.token;)e.push(this.next().read_namespace_name());if("{"===this.token){for(i=[];this.next().token!==this.EOF&&"}"!==this.token;)i.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return t(e,i)},read_trait_use_alias:function(){const t=this.node();let e,i=null;if(this.is("IDENTIFIER")){e=this.node("identifier");const t=this.text();this.next(),e=e(t)}else if(e=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){i=e,e=this.node("identifier");const t=this.text();this.next(),e=e(t)}else this.expect(this.tok.T_STRING);else e=e.name;if(this.token===this.tok.T_INSTEADOF)return t("traitprecedence",i,e,this.next().read_name_list());if(this.token===this.tok.T_AS){let n=null,s=null;if(this.next().is("T_MEMBER_FLAGS")&&(n=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){s=this.node("identifier");const t=this.text();this.next(),s=s(t)}else!1===n&&this.expect(this.tok.T_STRING);return t("traitalias",i,e,s,n)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),t("traitalias",i,e,null,null)}}},1482:t=>{"use strict";t.exports={read_comment:function(){const t=this.text();let e=this.ast.prepare("/*"===t.substring(0,2)?"commentblock":"commentline",null,this);const i=this.lexer.yylloc.first_offset,n=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),e=e(t),e.offset=i,this.prev=n,e},read_doc_comment:function(){let t=this.ast.prepare("commentblock",null,this);const e=this.lexer.yylloc.first_offset,i=this.text(),n=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),t=t(i),t.offset=e,this.prev=n,t}}},8356:t=>{"use strict";t.exports={read_expr:function(t){const e=this.node();if("@"===this.token)return t||(t=this.next().read_expr()),e("silent",t);if(t||(t=this.read_expr_item()),"|"===this.token)return e("bin","|",t,this.next().read_expr());if("&"===this.token)return e("bin","&",t,this.next().read_expr());if("^"===this.token)return e("bin","^",t,this.next().read_expr());if("."===this.token)return e("bin",".",t,this.next().read_expr());if("+"===this.token)return e("bin","+",t,this.next().read_expr());if("-"===this.token)return e("bin","-",t,this.next().read_expr());if("*"===this.token)return e("bin","*",t,this.next().read_expr());if("/"===this.token)return e("bin","/",t,this.next().read_expr());if("%"===this.token)return e("bin","%",t,this.next().read_expr());if(this.token===this.tok.T_POW)return e("bin","**",t,this.next().read_expr());if(this.token===this.tok.T_SL)return e("bin","<<",t,this.next().read_expr());if(this.token===this.tok.T_SR)return e("bin",">>",t,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return e("bin","||",t,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return e("bin","or",t,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return e("bin","&&",t,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return e("bin","and",t,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return e("bin","xor",t,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return e("bin","===",t,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return e("bin","!==",t,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return e("bin","==",t,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return e("bin","!=",t,this.next().read_expr());if("<"===this.token)return e("bin","<",t,this.next().read_expr());if(">"===this.token)return e("bin",">",t,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return e("bin","<=",t,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return e("bin",">=",t,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return e("bin","<=>",t,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(t=e("bin","instanceof",t,this.next().read_class_name_reference()),";"!==this.token&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(t=this.read_expr(t))),this.token===this.tok.T_COALESCE)return e("bin","??",t,this.next().read_expr());if("?"===this.token){let i=null;return":"!==this.next().token&&(i=this.read_expr()),this.expect(":")&&this.next(),e("retif",t,i,this.read_expr())}return e.destroy(t),t},read_expr_cast:function(t){return this.node("cast")(t,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){let t=null;switch(this.token){case this.tok.T_ISSET:{t=this.node("isset"),this.next().expect("(")&&this.next();const e=this.read_isset_variables();this.expect(")")&&this.next(),t=t(e)}break;case this.tok.T_EMPTY:{t=this.node("empty"),this.next().expect("(")&&this.next();const e=this.read_expr();this.expect(")")&&this.next(),t=t(e)}break;case this.tok.T_INCLUDE:t=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:t=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:{t=this.node("eval"),this.next().expect("(")&&this.next();const e=this.read_expr();this.expect(")")&&this.next(),t=t(e)}break;case this.tok.T_REQUIRE:t=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:t=this.node("include")(!0,!0,this.next().read_expr())}return t},read_optional_expr:function(t){return this.token!==t?this.read_expr():null},read_exit_expr:function(){let t=null;return"("===this.token&&(this.next(),t=this.read_optional_expr(")"),this.expect(")")&&this.next()),t},read_expr_item:function(){let t,e,i=[];if("+"===this.token)return this.node("unary")("+",this.next().read_expr());if("-"===this.token)return this.node("unary")("-",this.next().read_expr());if("!"===this.token)return this.node("unary")("!",this.next().read_expr());if("~"===this.token)return this.node("unary")("~",this.next().read_expr());if("("===this.token)return e=this.next().read_expr(),e.parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(e);if("`"===this.token)return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){let e=null;const i=this.innerList;t=this.node("list"),i||(e=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);const n=this.read_array_pair_list(!1);this.expect(")")&&this.next();let s=!1;for(let t=0;t<n.length;t++)if(null!==n[t]&&"noop"!==n[t].kind){s=!0;break}return s||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),i?t(n,!1):(this.innerList=!1,this.expect("=")?e(t(n,!1),this.next().read_expr(),"="):t(n,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(-1!==this.text().indexOf("binary")?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:return this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression"),this.node("throw")(this.next().read_expr());case this.tok.T_EXIT:{const e="die"===this.lexer.yytext.toLowerCase();return t=this.node("exit"),this.next(),t(this.read_exit_expr(),e)}case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:{let e=null,i=null;return t=this.node("yield"),this.next().is("EXPR")&&(e=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(i=e,e=this.next().read_expr())),t(e,i)}case this.tok.T_YIELD_FROM:return t=this.node("yieldfrom"),e=this.next().read_expr(),t(e);case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,i);case this.tok.T_STATIC:{const t=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],i);this.lexer.tokens.push(t),this.next()}}if(this.is("VARIABLE")){t=this.node(),e=this.read_variable(!1,!1);const i="identifier"===e.kind||"staticlookup"===e.kind&&"identifier"===e.offset.kind;switch(this.token){case"=":return i&&this.error("VARIABLE"),"&"==this.next().token?this.read_assignref(t,e):t("assign",e,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return i&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return i&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return i&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return i&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return i&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return i&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return i&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return i&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return i&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return i&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return i&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return i&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return i&&this.error("VARIABLE"),t("assign",e,this.next().read_expr(),"??=");case this.tok.T_INC:return i&&this.error("VARIABLE"),this.next(),t("post","+",e);case this.tok.T_DEC:return i&&this.error("VARIABLE"),this.next(),t("post","-",e);default:t.destroy(e)}}else{if(this.is("SCALAR")){if(t=this.node(),e=this.read_scalar(),"array"===e.kind&&e.shortForm&&"="===this.token){const i=this.convertToList(e);return e.loc&&(i.loc=e.loc),t("assign",i,this.next().read_expr(),"=")}return t.destroy(e),this.handleDereferencable(e)}this.error("EXPR"),this.next()}return e},convertToList:function(t){const e=t.items.map((t=>(t.value&&"array"===t.value.kind&&t.value.shortForm&&(t.value=this.convertToList(t.value)),t))),i=this.node("list")(e,!0);return t.loc&&(i.loc=t.loc),t.leadingComments&&(i.leadingComments=t.leadingComments),t.trailingComments&&(i.trailingComments=t.trailingComments),i},read_assignref:function(t,e){let i;return this.next(),this.token===this.tok.T_NEW?(this.version>=700&&this.error(),i=this.read_new_expr()):i=this.read_variable(!1,!1),t("assignref",e,i)},read_inline_function:function(t,e){if(this.token===this.tok.T_FUNCTION){const i=this.read_function(!0,t,e);return i.attrGroups=e,i}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");const i=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();const n=this.is_reference();this.expect("(")&&this.next();const s=this.read_parameter_list();this.expect(")")&&this.next();let r=!1,o=null;":"===this.token&&("?"===this.next().token&&(r=!0,this.next()),o=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();const h=i(s,n,this.read_expr(),o,r,!!t);return h.attrGroups=e,h},read_match_expression:function(){const t=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");let e=null,i=[];return this.expect("(")&&this.next(),e=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),i=this.read_match_arms(),this.expect("}")&&this.next(),t(e,i)},read_match_arms:function(){return this.read_list((()=>this.read_match_arm()),",",!0)},read_match_arm:function(){if("}"!==this.token)return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){let t=[];if(this.token===this.tok.T_DEFAULT)t=null,this.next();else for(t.push(this.read_expr());","===this.token;){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),t;t.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),t},read_attribute(){const t=this.text();let e=[];return this.next(),"("===this.token&&(e=this.read_argument_list()),this.node("attribute")(t,e)},read_attr_list(){const t=[];if(this.token===this.tok.T_ATTRIBUTE)do{const e=this.node("attrgroup")([]);for(this.next(),e.attrs.push(this.read_attribute());","===this.token;)this.next(),"]"!==this.token&&e.attrs.push(this.read_attribute());t.push(e),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return t},read_new_expr:function(){const t=this.node("new");this.expect(this.tok.T_NEW)&&this.next();let e=[];const i=this.read_attr_list();if(this.token===this.tok.T_CLASS){const n=this.node("class");"("===this.next().token&&(e=this.read_argument_list());const s=this.read_extends_from(),r=this.read_implements_list();let o=null;this.expect("{")&&(o=this.next().read_class_body());const h=n(null,s,r,o,[0,0,0]);return h.attrGroups=i,t(h,e)}const n=this.read_new_class_name();return"("===this.token&&(e=this.read_argument_list()),t(n,e)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){let t=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(t=this.read_static_getter(t)),t}if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])},handleDereferencable:function(t){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)t=this.recursive_variable_chain_scan(t,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||"["===this.token)t=this.read_dereferencable(t);else{if("("!==this.token)return t;t=this.node("call")(t,this.read_argument_list())}return t}}},8658:t=>{"use strict";t.exports={is_reference:function(){return"&"==this.token&&(this.next(),!0)},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS&&(this.next(),!0)},read_function:function(t,e,i,n){const s=this.read_function_declaration(t?1:e?2:0,e&&1===e[1],i||[],n);return e&&1==e[2]?(s.parseFlags(e),this.expect(";")&&this.next()):(this.expect("{")&&(s.body=this.read_code_block(!1),s.loc&&s.body.loc&&(s.loc.end=s.body.loc.end)),!t&&e&&s.parseFlags(e)),s},read_function_declaration:function(t,e,i,n){let s="function";1===t?s="closure":2===t&&(s="method");const r=this.node(s);this.expect(this.tok.T_FUNCTION)&&this.next();const o=this.is_reference();let h=!1,a=[],l=null,c=!1;if(1!==t){const e=this.node("identifier");2===t?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(h=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(h=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(h=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(h=this.text()),this.next()),h=e(h)}this.expect("(")&&this.next();const u=this.read_parameter_list();this.expect(")")&&this.next(),1===t&&(a=this.read_lexical_vars()),":"===this.token&&("?"===this.next().token&&(c=!0,this.next()),l=this.read_types());return(t=>(t.attrGroups=i||[],n&&t.loc&&(t.loc.start=n,t.loc.source&&(t.loc.source=this.lexer._input.substr(t.loc.start.offset,t.loc.end.offset-t.loc.start.offset))),t))(1===t?r(u,o,a,l,c,e):r(h,u,o,l,c))},read_lexical_vars:function(){let t=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),t=this.read_lexical_var_list(),this.expect(")")&&this.next()),t},read_list_with_dangling_comma:function(t){const e=[];for(;this.token!=this.EOF;){if(e.push(t()),","!=this.token){if(")"==this.token)break;this.error([",",")"]);break}if(this.next(),this.version>=800&&")"===this.token)return e}return e},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if("&"===this.token)return this.read_byref(this.read_lexical_var.bind(this));const t=this.node("variable");this.expect(this.tok.T_VARIABLE);const e=this.text().substring(1);return this.next(),t(e,!1)},read_parameter_list:function(){return")"!=this.token?this.read_list_with_dangling_comma(this.read_parameter.bind(this)):[]},read_parameter:function(){const t=this.node("parameter");let e=null,i=null,n=null,s=!1,r=[];this.token===this.tok.T_ATTRIBUTE&&(r=this.read_attr_list());const o=this.read_promoted();"?"===this.token&&(this.next(),s=!0),n=this.read_types(),s&&!n&&this.raiseError("Expecting a type definition combined with nullable operator");const h=this.is_reference(),a=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){e=this.node("identifier");const t=this.text().substring(1);this.next(),e=e(t)}"="==this.token&&(i=this.next().read_expr());const l=t(e,n,i,h,a,s,o);return r&&(l.attrGroups=r),l},read_types(){const t=[],e=this.node("uniontype");let i=this.read_type();if(!i)return null;for(t.push(i);"|"===this.token;)this.next(),i=this.read_type(),t.push(i);return 1===t.length?t[0]:e(t)},read_promoted(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){let t=[];return this.expect("(")&&this.next(),")"!==this.token&&(t=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),t},read_non_empty_argument_list:function(){let t=!1;return this.read_function_list(function(){const e=this.read_argument();return e&&(t&&this.raiseError("Unexpected argument after a variadic argument"),"variadic"===e.kind&&(t=!0)),e}.bind(this),",")},read_argument:function(){if(this.token===this.tok.T_ELLIPSIS)return this.node("variadic")(this.next().read_expr());if(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token)){const t=this.lexer.getState(),e=this.lexer.lex();if(this.lexer.setState(t),":"===e)return this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())}return this.read_expr()},read_type:function(){const t=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){const e=this.text();return this.next(),t("typereference",e.toLowerCase(),e)}if(this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){const e=this.text(),i=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(e.toLowerCase())>-1?t("typereference",e.toLowerCase(),e):(this.lexer.tokens.push(i),this.next(),t.destroy(),this.read_namespace_name())}return this.token===this.tok.T_NAMESPACE||this.token===this.tok.T_NS_SEPARATOR?(t.destroy(),this.read_namespace_name()):(t.destroy(),null)}}},8573:t=>{"use strict";t.exports={read_if:function(){const t=this.node("if"),e=this.next().read_if_expr();let i=null,n=null,s=!1;if(":"===this.token){s=!0,this.next(),i=this.node("block");const t=[];for(;this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){n=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){n=this.read_else_short();break}t.push(this.read_inner_statement())}i=i(null,t),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else i=this.read_statement(),this.token===this.tok.T_ELSEIF?n=this.read_if():this.token===this.tok.T_ELSE&&(n=this.next().read_statement());return t(e,i,n,s)},read_if_expr:function(){this.expect("(")&&this.next();const t=this.read_expr();return this.expect(")")&&this.next(),t},read_elseif_short:function(){let t=null;const e=this.node("if"),i=this.next().read_if_expr();this.expect(":")&&this.next();const n=this.node("block"),s=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){t=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){t=this.read_else_short();break}s.push(this.read_inner_statement())}return e(i,n(null,s),t,!0)},read_else_short:function(){this.next().expect(":")&&this.next();const t=this.node("block"),e=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)e.push(this.read_inner_statement());return t(null,e)}}},3897:t=>{"use strict";t.exports={read_while:function(){const t=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();let e=null,i=null,n=!1;return this.expect("(")&&this.next(),e=this.read_expr(),this.expect(")")&&this.next(),":"===this.token?(n=!0,i=this.read_short_form(this.tok.T_ENDWHILE)):i=this.read_statement(),t(e,i,n)},read_do:function(){const t=this.node("do");this.expect(this.tok.T_DO)&&this.next();let e=null,i=null;return i=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),e=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),t(e,i)},read_for:function(){const t=this.node("for");this.expect(this.tok.T_FOR)&&this.next();let e=[],i=[],n=[],s=null,r=!1;return this.expect("(")&&this.next(),";"!==this.token?(e=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),";"!==this.token?(i=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),")"!==this.token?(n=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),":"===this.token?(r=!0,s=this.read_short_form(this.tok.T_ENDFOR)):s=this.read_statement(),t(e,i,n,s,r)},read_foreach:function(){const t=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();let e=null,i=null,n=null,s=null,r=!1;return this.expect("(")&&this.next(),e=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),n=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(i=n,n=this.next().read_foreach_variable())),i&&"list"===i.kind&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),":"===this.token?(r=!0,s=this.read_short_form(this.tok.T_ENDFOREACH)):s=this.read_statement(),t(e,i,n,s,r)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||"["===this.token){const t="["===this.token,e=this.node("list");this.next(),!t&&this.expect("(")&&this.next();const i=this.read_array_pair_list(t);return this.expect(t?"]":")")&&this.next(),e(i,t)}return this.read_variable(!1,!1)}}},660:t=>{"use strict";t.exports={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}}},7616:t=>{"use strict";t.exports={read_namespace:function(){const t=this.node("namespace");let e,i;return this.expect(this.tok.T_NAMESPACE)&&this.next(),i="{"==this.token?{name:[""]}:this.read_namespace_name(),this.currentNamespace=i,";"==this.token?(this.currentNamespace=i,e=this.next().read_top_statements(),this.expect(this.EOF),t(i.name,e,!1)):"{"==this.token?(this.currentNamespace=i,e=this.next().read_top_statements(),this.expect("}")&&this.next(),0===e.length&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),t(i.name,e,!0)):"("===this.token?(i.resolution=this.ast.reference.RELATIVE_NAME,i.name=i.name.substring(1),t.destroy(),this.node("call")(i,this.read_argument_list())):(this.error(["{",";"]),this.currentNamespace=i,e=this.read_top_statements(),this.expect(this.EOF),t(i,e,!1))},read_namespace_name:function(t){const e=this.node();let i=!1;this.token===this.tok.T_NAMESPACE&&(this.next().expect(this.tok.T_NS_SEPARATOR)&&this.next(),i=!0);const n=this.read_list(this.tok.T_STRING,this.tok.T_NS_SEPARATOR,!0);if(!i&&1===n.length&&(t||"("!==this.token)){if("parent"===n[0].toLowerCase())return e("parentreference",n[0]);if("self"===n[0].toLowerCase())return e("selfreference",n[0])}return e("name",n,i)},read_use_statement:function(){let t=this.node("usegroup"),e=[],i=null;this.expect(this.tok.T_USE)&&this.next();const n=this.read_use_type();return e.push(this.read_use_declaration(!1)),","===this.token?e=e.concat(this.next().read_use_declarations(!1)):"{"===this.token&&(i=e[0].name,e=this.next().read_use_declarations(null===n),this.expect("}")&&this.next()),t=t(i,n,e),this.expect(";")&&this.next(),t},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(t){const e=this.node("useitem");let i=null;t&&(i=this.read_use_type());const n=this.read_namespace_name(),s=this.read_use_alias();return e(n.name,s,i)},read_use_declarations:function(t){const e=[this.read_use_declaration(t)];for(;","===this.token;){if(this.next(),t){if(this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;e.push(this.read_use_declaration(t))}return e},read_use_alias:function(){let t=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){const e=this.node("identifier"),i=this.text();this.next(),t=e(i)}return t},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}}},2932:t=>{"use strict";const e={"\\":"\\",$:"$",n:"\n",r:"\r",t:"\t",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)};t.exports={resolve_special_chars:function(t,i){return i?t.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,((t,i,n)=>e[i]?e[i]:"x"===i[0]||"X"===i[0]?String.fromCodePoint(parseInt(i.substr(1),16)):"u"===i[0]?String.fromCodePoint(parseInt(n,16)):String.fromCodePoint(parseInt(i,8)))):t.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(t,e,i,n){if(0===e)return t;this.check_heredoc_indentation_level(t,e,i,n);const s=i?" ":"\t",r=new RegExp(`\\n${s}{${e}}`,"g"),o=new RegExp(`^${s}{${e}}`);return n&&(t=t.replace(o,"")),t.replace(r,"\n")},check_heredoc_indentation_level:function(t,e,i,n){const s=t.length;let r=0,o=0,h=!0;const a=i?" ":"\t";let l=!1;if(!n){if(r=t.indexOf("\n"),-1===r)return;r++}for(;r<s;)h?t[r]===a?o++:l=!0:h=!1,"\n"!==t[r]&&l&&o<e?this.raiseError(`Invalid body indentation level (expecting an indentation at least ${e})`):l=!1,"\n"===t[r]&&(h=!0,o=0),r++},read_dereferencable_scalar:function(){let t=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:{let e=this.node("string");const i=this.text();let n=0;"b"!==i[0]&&"B"!==i[0]||(n=1);const s='"'===i[n];this.next(),e=e(s,this.resolve_special_chars(i.substring(n+1,i.length-1),s),1===n,i),t=this.token===this.tok.T_DOUBLE_COLON?this.read_static_getter(e):e}break;case this.tok.T_ARRAY:case"[":t=this.read_array()}return t},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();{let t,e;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:{const e=this.node("number");return t=this.text(),this.next(),e(t,null)}case this.tok.T_START_HEREDOC:if("ST_NOWDOC"===this.lexer.curCondition){const i=this.lexer.yylloc.first_offset;e=this.node("nowdoc"),t=this.next().text(),this.lexer.heredoc_label.indentation>0&&(t=t.substring(0,t.length-this.lexer.heredoc_label.indentation));const n=t[t.length-1];"\n"===n?t="\r"===t[t.length-2]?t.substring(0,t.length-2):t.substring(0,t.length-1):"\r"===n&&(t=t.substring(0,t.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();const s=this.lexer._input.substring(i,this.lexer.yylloc.first_offset);return e=e(this.remove_heredoc_leading_whitespace_chars(t,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),s,this.lexer.heredoc_label.label),e}return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:{const t=this.error("SCALAR");return this.next(),t}}}},read_dereferencable:function(t){let e,i;const n=this.node("offsetlookup");return"["===this.token?(i=this.next().read_expr(),this.expect("]")&&this.next(),e=n(t,i)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(i=this.read_encapsed_string_item(!1),e=n(t,i)),e},read_encapsed_string_item:function(t){const e=this.node("encapsedpart");let i,n,s,r=null,o=!1,h=this.node();if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){const e=this.text();this.next(),h=h("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(e,t),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):e,!1,e)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(r="simple",o=!0,s=null,this.next().token===this.tok.T_STRING_VARNAME){s=this.node("variable");const t=this.text();this.next(),"["===this.token?(s=s(t,!1),n=this.node("offsetlookup"),i=this.next().read_expr(),this.expect("]")&&this.next(),h=n(s,i)):h=s(t,!1)}else h=h("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)r="complex",h.destroy(),h=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(r="simple",h.destroy(),h=this.read_simple_variable(),"["===this.token&&(n=this.node("offsetlookup"),i=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),h=n(h,i)),this.token===this.tok.T_OBJECT_OPERATOR){n=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);const t=this.node("identifier");s=this.text(),this.next(),h=n(h,t(s))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);const t=this.text();this.next(),h.destroy(),h=h("string",!1,t,!1,t)}return this.lexer.heredoc_label.first_encaps_node=!1,e(h,r,o)},read_encapsed_string:function(t,e=!1){const i=this.lexer.yylloc.first_offset;let n=this.node("encapsed");this.next();const s=this.lexer.yylloc.prev_offset-(e?1:0),r=[];let o=null;for(o="`"===t?this.ast.encapsed.TYPE_SHELL:'"'===t?this.ast.encapsed.TYPE_STRING:this.ast.encapsed.TYPE_HEREDOC;this.token!==t&&this.token!==this.EOF;)r.push(this.read_encapsed_string_item(!0));if(r.length>0&&"encapsedpart"===r[r.length-1].kind&&"string"===r[r.length-1].expression.kind){const t=r[r.length-1].expression,e=t.value[t.value.length-1];"\n"===e?"\r"===t.value[t.value.length-2]?t.value=t.value.substring(0,t.value.length-2):t.value=t.value.substring(0,t.value.length-1):"\r"===e&&(t.value=t.value.substring(0,t.value.length-1))}return this.expect(t)&&this.next(),n=n(r,this.lexer._input.substring("heredoc"===o?i:s-1,this.lexer.yylloc.first_offset),o),t===this.tok.T_END_HEREDOC&&(n.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),n},get_magic_constant:function(){const t=this.node("magic"),e=this.text();return this.next(),t(e.toUpperCase(),e)}}},3912:t=>{"use strict";t.exports={read_top_statements:function(){let t=[];for(;this.token!==this.EOF&&"}"!==this.token;){const e=this.read_top_statement();e&&(Array.isArray(e)?t=t.concat(e):t.push(e))}return t},read_top_statement:function(){let t=[];switch(this.token===this.tok.T_ATTRIBUTE&&(t=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,t);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement(t);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(t);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:{const t=this.node("constantstatement"),e=this.next().read_const_list();return this.expectEndOfStatement(),t(null,e)}case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:{const t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,t(this.lexer._input.substring(this.lexer.offset))}default:return this.read_statement()}},read_inner_statements:function(){let t=[];for(;this.token!=this.EOF&&"}"!==this.token;){const e=this.read_inner_statement();e&&(Array.isArray(e)?t=t.concat(e):t.push(e))}return t},read_const_list:function(){return this.read_list((function(){this.expect(this.tok.T_STRING);const t=this.node("constant");let e=this.node("identifier");const i=this.text();return this.next(),e=e(i),this.expect("=")?t(e,this.next().read_expr()):t(e,null)}),",",!1)},read_declare_list:function(){const t=[];for(;this.token!=this.EOF&&")"!==this.token;){this.expect(this.tok.T_STRING);const e=this.node("declaredirective");let i=this.node("identifier");const n=this.text();this.next(),i=i(n);let s=null;if(this.expect("=")&&(s=this.next().read_expr()),t.push(e(i,s)),","!==this.token)break;this.next()}return t},read_inner_statement:function(){let t=[];switch(this.token===this.tok.T_ATTRIBUTE&&(t=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:{const e=this.read_function(!1,!1);return e.attrGroups=t,e}case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_HALT_COMPILER:{this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");let t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),t=t(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),t}default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:{const t=this.node("return");this.next();const e=this.read_optional_expr(";");return this.expectEndOfStatement(),t(e)}case this.tok.T_BREAK:case this.tok.T_CONTINUE:{const t=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();const e=this.read_optional_expr(";");return this.expectEndOfStatement(),t(e)}case this.tok.T_GLOBAL:{const t=this.node("global"),e=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),t(e)}case this.tok.T_STATIC:{const t=[this.token,this.lexer.getState()],e=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(t);const i=this.next().read_expr();return this.expectEndOfStatement(i),e("expressionstatement",i)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);const i=this.read_variable_declarations();return this.expectEndOfStatement(),e("static",i)}case this.tok.T_ECHO:{const t=this.node("echo"),e=this.text(),i="<?="===e||"<%="===e,n=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),t(n,i)}case this.tok.T_INLINE_HTML:{const t=this.text();let e=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null;const i="\r"===e||"\n"===e;i&&"\n"===e&&this.lexer.yylloc.first_offset>1&&"\r"===this.lexer._input[this.lexer.yylloc.first_offset-2]&&(e="\r\n");const n=this.node("inline");return this.next(),n(t,i?e+t:t)}case this.tok.T_UNSET:{const t=this.node("unset");this.next().expect("(")&&this.next();const e=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),t(e)}case this.tok.T_DECLARE:{const t=this.node("declare"),e=[];let i;this.next().expect("(")&&this.next();const n=this.read_declare_list();if(this.expect(")")&&this.next(),":"===this.token){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)e.push(this.read_top_statement());0===e.length&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),i=this.ast.declare.MODE_SHORT}else if("{"===this.token){for(this.next();this.token!=this.EOF&&"}"!==this.token;)e.push(this.read_top_statement());0===e.length&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect("}")&&this.next(),i=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),i=this.ast.declare.MODE_NONE;return t(n,e,i)}case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:{const t=this.node("throw"),e=this.next().read_expr();return this.expectEndOfStatement(),t(e)}case";":return this.next(),null;case this.tok.T_STRING:{const t=this.node(),e=[this.token,this.lexer.getState()],i=this.text();let n=this.node("identifier");if(":"===this.next().token)return n=n(i),this.next(),t("label",n);n.destroy(),t.destroy(),this.lexer.tokens.push(e);const s=this.node("expressionstatement"),r=this.next().read_expr();return this.expectEndOfStatement(r),s(r)}case this.tok.T_GOTO:{const t=this.node("goto");let e=null;if(this.next().expect(this.tok.T_STRING)){e=this.node("identifier");const t=this.text();this.next(),e=e(t),this.expectEndOfStatement()}return t(e)}default:{const t=this.node("expressionstatement"),e=this.read_expr();return this.expectEndOfStatement(e),t(e)}}},read_code_block:function(t){const e=this.node("block");this.expect("{")&&this.next();const i=t?this.read_top_statements():this.read_inner_statements();return 0===i.length&&this.extractDoc&&this._docs.length>this._docIndex&&i.push(this.node("noop")()),this.expect("}")&&this.next(),e(null,i)}}},510:t=>{"use strict";t.exports={read_switch:function(){const t=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();const e=this.read_expr();this.expect(")")&&this.next();const i=":"===this.token;return t(e,this.read_switch_case_list(),i)},read_switch_case_list:function(){let t=null;const e=this.node("block"),i=[];for("{"===this.token?t="}":":"===this.token?t=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),";"===this.token&&this.next();this.token!==this.EOF&&this.token!==t;)i.push(this.read_case_list(t));return 0===i.length&&this.extractDoc&&this._docs.length>this._docIndex&&i.push(this.node("noop")()),this.expect(t)&&this.next(),t===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),e(null,i)},read_case_list:function(t){const e=this.node("case");let i=null;this.token===this.tok.T_CASE?i=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();const n=this.node("block"),s=[];for(;this.token!==this.EOF&&this.token!==t&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)s.push(this.read_inner_statement());return e(i,n(null,s))}}},5289:t=>{"use strict";t.exports={read_try:function(){this.expect(this.tok.T_TRY);const t=this.node("try");let e=null;const i=[],n=this.next().read_statement();for(;this.token===this.tok.T_CATCH;){const t=this.node("catch");this.next().expect("(")&&this.next();const e=this.read_list(this.read_namespace_name,"|",!1);let n=null;this.token===this.tok.T_VARIABLE&&(n=this.read_variable(!0,!1)),this.expect(")"),i.push(t(this.next().read_statement(),e,n))}return this.token===this.tok.T_FINALLY&&(e=this.next().read_statement()),t(n,i,e)}}},4394:t=>{"use strict";t.exports={read_short_form:function(t){const e=this.node("block"),i=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==t;)i.push(this.read_inner_statement());return 0===i.length&&this.extractDoc&&this._docs.length>this._docIndex&&i.push(this.node("noop")()),this.expect(t)&&this.next(),this.expectEndOfStatement(),e(null,i)},read_function_list:function(t,e){const i=[];do{if(this.token==e&&this.version>=703&&i.length>0){i.push(this.node("noop")());break}if(i.push(t.apply(this,[])),this.token!=e)break;if(")"==this.next().token&&this.version>=703)break}while(this.token!=this.EOF);return i},read_list:function(t,e,i){const n=[];if(this.token==e&&(i&&n.push("function"==typeof t?this.node("noop")():null),this.next()),"function"==typeof t)do{const i=t.apply(this,[]);if(i&&n.push(i),this.token!=e)break}while(this.next().token!=this.EOF);else{if(!this.expect(t))return[];for(n.push(this.text());this.next().token!=this.EOF&&this.token==e&&this.next().token==t;)n.push(this.text())}return n},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(t){let e=this.node("byref");this.next(),e=e(null);const i=t();return i&&(this.ast.swapLocations(i,e,i,this),i.byref=!0),i},read_variable_declarations:function(){return this.read_list((function(){const t=this.node("staticvariable");let e=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){const t=this.text().substring(1);this.next(),e=e(t,!1)}else e=e("#ERR",!1);return"="===this.token?t(e,this.next().read_expr()):e}),",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}}},8414:t=>{"use strict";t.exports={read_variable:function(t,e){let i;if("&"===this.token)return this.read_byref(this.read_variable.bind(this,t,e));if(this.is([this.tok.T_VARIABLE,"$"]))i=this.read_reference_variable(e);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAMESPACE])){i=this.node();const t=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&"("!=this.token&&-1===["parentreference","selfreference"].indexOf(t.kind)){const e=t.name.toLowerCase();"true"===e?i=t.destroy(i("boolean",!0,t.name)):"false"===e?i=t.destroy(i("boolean",!1,t.name)):"null"===e?i=t.destroy(i("nullkeyword",t.name)):(i.destroy(t),i=t)}else i.destroy(t),i=t}else if(this.token===this.tok.T_STATIC){i=this.node("staticreference");const t=this.text();this.next(),i=i(t)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(i=this.read_static_getter(i,e)),this.recursive_variable_chain_scan(i,t,e)},read_static_getter:function(t,e){const i=this.node("staticlookup");let n,s;return this.next().is([this.tok.T_VARIABLE,"$"])?n=this.read_reference_variable(e):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(n=this.node("identifier"),s=this.text(),this.next(),n=n(s)):"{"===this.token?(n=this.node("literal"),s=this.next().read_expr(),this.expect("}")&&this.next(),n=n("literal",s,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),n=this.node("identifier"),s=this.text(),this.next(),n=n(s)),i(t,n)},read_what:function(t=!1){let e=null,i=null;switch(this.next().token){case this.tok.T_STRING:e=this.node("identifier"),i=this.text(),this.next(),e=e(i),t&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:e=this.node("variable"),i=this.text().substring(1),this.next(),e=e(i,!1);break;case"$":e=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),"{"===this.token?(i=this.next().read_expr(),this.expect("}")&&this.next(),e=e("variable",i,!0)):(i=this.read_expr(),e=e("variable",i,!1));break;case"{":e=this.node("encapsedpart"),i=this.next().read_expr(),this.expect("}")&&this.next(),e=e(i,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),e=this.node("identifier"),i=this.text(),this.next(),e=e(i)}return e},recursive_variable_chain_scan:function(t,e,i){let n,s;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(e)return t;t=this.node("call")(t,this.read_argument_list());break;case"[":case"{":{const e="["===this.token;n=this.node("offsetlookup"),this.next(),s=!1,i?(s=this.read_encaps_var_offset(),this.expect(e?"]":"}")&&this.next()):(e?"]"!==this.token:"}"!==this.token)?(s=this.read_expr(),this.expect(e?"]":"}")&&this.next()):this.next(),t=n(t,s);break}case this.tok.T_DOUBLE_COLON:"staticlookup"===t.kind&&"identifier"===t.offset.kind&&this.error(),n=this.node("staticlookup"),t=n(t,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:n=this.node("propertylookup"),t=n(t,this.read_what());break;case this.tok.T_NULLSAFE_OBJECT_OPERATOR:n=this.node("nullsafepropertylookup"),t=n(t,this.read_what());break;default:break t}return t},read_encaps_var_offset:function(){let t=this.node();if(this.token===this.tok.T_STRING){const e=this.text();this.next(),t=t("identifier",e)}else if(this.token===this.tok.T_NUM_STRING){const e=this.text();this.next(),t=t("number",e,null)}else if("-"===this.token){this.next();const e=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),t=t("number",e,null)}else if(this.token===this.tok.T_VARIABLE){const e=this.text().substring(1);this.next(),t=t("variable",e,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);const e=this.text();this.next(),t=t("identifier",e)}return t},read_reference_variable:function(t){let e,i=this.read_simple_variable();for(;this.token!=this.EOF;){const n=this.node();if("{"!=this.token||t){n.destroy();break}e=this.next().read_expr(),this.expect("}")&&this.next(),i=n("offsetlookup",i,e)}return i},read_simple_variable:function(){let t,e=this.node("variable");if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)t=this.text().substring(1),this.next(),e=e(t,!1);else switch("$"===this.token&&this.next(),this.token){case"{":{const t=this.next().read_expr();this.expect("}")&&this.next(),e=e(t,!0);break}case"$":e=e(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:{t=this.text().substring(1);const i=this.node("variable");this.next(),e=e(i(t,!1),!1);break}default:this.error(["{","$",this.tok.T_VARIABLE]),t=this.text(),this.next(),e=e(t,!1)}return e}}},3155:t=>{"use strict";t.exports={values:{101:"T_HALT_COMPILER",102:"T_USE",103:"T_ENCAPSED_AND_WHITESPACE",104:"T_OBJECT_OPERATOR",105:"T_STRING",106:"T_DOLLAR_OPEN_CURLY_BRACES",107:"T_STRING_VARNAME",108:"T_CURLY_OPEN",109:"T_NUM_STRING",110:"T_ISSET",111:"T_EMPTY",112:"T_INCLUDE",113:"T_INCLUDE_ONCE",114:"T_EVAL",115:"T_REQUIRE",116:"T_REQUIRE_ONCE",117:"T_NAMESPACE",118:"T_NS_SEPARATOR",119:"T_AS",120:"T_IF",121:"T_ENDIF",122:"T_WHILE",123:"T_DO",124:"T_FOR",125:"T_SWITCH",126:"T_BREAK",127:"T_CONTINUE",128:"T_RETURN",129:"T_GLOBAL",130:"T_STATIC",131:"T_ECHO",132:"T_INLINE_HTML",133:"T_UNSET",134:"T_FOREACH",135:"T_DECLARE",136:"T_TRY",137:"T_THROW",138:"T_GOTO",139:"T_FINALLY",140:"T_CATCH",141:"T_ENDDECLARE",142:"T_LIST",143:"T_CLONE",144:"T_PLUS_EQUAL",145:"T_MINUS_EQUAL",146:"T_MUL_EQUAL",147:"T_DIV_EQUAL",148:"T_CONCAT_EQUAL",149:"T_MOD_EQUAL",150:"T_AND_EQUAL",151:"T_OR_EQUAL",152:"T_XOR_EQUAL",153:"T_SL_EQUAL",154:"T_SR_EQUAL",155:"T_INC",156:"T_DEC",157:"T_BOOLEAN_OR",158:"T_BOOLEAN_AND",159:"T_LOGICAL_OR",160:"T_LOGICAL_AND",161:"T_LOGICAL_XOR",162:"T_SL",163:"T_SR",164:"T_IS_IDENTICAL",165:"T_IS_NOT_IDENTICAL",166:"T_IS_EQUAL",167:"T_IS_NOT_EQUAL",168:"T_IS_SMALLER_OR_EQUAL",169:"T_IS_GREATER_OR_EQUAL",170:"T_INSTANCEOF",171:"T_INT_CAST",172:"T_DOUBLE_CAST",173:"T_STRING_CAST",174:"T_ARRAY_CAST",175:"T_OBJECT_CAST",176:"T_BOOL_CAST",177:"T_UNSET_CAST",178:"T_EXIT",179:"T_PRINT",180:"T_YIELD",181:"T_YIELD_FROM",182:"T_FUNCTION",183:"T_DOUBLE_ARROW",184:"T_DOUBLE_COLON",185:"T_ARRAY",186:"T_CALLABLE",187:"T_CLASS",188:"T_ABSTRACT",189:"T_TRAIT",190:"T_FINAL",191:"T_EXTENDS",192:"T_INTERFACE",193:"T_IMPLEMENTS",194:"T_VAR",195:"T_PUBLIC",196:"T_PROTECTED",197:"T_PRIVATE",198:"T_CONST",199:"T_NEW",200:"T_INSTEADOF",201:"T_ELSEIF",202:"T_ELSE",203:"T_ENDSWITCH",204:"T_CASE",205:"T_DEFAULT",206:"T_ENDFOR",207:"T_ENDFOREACH",208:"T_ENDWHILE",209:"T_CONSTANT_ENCAPSED_STRING",210:"T_LNUMBER",211:"T_DNUMBER",212:"T_LINE",213:"T_FILE",214:"T_DIR",215:"T_TRAIT_C",216:"T_METHOD_C",217:"T_FUNC_C",218:"T_NS_C",219:"T_START_HEREDOC",220:"T_END_HEREDOC",221:"T_CLASS_C",222:"T_VARIABLE",223:"T_OPEN_TAG",224:"T_OPEN_TAG_WITH_ECHO",225:"T_CLOSE_TAG",226:"T_WHITESPACE",227:"T_COMMENT",228:"T_DOC_COMMENT",229:"T_ELLIPSIS",230:"T_COALESCE",231:"T_POW",232:"T_POW_EQUAL",233:"T_SPACESHIP",234:"T_COALESCE_EQUAL",235:"T_FN",236:"T_NULLSAFE_OBJECT_OPERATOR",237:"T_MATCH",238:"T_ATTRIBUTE"},names:{T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238}}},3204:t=>{"use strict";t.exports=window.wp.CodeMirror},907:(t,e,i)=>{"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}i.d(e,{Z:()=>n})},3878:(t,e,i)=>{"use strict";function n(t){if(Array.isArray(t))return t}i.d(e,{Z:()=>n})},1902:(t,e,i)=>{"use strict";function n(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,s,r,o,h=[],a=!0,l=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;a=!1}else for(;!(a=(n=r.call(i)).done)&&(h.push(n.value),h.length!==e);a=!0);}catch(t){l=!0,s=t}finally{try{if(!a&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(l)throw s}}return h}}i.d(e,{Z:()=>n})},5267:(t,e,i)=>{"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}i.d(e,{Z:()=>n})},3324:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(3878),s=i(1902),r=i(181),o=i(5267);function h(t,e){return(0,n.Z)(t)||(0,s.Z)(t,e)||(0,r.Z)(t,e)||(0,o.Z)()}},5512:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(1002);function s(t,e){if("object"!==(0,n.Z)(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!==(0,n.Z)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}},7343:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(1002),s=i(5512);function r(t){var e=(0,s.Z)(t,"string");return"symbol"===(0,n.Z)(e)?e:String(e)}},1002:(t,e,i)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}i.d(e,{Z:()=>n})},181:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(907);function s(t,e){if(t){if("string"==typeof t)return(0,n.Z)(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?(0,n.Z)(t,e):void 0}}}},i={};function n(t){var s=i[t];if(void 0!==s)return s.exports;var r=i[t]={exports:{}};return e[t].call(r.exports,r,r.exports,n),r.exports}n.m=e,t=[],n.O=(e,i,s,r)=>{if(!i){var o=1/0;for(c=0;c<t.length;c++){for(var[i,s,r]=t[c],h=!0,a=0;a<i.length;a++)(!1&r||o>=r)&&Object.keys(n.O).every((t=>n.O[t](i[a])))?i.splice(a--,1):(h=!1,r<o&&(o=r));if(h){t.splice(c--,1);var l=s();void 0!==l&&(e=l)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[i,s,r]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={189:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var s,r,[o,h,a]=i,l=0;if(o.some((e=>0!==t[e]))){for(s in h)n.o(h,s)&&(n.m[s]=h[s]);if(a)var c=a(n)}for(e&&e(i);l<o.length;l++)r=o[l],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(c)},i=self.webpackChunkcode_snippets_pro=self.webpackChunkcode_snippets_pro||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var s=n(6687);s=n.O(s)})();